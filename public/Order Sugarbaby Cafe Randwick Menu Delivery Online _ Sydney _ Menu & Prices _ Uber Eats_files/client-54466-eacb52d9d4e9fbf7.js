"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[54466],{56349:(e,t,r)=>{r.d(t,{DD:()=>O,ZP:()=>k,ir:()=>y,uF:()=>w});var i=r("__fusion__568"),a=r(91931),n=r(67206),o=r(97415),d=r(94579),s=r(52692),l=r(85341),c=r(33990);const p=(0,a.zo)("div",{position:"relative",zIndex:d.I_.base}),h=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...(0,n.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:d.I_.background}})),g=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",...t.typography.LabelLarge}})),u=(0,a.w1)(o.CB,{height:"64px",width:"64px",display:"flex",alignItems:"center",justifyContent:"center"}),m=(0,a.zo)("div",{display:"flex",flexDirection:"column",flexGrow:1}),Z=(0,a.zo)("div",{display:"flex"}),f=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{height:"96px",width:"96px",background:`radial-gradient(circle at 50%, transparent 32px, ${t.colors.backgroundPrimary} 32px)`}})),D=(0,a.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{display:"flex",flexDirection:"column",flexGrow:1,marginLeft:r?`-${t.sizing.scale600}`:0,marginRight:r?`-${t.sizing.scale600}`:0}})),x=()=>(0,c.BX)(Z,{children:[(0,c.tZ)(f,{}),(0,c.BX)(D,{children:[(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"12px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"})]}),(0,c.tZ)(o.CB,{$width:"24px",$height:"96px"})]}),w=e=>{let{rows:t=3}=e;return(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),[...Array(t)].map(((e,t)=>(0,c.tZ)(x,{},t)))]})},y=e=>{let{isMobile:t}=e;return(0,c.tZ)(l.Z,{width:t?"100%":"412px",children:(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),(0,c.tZ)(o.gD,{width:"100%",height:"32px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"10px"}),(0,c.tZ)(o.gD,{width:"70%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"10px"}),(0,c.tZ)(o.gD,{width:"70%",height:"20px"})]})})},O=e=>{let{isMobile:t}=e;return(0,c.BX)(c.HY,{children:[(0,c.tZ)(y,{isMobile:t}),(0,c.BX)(D,{$isMobile:t,children:[(0,c.BX)(l.Z,{position:"relative",marginLeft:"scale600",marginTop:t?"scale600":0,children:[(0,c.tZ)(h,{}),(0,c.tZ)(o.gD,{width:"220px",height:"32px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"16px"})]}),(0,c.tZ)(w,{})]})]})},k=()=>(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),(0,c.BX)(g,{children:[(0,c.tZ)(u,{children:(0,c.tZ)(i.default,{})}),(0,c.BX)(m,{children:[(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"})]}),(0,c.tZ)(o.CB,{$width:"24px",$height:"64px"})]}),(0,c.tZ)(s.Z,{$margin:"0"}),(0,c.tZ)(x,{}),(0,c.tZ)(s.Z,{$margin:"0"}),(0,c.tZ)(x,{}),(0,c.tZ)(s.Z,{$margin:"0"}),(0,c.tZ)(x,{})]})},4502:(e,t,r)=>{r.d(t,{$:()=>f,e:()=>Z});var i=r(46933),a=r(91931),n=r(15649),o=r(59210),d=r("__fusion__561"),s=r(22395),l=r(75483),c=r(29192),p=r(60362),h=r(33990);const g=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:t.sizing.scale1600}})),u=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",background:t.colors.backgroundSecondary,borderRadius:t.sizing.scale200,padding:`${t.sizing.scale600} 0`,marginBottom:t.sizing.scale700}})),m=(e,t)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t).getTime();const Z=e=>{const t=new Date(e.startDate?.replace(/-/g,"/")??""),r=e?.endDate?new Date(e.endDate?.replace(/-/g,"/")??""):null;return{startDate:t,startTime:m(t,e.deliveryTimeRange?.startTime??0),endDate:r,endTime:m(t,e.deliveryTimeRange?.endTime??0)}};function f(e){let{repeatSchedule:t}=e;const r=function(e){const t=(0,l.o)(),{frequency:r}=e,{startDate:i}=Z(e),a=Object.keys(c.OG)[(i.getDay()+6)%7],n=new Date(i.getFullYear(),i.getMonth()+1,0).getDate()-i.getDate()<7?l.t.LAST:Object.keys(l.t)[Math.floor(i.getDate()/7)];return t.find((e=>!(e.id!==r||e.weekPosition&&e.weekPosition!==n||e.day&&e.day!==a)))?.label||null}(t),{startDate:a,endDate:m,startTime:f,endTime:D}=Z(t),x=(0,n.Z)(),w=e=>e.toLocaleDateString(x,{year:"numeric",month:"short",day:"numeric"});return(0,h.BX)(u,{children:[(0,h.tZ)(g,{children:(0,h.tZ)(d.default,{size:24})}),(0,h.BX)("div",{style:{},children:[(0,h.tZ)(o.Uc,{marginBottom:"4px",children:r}),(0,h.tZ)(o.aM,{color:"contentSecondary",children:(0,h.tZ)(i.v,{id:"eats.repeat_order.format.start_end_time",data:{startTime:(0,p.mr)(x,f),endTime:(0,p.mr)(x,D)}})}),(0,h.BX)(o.aM,{color:"contentSecondary",children:[(0,h.tZ)(i.v,{id:"go.join_group_order_repeat_schedule_start_date",data:{startDate:w(a)}}),(0,h.tZ)(s.Z,{spaces:2}),m?(0,h.tZ)(i.v,{id:"go.join_group_order_repeat_schedule_end_date",data:{endDate:w(m)}}):(0,h.tZ)(i.v,{id:"repeat_group_order.no_end_date"})]})]})]})}},69772:(e,t,r)=>{r.d(t,{AZ:()=>l,Nn:()=>u,XO:()=>h,eN:()=>c,mt:()=>m,td:()=>s,zJ:()=>g});var i=r("__fusion__866"),a=r(91931),n=r(86695),o=r(15208),d=r(33990);const s=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{backgroundColor:t.colors.borderOpaque,height:t.sizing.scale300,margin:`${t.sizing.scale600} -${t.sizing.scale600}`}})),l=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale0,backgroundColor:t.colors.borderOpaque,marginLeft:t.sizing.scale800,marginRight:t.sizing.scale1000}})),c=(0,a.zo)("div",{maxWidth:"412px",flex:1}),p=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{height:"64px",width:"64px",backgroundColor:t.colors.backgroundOverlay,color:t.colors.contentInversePrimary,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"}})),h=()=>(0,d.tZ)(p,{children:(0,d.tZ)(i.default,{size:24})}),g=e=>(0,d.tZ)(n.zx,{isFullWidth:!0,onClick:e.onClick,isLoading:e.isLoading||!1,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundNegative,":hover":{backgroundColor:t.colors.backgroundNegative}}}}},children:e.children}),u=(0,a.w1)(o.Z,{display:"flex"}),m=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,padding:`0 ${t.sizing.scale600}`,flexDirection:"column"}}))},54592:(e,t,r)=>{r.d(t,{H:()=>s,Z:()=>l});var i=r(74622),a=r(70587),n=r(8690),o=r(4502),d=r(62459);const s=["repeatOrderTemplateMetadata"],l=e=>{const t=(0,d.Z)("getDraftOrderByUuidV2"),{isRepeatGroupOrderEditing:r}=(0,n.Z)(),l=(0,i.useQuery)({queryKey:[...s,e],queryFn:async()=>{const r=await t.request("getDraftOrderByUuidV2",{draftOrderUUID:e});if("REPEAT_ORDER_TEMPLATE_STATE"!==r.draftOrder?.state)throw new Error("Not a repeat order");return r},enabled:Boolean(e)}),c=l.data?.draftOrder,p=c?.shoppingCart?.groupedItems??[],h=p.filter((e=>!e.isCreator)),g=c?.storeUuid||"",u=!1===c?.shoppingCart.isOwner,m=c?.shoppingCart.isOwner,Z=c?.cartLockOptions,f=c?.spendingLimitAmount?.amount?(c.spendingLimitAmount.amount/100).toString():"",D=c?.displayName,x=c?.billSplitOption||a.x.CREATOR_PAYS_ALL,w=c?.repeatSchedule,y=w&&r?(e=>{const{startTime:t,endDate:r}=(0,o.e)(e),i=new Date(t),a=e?.frequency;return{firstOrderScheduledForDate:i,frequency:a,endsOnDate:r?new Date(r):null}})(w):null,O=c?.handledHighCapacityOrderMetadata?.hhcOrderSize;return{query:l,isRepeatOrderParticipant:u,isRepeatOrderCreator:m,groupedItems:p,groupedItemsGuests:h,storeUuid:g,billSplitOption:x,cartLockOptions:Z,spendingLimit:f,displayName:D,repeatSchedule:w,repeatOrderOptions:y,groupSizeOption:O}}},68907:(e,t,r)=>{r.d(t,{G:()=>u});var i=r(47986),a=r(91631),n=r(62149),o=r(24316),d=r(76150),s=r(99233),l=r(86830),c=r(54592),p=r(8690),h=r(71576),g=r(5639);const u=()=>{const{setActiveDraftOrder:e}=(0,o.Z)(),{closeSidebarCart:t,toggleSidebarCartVisible:r,closeCartDropdown:u}=(0,d.Lb)(),{isMobile:m}=(0,g.hU)(),{repeatOrderTemplateUUID:Z}=(0,a.UO)(),{repeatOrderTemplateUUIDs:f}=(0,p.Z)(),{isRepeatOrderParticipant:D}=(0,c.Z)(Z||f[0]),x=(0,h.Z)("getDraftOrderByUuidV2"),w=(0,h.Z)("getStoreV1"),{logConsolidatedViewRowClick:y,logSingleRGORowClick:O,logSkipRGOButtonClick:k}=(0,l.E)(),b=(0,a.k6)(),$=(0,n.TH)();return{handleRepeatOrderClick:a=>{let n;if(a&&a.type)switch(a.type){case s.E3.openStoreFront:{const{draftOrderUUID:t}=a?.openStoreFront||{};e(t??void 0),t&&(async()=>{const e=await x({draftOrderUUID:t}),r=await w({storeUuid:e?.draftOrder?.storeUuid}),a=(0,i.gfM)($,{storeSlug:r?.slug,storeUuid:r?.uuid});a&&b.push(a)})();break}case s.E3.openManagement:n=a.openManagement.repeatOrderTemplateUUID||"",(e=>{b.push((0,i.JPr)($,e))})(n),u(),t(),y(n,D);break;case s.E3.openCheckout:if(e(a.openCheckout.draftOrderUUID||""),m){const e=(0,i.C45)($),t=(0,i.nQQ)(e);b.push(t)}else u(),r();O(a.openCheckout.draftOrderUUID,D);break;case s.E3.manageGuests:b.push((0,i.pk9)($,a.manageGuests.draftOrderUUID||""));break;case s.E3.openSettings:a.openSettings.repeatOrderTemplateUUID&&(b.push((0,i.saK)($,a.openSettings.repeatOrderTemplateUUID)),t(),u());break;case s.E3.skip:k(a.skip.repeatOrderTemplateUUID??""),b.push((0,i.vN_)($,"skipRepeatOrder",(0,i.nmv)(a.skip)));break;case s.E3.openBottomSheet:b.push((0,i.vN_)($,"skipNotification",(0,i.nmv)(a.openBottomSheet)))}}}}}}]);