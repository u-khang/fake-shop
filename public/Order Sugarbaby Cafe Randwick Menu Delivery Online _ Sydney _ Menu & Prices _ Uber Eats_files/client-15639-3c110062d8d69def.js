"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[15639],{67526:(e,E,t)=>{t.d(E,{LK:()=>L,fn:()=>r,ko:()=>_,nJ:()=>O});const O=Object.freeze({UNKNOWN:"UNKNOWN",GROUP_ORDER:"GROUP_ORDER",SEE_SIMILAR:"SEE_SIMILAR",STORE_BUNDLING:"STORE_BUNDLING",OVERFLOW:"OVERFLOW",SCHEDULE:"SCHEDULE"}),r=(Object.freeze({UNKNOWN:"UNKNOWN",SNAP_EBT:"SNAP_EBT"}),Object.freeze({UNKNOWN:"UNKNOWN",STORE_CLOSED:"STORE_CLOSED",NOT_ACCEPTING_ORDERS:"NOT_ACCEPTING_ORDERS",NO_COURIERS_NEARBY:"NO_COURIERS_NEARBY",HIGH_DEFECT_RATE:"HIGH_DEFECT_RATE",TOO_FAR_TO_DELIVER:"TOO_FAR_TO_DELIVER",CURRENTLY_UNAVAILABLE:"CURRENTLY_UNAVAILABLE"}),Object.freeze({DISMISS:"DISMISS",SCHEDULE:"SCHEDULE",SWITCH_ASAP:"SWITCH_ASAP"}),Object.freeze({UNKNOWN:"UNKNOWN",EMBEDDED_VIEW:"EMBEDDED_VIEW",ACTION_SHEET:"ACTION_SHEET",RESERVED_2:"RESERVED_2",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6",RESERVED_7:"RESERVED_7"}),Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS"}),Object.freeze({UNKNOWN:"UNKNOWN",BYOC:"BYOC",TOP_EATS:"TOP_EATS",IN_STORE_PRICING:"IN_STORE_PRICING",ETA:"ETA"}),Object.freeze({STANDARD:"STANDARD",SLIM:"SLIM"}),Object.freeze({DEFAULT:"DEFAULT",VEG_PREVALENT_MARKET:"VEG_PREVALENT_MARKET"}),Object.freeze({NONE:"NONE",FILTER:"FILTER"}),Object.freeze({STANDARD:"STANDARD",USE_SECTION_AS_CATEGORY:"USE_SECTION_AS_CATEGORY"}),Object.freeze({DEFAULT:"DEFAULT"}),Object.freeze({VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL",DROPDOWN:"DROPDOWN"}),Object.freeze({ROUTE_TO_STORE:"ROUTE_TO_STORE",ROUTE_TO_FEED:"ROUTE_TO_FEED"}),Object.freeze({DISCLAIMER:"DISCLAIMER",STANDARD_METADATA:"STANDARD_METADATA",NUTRITION_FACTS:"NUTRITION_FACTS",UNKNOWN:"UNKNOWN",PRICING:"PRICING",CUSTOMIZATION_METADATA:"CUSTOMIZATION_METADATA",CATALOG_SECTION:"CATALOG_SECTION",QUANTITY_SELECTOR:"QUANTITY_SELECTOR",ALERT:"ALERT",REMOVE_ITEM_BUTTON:"REMOVE_ITEM_BUTTON",STORES_WITH_PRODUCT:"STORES_WITH_PRODUCT",VARIANT_OPTIONS_GROUP:"VARIANT_OPTIONS_GROUP",MINI_STORE_CARD:"MINI_STORE_CARD",REPLACEMENT_PREFERENCES:"REPLACEMENT_PREFERENCES",ALLERGY_PREFERENCES:"ALLERGY_PREFERENCES",SPECIAL_INSTRUCTIONS:"SPECIAL_INSTRUCTIONS",CUSTOMIZATIONS:"CUSTOMIZATIONS",VERTICAL_DIVIDER:"VERTICAL_DIVIDER",PRESELECTED_CUSTOMIZATIONS:"PRESELECTED_CUSTOMIZATIONS",TAG_VIEWS:"TAG_VIEWS"})),_=Object.freeze({TILE:"TILE",DROPDOWN:"DROPDOWN",PILL:"PILL"}),L=(Object.freeze({SUCCESS:"SUCCESS",INFO:"INFO",WARNING:"WARNING",FAILURE:"FAILURE",CUSTOM:"CUSTOM"}),Object.freeze({COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"}),Object.freeze({UNDEFINED:"UNDEFINED",VEGETARIAN:"VEGETARIAN",VEGAN:"VEGAN",GLUTEN_FREE:"GLUTEN_FREE",PLACEHOLDER_4:"PLACEHOLDER_4",PLACEHOLDER_5:"PLACEHOLDER_5",PLACEHOLDER_6:"PLACEHOLDER_6",PLACEHOLDER_7:"PLACEHOLDER_7",PLACEHOLDER_8:"PLACEHOLDER_8",PLACEHOLDER_9:"PLACEHOLDER_9"}),Object.freeze({HORIZONTAL_GRID:"HORIZONTAL_GRID",VERTICAL_GRID:"VERTICAL_GRID",EXPLORE_MENU:"EXPLORE_MENU",EATER_MESSAGE:"EATER_MESSAGE",CATEGORY_LIST_ITEM:"CATEGORY_LIST_ITEM",SPECIAL_REQUEST:"SPECIAL_REQUEST",EMPTY_STATE:"EMPTY_STATE",AD_CANVAS:"AD_CANVAS",BUNDLE_STORE:"BUNDLE_STORE",AISLE_SHORTCUTS:"AISLE_SHORTCUTS",ACTIVE_CART:"ACTIVE_CART"}));Object.freeze({SPECIAL_REQUEST:"SPECIAL_REQUEST",REFRESH:"REFRESH",DISMISS:"DISMISS"}),Object.freeze({UNKNOWN:"UNKNOWN",STORE:"STORE",SEE_ALL:"SEE_ALL"}),Object.freeze({ITEM:"ITEM",COMBO:"COMBO",INTER_SUBSECTION_CAROUSEL:"INTER_SUBSECTION_CAROUSEL"}),Object.freeze({DEFAULT:"DEFAULT",CAROUSEL:"CAROUSEL"}),Object.freeze({DEFAULT:"DEFAULT",COLLAPSED:"COLLAPSED",REQUIRED_SINGLE_OPTION:"REQUIRED_SINGLE_OPTION"}),Object.freeze({DEFAULT:"DEFAULT",PROMOTION:"PROMOTION"}),Object.freeze({UBER_CASH:"UBER_CASH"}),Object.freeze({NOOP:"NOOP",INSERT:"INSERT"}),Object.freeze({DEFAULT:"DEFAULT",PHYSICAL:"PHYSICAL",VIRTUAL:"VIRTUAL",DELIVERY_API:"DELIVERY_API",STANDALONE_VIRTUAL:"STANDALONE_VIRTUAL",GROCERY_STORE:"GROCERY_STORE",ITEMLESS_STORE:"ITEMLESS_STORE",RESERVED_7:"RESERVED_7"}),Object.freeze({FLAT:"FLAT",PERCENT:"PERCENT",FREE_DELIVERY:"FREE_DELIVERY",DISCOUNT_DELIVERY:"DISCOUNT_DELIVERY",PLACEHOLDER_0:"PLACEHOLDER_0",DO_NOT_USE_FREE_ITEM:"DO_NOT_USE_FREE_ITEM",DO_NOT_USE_DISCOUNTED_ITEM:"DO_NOT_USE_DISCOUNTED_ITEM",VIRTUALPROMO_UBERCASH:"VIRTUALPROMO_UBERCASH",PLACEHOLDER_9:"PLACEHOLDER_9",PLACEHOLDER_10:"PLACEHOLDER_10",PLACEHOLDER_11:"PLACEHOLDER_11",PLACEHOLDER_12:"PLACEHOLDER_12",PLACEHOLDER_13:"PLACEHOLDER_13",PLACEHOLDER_14:"PLACEHOLDER_14",PLACEHOLDER_15:"PLACEHOLDER_15",PLACEHOLDER_16:"PLACEHOLDER_16",PLACEHOLDER_17:"PLACEHOLDER_17",PLACEHOLDER_18:"PLACEHOLDER_18",PLACEHOLDER_19:"PLACEHOLDER_19",PLACEHOLDER_20:"PLACEHOLDER_20",PLACEHOLDER_21:"PLACEHOLDER_21",PLACEHOLDER_22:"PLACEHOLDER_22",PLACEHOLDER_23:"PLACEHOLDER_23",PLACEHOLDER_24:"PLACEHOLDER_24",PLACEHOLDER_25:"PLACEHOLDER_25",PLACEHOLDER_26:"PLACEHOLDER_26",PLACEHOLDER_27:"PLACEHOLDER_27",PLACEHOLDER_28:"PLACEHOLDER_28",PLACEHOLDER_29:"PLACEHOLDER_29",PLACEHOLDER_30:"PLACEHOLDER_30",PLACEHOLDER_31:"PLACEHOLDER_31",PLACEHOLDER_32:"PLACEHOLDER_32"}),Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL:"ALCOHOL",PLACE_HOLDER_2:"PLACE_HOLDER_2",PLACE_HOLDER_3:"PLACE_HOLDER_3",PLACE_HOLDER_4:"PLACE_HOLDER_4",PLACE_HOLDER_5:"PLACE_HOLDER_5",PLACE_HOLDER_6:"PLACE_HOLDER_6",PLACE_HOLDER_7:"PLACE_HOLDER_7",PLACE_HOLDER_8:"PLACE_HOLDER_8",PLACE_HOLDER_9:"PLACE_HOLDER_9",PLACE_HOLDER_10:"PLACE_HOLDER_10"}),Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL:"ALCOHOL",PLACE_HOLDER_2:"PLACE_HOLDER_2",PLACE_HOLDER_3:"PLACE_HOLDER_3",PLACE_HOLDER_4:"PLACE_HOLDER_4",PLACE_HOLDER_5:"PLACE_HOLDER_5",PLACE_HOLDER_6:"PLACE_HOLDER_6",PLACE_HOLDER_7:"PLACE_HOLDER_7",PLACE_HOLDER_8:"PLACE_HOLDER_8",PLACE_HOLDER_9:"PLACE_HOLDER_9",PLACE_HOLDER_10:"PLACE_HOLDER_10"}),Object.freeze({UNKNOWN:"UNKNOWN",INSTAGRAM:"INSTAGRAM",PLACEHOLDER_2:"PLACEHOLDER_2",PLACEHOLDER_3:"PLACEHOLDER_3",PLACEHOLDER_4:"PLACEHOLDER_4",PLACEHOLDER_5:"PLACEHOLDER_5",PLACEHOLDER_6:"PLACEHOLDER_6",PLACEHOLDER_7:"PLACEHOLDER_7",PLACEHOLDER_8:"PLACEHOLDER_8",PLACEHOLDER_9:"PLACEHOLDER_9",PLACEHOLDER_10:"PLACEHOLDER_10"}),Object.freeze({STORE_OPENING_SOON:"STORE_OPENING_SOON",STORE_CLOSING_SOON:"STORE_CLOSING_SOON",STORE_CLOSED:"STORE_CLOSED",NOT_ACCEPTING_ORDERS:"NOT_ACCEPTING_ORDERS",TOO_FAR_TO_DELIVER:"TOO_FAR_TO_DELIVER",NO_COURIERS_NEARBY:"NO_COURIERS_NEARBY",CLOSING_TOO_SOON_TO_DELIVER:"CLOSING_TOO_SOON_TO_DELIVER",PLACEHOLDER_2:"PLACEHOLDER_2",AVAILABLE:"AVAILABLE",UNKNOWN:"UNKNOWN"}),Object.freeze({CAMERA:"CAMERA",GALLERY:"GALLERY",DISMISS:"DISMISS"}),Object.freeze({NONE:"NONE",JPEG:"JPEG",PNG:"PNG"}),Object.freeze({NEW_VERTICALS:"NEW_VERTICALS",RESTAURANT:"RESTAURANT"})},79250:(e,E,t)=>{t.d(E,{E:()=>n,F:()=>a});var O=t(60849),r=t(30085),_=t(33535),L=t(36151),R=t(57578);const a=()=>{let e;const E=(0,_.I0)(),t=(0,O.qp)({...r.m.menu_item_rating,defaultValue:"default"});return"treatment_1"!==t&&"treatment_2"!==t||(e="EATER_ENDORSED"),(0,L.useEffect)((()=>{E("eats:eats_web_cro_store_dish_rating_inclusion",{param_name:"menu_item_rating",param_value:t})}),[E,t]),{itemRatingTreatmentName:t,cbType:e}},n=e=>{const{itemRatingTreatmentName:E}=a(),t=(0,_.ZP)(),{totalMenuItems:O,totalMenuItemsWithRatings:r,totalMenuItemsWithRatingsInTreatment:n}=(0,L.useMemo)((()=>(0,R.uw)(e,E)),[e,E]);(0,L.useEffect)((()=>{"treatment_1"!==E&&"treatment_2"!==E||t("eats:total_menu_item_ratings",{menuItemRatings:{totalMenuItems:String(O),totalMenuItemsWithRatings:String(r),totalMenuItemsWithRatingsInTreatmentGroup:String(n),treatmentName:E}})}),[t,O,r,n,E])}},96729:(e,E,t)=>{t.d(E,{F:()=>L});var O=t(36151),r=t(1669),_=t(39463);const L=()=>{const{getQueueFromCache:e}=(0,r.iQ)(),E=(0,_.l)();return{notifyExternalSyncToCart:(0,O.useCallback)((t=>{let{storeId:O,cartId:r}=t;if(!E)return;e({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartUpdated",draftOrderId:r})}),[E,e]),notifyDiscardedOrder:(0,O.useCallback)((t=>{let{storeId:O}=t;if(!E)return;e({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartDiscarded"})}),[E,e]),notifyOrderCompleted:(0,O.useCallback)((t=>{let{storeId:O}=t;if(!E)return;e({type:"storeId",storeId:O}).notifyExternalChanges({type:"cartOrdered"})}),[E,e])}}},41117:(e,E,t)=>{t.d(E,{D:()=>O});const O={standardHeaderPayload:"standardHeaderPayload",storeHeaderPayload:"storeHeaderPayload",bannerHeaderPayload:"bannerHeaderPayload"}},75618:(e,E,t)=>{t.d(E,{p:()=>O});let O=function(e){return e.horizontalGridPayload="horizontalGridPayload",e.verticalGridPayload="verticalGridPayload",e.exploreMenuPayload="exploreMenuPayload",e.standardItemsPayload="standardItemsPayload",e.eaterMessagingPayload="eaterMessagingPayload",e.categoryItemPayload="categoryItemPayload",e.specialRequestPayload="specialRequestPayload",e.emptyStatePayload="emptyStatePayload",e.adCanvasPayload="adCanvasPayload",e.bundleStorePayload="bundleStorePayload",e.aisleShortcutItems="aisleShortcutItems",e.activeCartPayload="activeCartPayload",e.unknown="unknown",e}({})},74107:(e,E,t)=>{t.d(E,{Z:()=>a});var O=t(62149),r=t(80670),_=t(45288),L=t(86255),R=t(64388);const a=e=>{let{preparedId:E,cbType:t,diningMode:a,fetchSeoContentEnabled:n,primaryBundledStoreUuid:A,orderUuid:T}=e;const S=(0,O.UO)(),o=(0,r.Z)("uev2.fee-education-nugget"),C=Boolean(n),D=(0,L.Z)({encodedStoreUuid:S.encodedStoreUuid}),{shouldGetStore:I,getStore:d,store:P}=(0,R.ZP)(D,{preparedId:E,sfNuggetCount:o,...t?{cbType:t}:null,...a?{diningMode:a}:null,...A?{primaryStoreUUID:A}:null,fetchSeoContentEnabled:C,...T?{orderUuid:T}:{}});return{shouldGetStore:I,store:P,partialStore:(0,_.ZP)(D),getStore:d,fetchSeoContentEnabled:n}}},99990:(e,E,t)=>{t.d(E,{QT:()=>i,nX:()=>l});var O=t(36151),r=t(43193),_=t(64388),L=t(74107),R=t(62149),a=t(47986),n=t(79250),A=t(33660),T=t(47885),S=t(86255),o=t(70401),C=t(33535),D=t(57578),I=t(33990);const d={hasLoaded:!1,isLoading:!1,data:null,error:null},P=(0,O.createContext)({storeUuid:"",store:d,partialStore:null,primaryStore:d,isGrStore:null,queueCatalogItemImpression:()=>{}}),N=e=>{let{children:E,preparedId:t}=e;const O=(0,R.TH)(),d=(0,C.ZP)(),N=r.useRef({}),l=r.useRef({}),i=r.useCallback((()=>{d("eats:store_catalog_item_impression",{storeCatalog:{items:Object.values(l.current)}}),l.current={}}),[d]),s=(0,o.Z)(i,500),{encodedStoreUuid:u}=(0,R.UO)(),c=(0,S.Z)({encodedStoreUuid:u}),{diningMode:H,primaryBundledStoreUuid:U,liveOrderUuid:f}=(0,a.RAN)(O,["diningMode","primaryBundledStoreUuid","liveOrderUuid"]),{cbType:y}=(0,n.F)(),m=(0,A.Ee)(H),{isStorePrecheckoutBundlingEnabled:p}=(0,T.Z)(),{store:M,partialStore:G}=(0,L.Z)({preparedId:t,cbType:y,diningMode:m,fetchSeoContentEnabled:!0,primaryBundledStoreUuid:U,orderUuid:f}),{store:V}=(0,_.ZP)(p?U:null,{orderUuid:f}),b="USE_SECTION_AS_CATEGORY"===M.data?.menuDisplayType||!M.data&&null;return(0,I.tZ)(P.Provider,{value:{storeUuid:c,store:M,primaryStore:V,partialStore:G,isGrStore:b,queueCatalogItemImpression:e=>{const E=(0,D.Mo)(e);N.current[E]||(l.current[E]=e,N.current[E]=!0,s())}},children:E})},l=(e,E)=>{const t=t=>(0,I.tZ)(N,{preparedId:e,children:(0,I.tZ)(E,{...t})}),O=E.displayName||E.name||"";return t.displayName="WithStoreProvider("+O+")",t},i=()=>{const e=(0,O.useContext)(P);if(null!==e)return e;throw Error("You should call useStoreContext() only in a descendant of <StoreProvider>")}},57578:(e,E,t)=>{t.d(E,{A4:()=>P,E0:()=>S,FA:()=>a,Mo:()=>R,S8:()=>D,Tm:()=>d,Yx:()=>N,dK:()=>L,ex:()=>C,fg:()=>s,kR:()=>n,n$:()=>A,qY:()=>I,uw:()=>i,xZ:()=>l});var O=t(67526),r=t(75618),_=t(41117);function L(e){return Object.entries(e||{}).reduce(((e,E)=>{let[t,O]=E;return e+O.reduce(((e,E)=>e+(a(E)?.catalogItems?.length||0)),0)}),0)}function R(e){return`${e.sourceType}-${e.storeUuid}-${e.sectionUuid}-${e.subsectionUuid}-${e.itemUuid}`}function a(e){return e.payload?.type===r.p.standardItemsPayload?e.payload.standardItemsPayload:null}function n(e){return Object.values(e||{}).flat().find((e=>e.type===O.LK.BUNDLE_STORE))}function A(e,E,t){if(!e)return null;const O=t?e[t]:T(e);if(O)for(const e of O){const t=(a(e)?.catalogItems||[]).find((e=>e.uuid===E));if(t)return t}return null}const T=e=>(Object.values(e||{})||[]).reduce(((e,E)=>e.concat(E)),[]);function S(e){if(!e)return null;const E=a(e);if(E)return o(E);const t=function(e){return e.payload?.type===r.p.bundleStorePayload?e.payload.bundleStorePayload:null}(e);if(t){const e=t.title?.richTextElements?.[0];if("text"===e?.type)return e.text?.text?.text}const O=function(e){return e.payload?.type===r.p.categoryItemPayload?e.payload.categoryItemPayload:null}(e);if(O){const e=O?.title;return e||""}return null}const o=e=>{if(!e)return"";{const E=e.catalogSectionHeaderPayload;if(e.titleV2){return(e.titleV2?.richTextElements||[]).filter((e=>"text"===e.type)).map((e=>"text"in e?e.text?.text?.text:"")).join(" ").trim()||""}if(e.title)return e.title?.text;if(E)switch(E?.type){case _.D.standardHeaderPayload:return"text"===E?.standardHeaderPayload?.title?.richTextElements?.[0]?.type?E?.standardHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";case _.D.storeHeaderPayload:return"text"===E?.storeHeaderPayload?.title?.richTextElements?.[0]?.type?E?.storeHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";case _.D.bannerHeaderPayload:return"text"===E?.bannerHeaderPayload?.title?.richTextElements?.[0]?.type?E?.bannerHeaderPayload?.title?.richTextElements?.[0]?.text?.text?.text:"";default:return""}}return""};function C(e){if(!e)return null;const E=a(e);return E?E?.ctaMetadata:null}function D(e){const E=(e||[]).filter((e=>e.imageUrl)).slice(0,3);return{visibleItems:E,itemsWithoutImagesCount:(e||[]).length-E.length}}function I(e,E,t){if(!e||!t)return[];let O=e;return E&&t&&t[E]&&(O=t[E]),O??[]}function d(e,E){let t=0;return e.reduce(((e,O)=>{const _=O.catalogSectionUUID;if(!_||O.payload?.type!==r.p.standardItemsPayload)return e;const L=O.payload?.standardItemsPayload?.catalogItems||[];if(t+L.length>=E){const O=E-t;return t+=O,{...e,[_]:O}}return t+=L.length,{...e,[_]:L.length}}),{})}function P(e,E){return e.map((e=>{const t=e?.reviewText?.text||"";if(t.length<=E)return e;let O=E;for(;" "!==t[O]&&O>0;)O--;return{...e,reviewText:{...e.reviewText,text:`${t.slice(0,O)}...`}}}))}const N=e=>{let{catalogItem:E,sectionUuid:t,catalogSectionUuid:O,isGrocery:r,isMerchantOffersEnabled:_}=e;return!r&&_?t:E.sectionUuid?E.sectionUuid:O},l=(e,E)=>{let t="";if(!e?.endorsement?.text||"confidence_builders_eater_endorsed"!==e?.endorsementAnalyticsTag)return e?.endorsement?.text;{const O=e.endorsement.text.split(",");"treatment_1"===E&&(t=parseInt(O[0])<60?"":O[0]+"% ("+O[1]+")"),"treatment_2"===E&&(t=parseInt(O[0])<80?"":O[0]+"% ("+O[1]+")")}return t},i=(e,E)=>{let t=0,O=0,_=0;return"treatment_1"!==E&&"treatment_2"!==E||e?.forEach((e=>{e?.payload?.type===r.p.standardItemsPayload&&e?.payload?.standardItemsPayload&&(e?.payload?.standardItemsPayload?.catalogItems||[]).forEach((e=>{O=++O,"confidence_builders_eater_endorsed"===e.endorsementAnalyticsTag&&(t=++t,l(e,E)&&(_=++_))}))})),{totalMenuItems:O,totalMenuItemsWithRatings:t,totalMenuItemsWithRatingsInTreatment:_}},s=e=>!!e.type&&[String(O.LK.BUNDLE_STORE),String(O.LK.HORIZONTAL_GRID),String(O.LK.VERTICAL_GRID),String(O.LK.EATER_MESSAGE),String(O.LK.AD_CANVAS),String(O.LK.ACTIVE_CART),String(O.LK.AISLE_SHORTCUTS)].includes(e.type)}}]);