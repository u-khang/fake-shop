"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[71149],{5137:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(91931),n=r(33497),o=r(57444);const a=(0,i.zo)("button",(e=>({...(0,n.Z)({$theme:e.$theme,radius:e.radius}),textAlign:"center",color:e.$theme.colors.negative,...e.disabled?(0,o.Z)(e.$theme):{}})))},94229:(e,t,r)=>{r.d(t,{Z:()=>q});var i=r(36151),n=r(91631),o=r(52246),a=r(47986),l=r(91931),s=r(76150),d=r(46933),c=r(83960),u=r(22787),h=r(55186),p=r(34626),m=r(82532),Z=r(72275),g=r(70247),f=r(24934),b=r(4864),C=r(37573),I=r(74622),y=r(2237),v=r(62459);var _=r(69694),O=r(72179),T=r(3015),$=r(28222),k=r(14016),D=r(73472),B=r(34567),U=r(33535),z=r(62149),S=r(78989),E=r(65014),M=r(33990);const P=e=>{const t=(0,U.ZP)(),r=(0,U.XL)(),{checkoutType:i}=(0,O.Z)(),{startTiming:n}=(0,D.K3)(),l=(0,k.T)(),{restaurantLink:s,onGoToStore:u}=(0,Z.Z)(),{serverCart:h}=(0,g.iQ)(),p=(0,b.ZP)(void 0,!h.data?.isOwner),{isDraftOrderCreator:m,hasGroupOrder:f,isBillSplitOrder:C,isEditOrder:I,mealPlanUUID:y}=(0,c.Z)(),{isOnPremiseDeliveryOrder:v}=(0,S.Z)(),_=(0,z.TH)(),T="eats:checkout_button",$={checkoutType:i,isBillSplitOrder:C,isDraftOrderParticipant:!m,isGuestOrder:e.isGuestMode,isGroupOrder:f,isEditScheduledOrder:I,...y?{mealPlanUUID:y}:null};return 0===p?(0,M.tZ)(B.Z,{$as:o.rU,to:s,onClick:u,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):v?(0,M.tZ)(B.Z,{$as:o.rU,rel:"nofollow",to:e.authHref?{}:(0,a.vN_)(_,"premiseDeliveryInfo"),href:e.authHref,onClick:async t=>{e.disabled?t.preventDefault():e.onClick(t)},disabled:e.disabled,children:l("shared.go_to_checkout")}):(0,M.tZ)(B.Z,{$as:o.rU,rel:"nofollow",to:e.authHref?{}:e.checkoutUrl,href:e.authHref,"data-testid":"go-to-checkout-button",onClick:async i=>{e.disabled?i.preventDefault():(e.authHref?await r(T,$):(n(E.B.CHECKOUT_LOAD_COMPLETE_EVENT_NAME),n(E.B.CHECKOUT_LOAD_COMPLETE_WITH_CMP_EVENT_NAME),n(E.B.CHECKOUT_PAGE_RENDER_EVENT_NAME),t(T,$)),e.onClick(i))},disabled:e.disabled,children:l("shared.go_to_checkout")})};var w=r(26786),L=r(86695),G=r(1058),x=r(78365),A=r(23314);const H=(0,l.w1)(u.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}})),R=(0,l.w1)(w.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}}));function X(e,t,r){if("secondary_btn"!==e&&"tertiary_btn"!==e)return null;const i="secondary_btn"===e?H:R;return(0,M.tZ)(i,{$as:o.rU,to:t,disabled:r,children:(0,M.tZ)(d.v,{id:"checkout_as_guest"})})}const q=e=>{const t=(0,z.TH)(),r=(0,n.k6)(),{hideSidebarCart:l}=(0,s.Lb)(),{isDraftOrderCreator:u,isDraftOrderCartLocked:k,storeUuid:D,isDraftOrderParticipant:B,isBillSplitParticipant:U,currentUserGroupedItems:S}=(0,c.Z)(),{user:E}=(0,p.Z)(),w=(0,x.Z)(D),R=t=>{e.onNavigateToCheckout&&e.onNavigateToCheckout(t)},{isCartUnderMBS:q}=(0,m.f)(),{isCartDrafting:F}=(0,O.Z)(),{isEnabled:N,treatment:V}=(0,G.Z)(),{guestCheckoutEnabled:Y,emitGuestCheckoutEvent:K,guestCheckoutInGuestModeXP:W}=(0,C.Z)(),{selectedInstruction:Q}=(0,i.useContext)(f.X3),{data:j,isFetching:J,isLoading:ee}=function(e,t){const r=(0,v.Z)("getGuestCheckoutEligibilityV1"),i=(0,y.H)("getGuestCheckoutEligibilityV1",e);return(0,I.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getGuestCheckoutEligibilityV1",t[1])},...t?.queryObserverOptions})}({interactionType:Q?.interactionType},{queryObserverOptions:{enabled:Boolean(Y)}}),te=Y&&(J||ee),re=j?.isEligible,ie=(0,T.Z)(),ne=(0,$.Z)(),{isBundledOrder:oe}=(0,g.Dz)();(0,i.useEffect)((()=>{te||K(re)}),[K,te,re]);const ae=e.$disabled||q||te,{restaurantLink:le,onGoToStore:se}=(0,Z.Z)({storeUuid:D}),{serverCart:de}=(0,g.iQ)(),ce=(0,b.ZP)(void 0,!de.data?.isOwner),{isGroupOrder:ue,isScheduledOrder:he}=(0,_.Z)(D),pe=Boolean(re&&Y&&!ue&&!he),me=ie&&ne,Ze=(0,A.Z)();return E.data?.isLoggedIn||me?U&&S?.confirmed||B&&!U?(0,M.tZ)(L.zx,{isFullWidth:!0,onClick:()=>{r.push(le),se()},disabled:k,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):(0,M.BX)(M.HY,{children:[!B||U?(0,M.tZ)(P,{isGuestMode:pe,disabled:ae,onClick:async e=>{l(),R(e)},checkoutUrl:Ze}):null,u&&k?(0,M.tZ)(H,{$as:o.rU,to:(0,a.vN_)(t,"unlockGroupCart"),children:(0,M.tZ)(d.v,{id:"go.unlock_cart"})}):ce>0&&!oe&&(!F||ue)?(0,M.tZ)(H,{$as:o.rU,to:le,onClick:e=>{if(N&&"cart_animation"===V&&w)return e.preventDefault(),e.stopPropagation(),void l();se()},disabled:k,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):null]}):(0,M.BX)(M.HY,{children:[(0,M.tZ)(h.Z,{type:"login",redirectTo:(0,a.Zs0)(t),isGuestMode:pe,children:e=>{let{href:t,onClick:r}=e;return(0,M.tZ)(P,{isGuestMode:pe,disabled:ae,onClick:async e=>{R(e),r(e)},authHref:t,checkoutUrl:Ze})}}),pe?X(W,Ze,ae):null]})}},60147:(e,t,r)=>{r.d(t,{ZP:()=>h});var i=r("__fusion__1020"),n=r(38237),o=r(28397),a=r(20631),l=r(91931),s=r(8639);var d=r(33990);const c=(0,l.zo)("div",(e=>{let{$height:t,$width:r}=e;return{position:"relative",width:r||0,height:t||0}})),u=(0,l.zo)("div",(e=>{let{$theme:t,$backgroundColor:r,$color:i,$top:n,$bottom:o,$left:a,$right:l}=e;return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:n,right:l,left:a,bottom:o,width:t.sizing.scale700,borderRadius:t.borders.radiusFull,height:t.sizing.scale700,...r?{backgroundColor:t.colors[r]}:{},...i?{color:t.colors[i]}:{}}})),h=e=>{let{width:t,height:r,children:h,badge:p,position:m}=e;const[,Z]=(0,l.hQ)();return(0,d.BX)(c,{$width:t,$height:r,children:[h,(()=>{if("icon"!==p?.content?.type)return;const e=p?.content?.icon,{backgroundColor:t,color:r}=(e=>{let t="contentOnColor",r=null;return"standard"===e?.type?r=(0,s.Lq)(e?.standard):"custom"===e?.type&&(t=(0,s.Lq)(e?.custom?.contentColor),r="JOY_PRIMARY"===e?.custom?.backgroundColor?(0,s.Lq)("WARNING"):(0,s.Lq)(e?.custom?.backgroundColor)),{color:t,backgroundColor:r}})(p?.color),l=(e=>{const t={$bottom:"auto",$top:"auto",$left:"auto",$right:"auto"};switch(e){case"BOTTOM_LEFT":return{...t,$bottom:"0",$left:"0"};case"BOTTOM_RIGHT":return{...t,$bottom:"0",$right:"0"};case"TOP_LEFT":return{...t,$top:"0",$left:"0"};case"TOP_RIGHT":return{...t,$top:"0",$right:"0"};default:return{...t}}})(m);switch(e){case"CHECKMARK":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(a.Z,{})})});case"ARROW_CIRCULAR":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(o.Z,{})})});case"X":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(i.default,{size:"24"})})});default:return null}})()]})}},34267:(e,t,r)=>{r.d(t,{Z:()=>Z});var i=r(46933),n=r(86695),o=r("__fusion__887"),a=r(91631),l=r(72275),s=r(91931),d=r(73472),c=r(65014),u=r(95461),h=r(33990);const p=(0,s.zo)("div",(()=>({display:"flex",justifyContent:"right"}))),m=(0,s.zo)(n.zx,(e=>{let{$theme:t}=e;return{display:"flex",gap:t.sizing.scale300}})),Z=()=>{const{restaurantLink:e,onGoToStore:t}=(0,l.Z)(),r=(0,a.k6)(),{startTiming:n}=(0,d.K3)(),s=(0,u.Z)();return(0,h.tZ)(p,{children:(0,h.BX)(m,{onClick:()=>{n(c.B.CART_ADD_ITEM_CLICK,{shouldOverride:!0}),t(),r.push(e)},kind:"secondary",size:"compact",shape:"pill",...s?{overrides:{Root:{style:e=>{let{$theme:t}=e;return t.typography.LabelSmall}}}}:null,children:[(0,h.tZ)(o.default,{size:16}),(0,h.tZ)(i.v,{id:"shared.addItems"})]})})}},95345:(e,t,r)=>{r.d(t,{Z:()=>ye});var i=r(43193),n=r(46933),o=r(60849),a=r(91931),l=r(16397),s=r(27871),d=r(40606),c=r(40017),u=r(99863),h=r(4864),p=r(70247),m=r(33990);const Z=()=>{const{serverCart:e}=(0,p.iQ)(),t=(0,s.B0)("fareBreakdown"),r=(0,h.ZP)(void 0,!e.data?.isOwner),[,i]=(0,a.hQ)();return r?(0,m.tZ)(d.Z,{source:t,loaded:e=>{const t=e.charges?.find((e=>"Promotion"===e.title?.text));return t?(0,m.tZ)(u.jH,{charges:[t]}):null},error:()=>null,loading:()=>(0,m.tZ)(c.sM,{$width:i.sizing.scale1000})}):null};var g=r(47667),f=r(14016),b=r(31913);const C=()=>{const e=(0,g.Z)(),{serverCart:t}=(0,p.iQ)(),r=(0,s.B0)("subtotal"),i=(0,h.ZP)(void 0,!t.data?.isOwner),n=(0,f.T)();return i?(0,m.tZ)(d.Z,{source:r,loaded:t=>e&&t.formattedSubtotalAmount?(0,m.tZ)("span",{"aria-label":n("shared.subtotal"),children:(0,m.tZ)(b.ZP,{text:t.formattedSubtotalAmount})}):(0,m.tZ)("span",{"aria-label":n("shared.subtotal"),children:t.subtotal?.formattedValue}),error:()=>null,loading:()=>(0,m.tZ)(c.sM,{$width:"40px"})}):null};var I=r(50882),y=r(62091),v=r("__fusion__686"),_=r(64388),O=r(83960),T=r(72179),$=r(52246),k=r(72275),D=r(15840),B=r(34267),U=r(70313),z=r(47885),S=r(24688),E=r(13148),M=r(70940),P=r(84272),w=r(41063),L=r(94988),G=r(61304),x=r(33535),A=r(89400),H=r(87444);const R=function(e,t){t=t??[];const r=(0,H.Z)("alcohol_scheduling_mixed_cart"),{isBundledOrder:i,isGroupOrder:n,isEditOrder:o}=(0,p.Dz)(),a=t.length>0&&t.every((e=>t=>t.draftOrderUUID===e)(e));return Boolean(r&&!i&&!n&&!o&&a)};var X=r(5639),q=r(91793),F=r(73472),N=r(65014),V=r(33023),Y=r(96306),K=r(44997),W=r(79532),Q=r(2367),j=r(2677);const J=e=>{let{section:t,storeUuid:r}=e;const{getRequestData:n}=(0,j.H)(),o=(0,x.ZP)(),[a,l]=i.useState(null),{isLiveOrder:s}=(0,K.W)();if(!s||!t)return null;const d=t?.metadata?.header?.title,c={text:d,type:"text"},u=t?.items;if(!u||0===u?.length)return null;const h=(e,t,i,a,s)=>{const d=t?.cursory?.descriptor?.itemId?.cartId?.workflowId?.workflowUuid||"",c=t?.cursory?.descriptor?.itemId?.cartId?.cartUuid||"",u=t?.cursory?.descriptor?.itemId?.itemID?.catalogItemUUID||"",h=t?.cursory?.descriptor?.itemId?.shoppingCartItemUuid||"",p={cartUuid:c,isSpecialItemRequest:(0,Q.F)(t),itemUuid:u,storeUuid:r,workflowUuid:d,shoppingCartItemUuid:h};let m;if("CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&!e?.requestModifications)return l(t?.cursory?.descriptor?.itemId?.shoppingCartItemUuid??null),void o("eats:replacements_order_summary_more_options_tapped",p);if(e&&t){let d=null;e?.approveModifications?(d=e?.approveModifications?.proposalIDToApprove,o(i?"eats:replacements_item_details_approve_tapped":"eats:replacements_order_summary_approve_tapped",p),m="ITEM_FULFILLMENT_EVENT_TYPE_APPROVED_ITEM_MODIFICATIONS_PROPOSAL",o("eats:replacements_cart_item_fulfillment",{...p,itemFulfillmentEventType:m})):e?.requestRefund&&(d=e?.requestRefund?.proposalIDToReject,m="ITEM_FULFILLMENT_EVENT_TYPE_TERMINATED_ITEM_MODIFICATIONS_NEGOTIATION",o("eats:replacements_cart_item_fulfillment",{...p,itemFulfillmentEventType:m}));if(!n({type:e?.type,item:t,proposalUUID:d?.proposalUUID||"",...a?{substituteItem:a,quantity:s,storeUuid:r}:{}}))return;l(null)}};return(0,m.BX)("div",{children:[(0,m.tZ)(b.Dy,{element:c}),u?.map(((e,r)=>(0,m.tZ)("div",{children:(0,m.tZ)(Y.Z,{item:e,sharedData:t?.sharedData,handleActionButtons:h,setSelectedShoppingCartItemUuid:l})},r))),a&&u?(0,m.tZ)(W.Z,{items:u,shoppingCartItemUuid:a,onClose:()=>l(null),handleActionButtons:h,storeUuid:r}):null]})},ee=(0,a.zo)("section",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale1000} ${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale600}`,display:"flex",flexDirection:"column"}})),te=e=>{let{cartPageHeader:t}=e;const{isLiveOrder:r}=(0,K.W)();if(!r||!t)return null;const i=t?.title,n=t?.subtitle;return(0,m.BX)(ee,{children:[i?(0,m.tZ)(b.ZP,{text:i}):null,n?(0,m.tZ)(b.ZP,{text:n}):null]})},re=()=>{const{currentUserItemCount:e}=(0,O.Z)();return 1===e?(0,m.tZ)(n.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e}}):(0,m.tZ)(n.v,{id:"shared.numCartItems",data:{numCartItems:e}})},ie=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{borderTop:`1px solid ${t.colors.borderOpaque}`}})),ne=(0,a.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{marginLeft:`-${t.sizing.scale600}`,marginRight:`-${t.sizing.scale600}`,...r?{minHeight:t.sizing.scale100,background:t.colors.backgroundSecondary}:{minHeight:t.sizing.scale300,background:t.colors.backgroundTertiary}}})),oe=(0,a.zo)("div",(()=>({display:"flex",flexDirection:"row"}))),ae=(0,a.zo)($.rU,(e=>{let{$theme:t}=e;return{margin:`0 -${t.sizing.scale600}`,display:"flex",flexDirection:"row"}})),le=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600}})),se=(0,a.zo)(y.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,borderRadius:t.borders.radiusFull}})),de=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.sizing.scale0}})),ce=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,display:"flex",justifyContent:"center",alignItems:"center",color:t.colors.contentStateDisabled}})),ue=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{marginTop:`-${t.sizing.scale300}`}})),he=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale600}`}})),pe=e=>{let{quantitySelectType:t="picker",cartItems:r,cartItemsGroup:n,isSingleOrderWithCartItemsGroups:o=!1,isLiveOrder:a}=e;const{isCartDrafting:s}=(0,T.Z)(),{draftOrder:d,isBundledOrder:c}=(0,p.Dz)(),{restaurantLink:u,onGoToStore:h}=(0,k.Z)(),{store:Z}=(0,_.ZP)(d?.shoppingCart.storeUuid),g=(0,x.ZP)(),f=(c||o)&&void 0!==n,{isMobile:C}=(0,X.hU)(),y=Boolean(r),{stopTiming:O}=(0,F.K3)();return i.useEffect((()=>{y&&O(N.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldEmitTiming:!0})}),[y,O]),(0,m.BX)(m.HY,{children:[f?(0,m.BX)(m.HY,{children:[o?(0,m.tZ)(oe,{children:(0,m.BX)(de,{children:[(0,m.tZ)(b.ZP,{text:n.title}),(0,m.tZ)(b.ZP,{text:n.subtitle})]})}):(0,m.tZ)("div",{children:(0,m.BX)(ae,{to:u,onClick:e=>{u?h():(e.preventDefault(),g("eats:click_store_link",{source:"cart",label:"store_not_loaded"}))},children:[(0,m.tZ)(se,{src:n.iconUrl||""}),(0,m.BX)(de,{children:[(0,m.tZ)(b.ZP,{text:n.title}),(0,m.tZ)(b.ZP,{text:n.subtitle})]}),(0,m.tZ)(ce,{children:(0,m.tZ)(v.default,{size:24})})]})}),n.actionableBanners?(0,m.tZ)(le,{children:n.actionableBanners?.map(((e,t)=>(0,m.tZ)(D.C,{bannerAction:e},`saving-banner-${t}`)))}):null,(0,m.tZ)(S.IY,{})]}):null,(0,m.tZ)(l.Z,{cmpCartItems:r,quantitySelectType:t,fulfillmentIssueOptions:Z?.data?.fulfillmentIssueOptions,isCartDrafting:s}),!c&&s?(0,m.BX)(i.Fragment,{children:[C?(0,m.tZ)(B.Z,{}):null,(0,m.tZ)("div",{children:(0,m.tZ)(ne,{$isCartDrafting:!0})})]}):null,a?null:(0,m.tZ)(I.Z,{store:Z,instructionsPadding:0,isRegularOrder:!0}),s&&c?(0,m.tZ)("div",{children:(0,m.tZ)(ne,{$isCartDrafting:!0})}):s?null:n?(0,m.tZ)(ne,{}):(0,m.tZ)(ie,{})]})},me=(0,a.zo)("div",{display:"flex",alignItems:"center"}),Ze=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,flexGrow:1}})),ge=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary,paddingRight:t.sizing.scale100}})),fe=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),be=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between"}})),Ce=(0,a.zo)("div",(e=>{let{$isXlbFrictionBatch2CheckoutEnabled:t}=e;return{width:t?"unset":"100%"}})),Ie=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),ye=e=>{let{quantitySelectType:t="picker"}=e;const r=(0,x.ZP)(),a=i.useRef(!1),{inCartFeesDraft:l,isCartDrafting:d}=(0,T.Z)(),{isStorePrecheckoutBundlingEnabled:c}=(0,z.Z)(),h=(0,g.Z)(),{isBundledOrder:f,draftOrder:b}=(0,p.Dz)(),I=b?.storeUuid,{store:y}=(0,_.ZP)(I),v=(0,M.Z)(I||""),{belowMBSPercent:O,isTreated:$}=(0,U.q)(y?.data),{cartItems:k,upsellCatalogSections:D,subtotal:B,subTotalFareBreakdown:H,cartPageHeader:X,fulfilledItemDetails:F,unFulfilledItemDetails:N,inReviewItemDetails:Y,uneditableItemDetails:W,fareBreakdown:Q}=(0,s.ZP)(["cartItems","upsellCatalogSections","subtotal","subTotalFareBreakdown","cartPageHeader","fulfilledItemDetails","unFulfilledItemDetails","inReviewItemDetails","uneditableItemDetails","fareBreakdown"]).checkoutPayloads,j=y.data?.location?.locationType,{isLiveOrder:ee}=(0,K.W)(),{subtotalDisclaimers:ne}=B||{},{primaryBundledStoreUuid:oe,primaryDraftOrderUUID:ae}=(0,P.Z)(),le=(0,o.ip)({...w.v.eats_web_checkout_redesign_cart_promotions_enabled,defaultValue:!1}),se=(0,o.ip)({...L.r.eats_web_cart_display_total_promotion_enabled,defaultValue:!1}),de=R(b?.uuid,k?.cartItemsGroups);i.useEffect((()=>{Boolean(de&&k?.cartItemsGroups?.length&&k?.cartItemsGroups?.length>0)&&!a.current&&(r("eats:restricted_items_sectioned_cart_impression",{storeUuid:I||"",cartItemsGroupsCount:k?.cartItemsGroups?.length??0}),a.current=!0)}),[k?.cartItemsGroups,r,de,I]);const ce=(0,V.SF)(j),ye=()=>ee&&Q?.charges?(0,m.tZ)(he,{children:(0,m.tZ)(u.Z1,{charges:Q?.charges,fareType:"fareBreakdown"})}):H?(0,m.tZ)(q.Z,{}):l?(0,m.tZ)(u.A1,{storeLocationType:j}):(0,m.BX)(be,{children:[(0,m.BX)(Ce,{$isXlbFrictionBatch2CheckoutEnabled:h,children:[ce,$&&0===O?(0,m.tZ)(Ie,{children:(0,m.tZ)(n.v,{id:"cart.shared.savings.applied"})}):null]}),(0,m.tZ)(C,{})]});return(0,m.BX)(m.HY,{children:[(0,m.tZ)(te,{cartPageHeader:X}),c&&f?null:(0,m.BX)(m.HY,{children:[(0,m.tZ)(S.IY,{}),de||d?null:(0,m.BX)(m.HY,{children:[(0,m.BX)(me,{children:[(0,m.tZ)(Ze,{children:(0,m.tZ)(re,{})}),(0,m.tZ)(ge,{children:(0,m.BX)(ge,{children:[ce,":"]})}),(0,m.tZ)(fe,{children:(0,m.tZ)(C,{})})]}),(0,m.tZ)(ie,{})]})]}),(c||de)&&k?.cartItemsGroups?k?.cartItemsGroups?.map((e=>(0,m.tZ)(p.zW,{draftOrderUUID:e.draftOrderUUID,children:(0,m.tZ)(pe,{isSingleOrderWithCartItemsGroups:de,quantitySelectType:t,cartItems:e.cartItems??void 0,cartItemsGroup:e,isLiveOrder:ee})},e.draftOrderUUID))):(0,m.BX)(m.HY,{children:[(0,m.tZ)(J,{section:Y?.inReviewItemDetails,storeUuid:I}),(0,m.tZ)(pe,{isSingleOrderWithCartItemsGroups:de,quantitySelectType:t,cartItems:k?.cartItems??void 0}),(0,m.tZ)(J,{section:N?.unfulfilledItemDetails,storeUuid:I}),(0,m.tZ)(J,{section:W?.unEditableItemDetails,storeUuid:I}),(0,m.tZ)(J,{section:F?.foundItemDetails,storeUuid:I}),(0,m.tZ)(J,{section:F?.replacedItemDetails,storeUuid:I})]}),le&&y.data&&D?(0,m.tZ)(E.Z,{store:y.data,isGrocery:v,upsellCatalogSectionsPayload:D,primaryDraftOrderUUID:ae,primaryBundledStoreUUID:oe,surface:G.b.CART_UPSELL}):null,(0,m.tZ)(ye,{}),ne?(0,m.tZ)("div",{children:ne?.map(((e,t)=>(0,m.tZ)(A.Z,{badge:e},t)))}):null,se&&!H?(0,m.tZ)("div",{children:(0,m.tZ)(ue,{children:(0,m.tZ)(Z,{})})}):null]})}},15840:(e,t,r)=>{r.d(t,{Z:()=>E,C:()=>M});var i=r(43193),n=r(81231),o=r(91931),a=r(75161),l=r(91086),s=r(33259),d=r(34217),c=r(74820),u=r(70589),h=r(4909),p=r(62091),m=r(5639),Z=r(4661),g=r(52909),f=r(33990);const b=(0,o.zo)("ul",(e=>{let{$theme:t}=e;return{}})),C=(0,o.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",padding:`${t.sizing.scale600} 0`}})),I=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale700}})),y=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{}})),v=(0,o.zo)("div",(e=>{let{$theme:t,$isBold:r}=e;return Object.assign({marginBottom:t.sizing.scale100},r?{...t.typography.LabelMedium}:{...t.typography.ParagraphSmall})})),_=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),O=(0,o.zo)(p.Z,(e=>{let{$isDarkMode:t}=e;return{...t?{filter:"invert(100%)"}:{}}})),T=e=>e.bottomSheet?(0,f.tZ)(Z.P,{bottomSheet:e.bottomSheet,onClose:()=>e.onClose(),isOpen:e.isOpen,__invertIconColorOnDarkMode:!0}):null,$=e=>{const{themeId:t}=(0,g.aG)(),r="dark"===t;return(0,f.BX)(a.u_,{closeable:!0,isOpen:e.isOpen,onClose:()=>e.onClose(),children:[(0,f.tZ)(l.xB,{title:e.bottomSheet?.title?.text,leftButton:(0,f.tZ)(s.hQ,{onClick:()=>e.onClose()})}),(0,f.BX)(d.f,{$removeMarginTop:!0,children:[(0,f.tZ)(c.r,{children:e.bottomSheet?.title?.text}),(0,f.tZ)(b,{children:e.bottomSheet?.paragraphs?.map((e=>{let{title:t,iconUrl:i,isTitleBold:n,subtitle:o}=e;return(0,f.BX)(C,{children:[i?(0,f.tZ)(I,{children:(0,f.tZ)(O,{src:i,$isDarkMode:r})}):null,(0,f.BX)(y,{children:[(0,f.tZ)(v,{$isBold:n,children:t}),(0,f.tZ)(_,{children:o})]})]},t)}))})]}),(0,f.tZ)(u.m,{children:(0,f.tZ)(h.V,{onClick:()=>e.onClose(),children:e.bottomSheet?.buttonText})})]})},k=e=>{const{isMobile:t}=(0,m.hU)();return t?(0,f.tZ)(T,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet}):(0,f.tZ)($,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet})};var D=r(33535),B=r(70247),U=r(72179),z=r(27871),S=r(97627);const E=()=>{const{isCartDrafting:e}=(0,U.Z)(),{promoAndMembershipSavingBannerPayload:t}=(0,z.ZP)([...e?["promoAndMembershipSavingBannerPayload"]:[]]).checkoutPayloads;return t?.listContentViewModel?(0,f.tZ)("div",{children:(0,f.tZ)(S.Z,{viewModel:t.listContentViewModel})}):null},M=e=>{let{bannerAction:t}=e;const[r,o]=i.useState(!1),a=(0,D.ZP)(),{draftOrder:l}=(0,B.Dz)();return t.bannerModel?(0,f.BX)(f.HY,{children:[(0,f.tZ)(n.Z,{onClick:()=>{o(!0),a("eats:saving_banner_click",{storePreCheckoutBundling:{draftOrderUuid:String(l?.uuid),bundleGroupRole:String(l?.bundleGroupInfo?.bundleGroupRole)}})},viewModel:t.bannerModel,noMargin:!0}),(0,f.tZ)(k,{isOpen:r,actionMetadata:"openBottomSheetMetadata"===t.actionMetadata?.type?t.actionMetadata.openBottomSheetMetadata:void 0,onClose:()=>o(!1)})]}):null}},23314:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(62149),o=r(78989),a=r(47986),l=r(83960);const s=()=>{const e=(0,n.TH)(),{isOnPremiseDeliveryOrder:t}=(0,o.Z)(),{isDraftOrderCreator:r,isDraftOrderCartLocked:s}=(0,l.Z)();return(0,i.useMemo)((()=>t?(0,a.vN_)(e,"premiseDeliveryInfo"):r&&!s?(0,a.vN_)(e,"lockGroupCart"):(0,a.Zs0)(e,{nextUrl:(0,a.VS)(e)})),[s,r,t,e])}},78365:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(43193),n=r(62149),o=r(62104);const a=e=>{if(!(0,o.TP)(e))return;let t;try{t=(0,o.$I)(e)}catch(e){return}return t};function l(e){const t=(0,n.TH)();return i.useMemo((()=>{if(!e)return!1;const r=a(e);return t.pathname.includes(r)}),[t.pathname,e])}},32755:(e,t,r)=>{r.d(t,{ZP:()=>i});const i=r(60278).cS},70313:(e,t,r)=>{r.d(t,{q:()=>f});var i=r(14016),n=r(70247),o=r(74622),a=r(2237),l=r(62459);var s=r(27871),d=r(34626),c=r(1257),u=r(15649),h=r(49201),p=r(83960),m=r(32755),Z=r(70940),g=r(86990);const f=e=>{const{serverCart:t,isBundledOrder:r}=(0,n.Dz)(),{uuid:f="",cityId:b=0,eatsPassExclusionBadge:C,location:I}=e||{},{hasActiveUberOne:y}=(0,d.Z)(),v=(0,c.Z)((0,s.B0)("subtotal")),_=(0,s.B0)("cartItems"),O=(0,c.Z)(_),T=Number(v?.subtotal?.value?.amountE5)||0,$=(0,u.Z)(),k=!(0,Z.Z)(f),D=(0,i.T)(),B=(0,m.ZP)(),{isBillSplitOrder:U,isDraftOrderParticipant:z}=(0,p.Z)(),S=Object.values(O?.itemCharges||{}).some((e=>e.discountedAmount&&e?.originalAmount!==e?.discountedAmount)),E=Boolean(k&&(!B||"UNAVAILABLE_ITEMS"!==B?.type)&&T>0&&y&&C&&!S&&(!z||U)&&!r),M=function(e,t){const r=(0,l.Z)("getUberOneMbsV1"),i=(0,a.H)("getUberOneMbsV1",e);return(0,o.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getUberOneMbsV1",t[1])},...t?.queryObserverOptions})}({storeCityId:b,storeCountryCode:I?.country.toLowerCase()||"us"},{queryObserverOptions:{enabled:Boolean(E&&b)}})?.data,P=M&&T<M?(M-T)/M*100:0,w=M?(M-T)/1e3:0,L=(0,g.Z)({storeId:f,originalCurrencyCode:t.data?.currencyCode||"USD"});return{isTreated:Boolean(E&&M),belowMBSPercent:P,belowMBSMessage:M&&P>0?D("shared.cart.uberone.mbs.pending",{amount:(0,h.xG)($,L,w)}):""}}}}]);