(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[98101],{14210:(e,s,t)=>{"use strict";t.d(s,{Xd:()=>a,mP:()=>n,n4:()=>E});Object.freeze({UNKNOWN:"UNKNOWN",CART_ITEMS:"CART_ITEMS",FARE_BREAKDOWN:"FARE_BREAKDOWN",PROMOTION:"PROMOTION",UPFRONT_TIPPING:"UPFRONT_TIPPING",ETA:"ETA",PASS_BANNER:"PASS_BANNER",BASKET_SIZE_TRACKER:"BASKET_SIZE_TRACKER",DELIVERY_OPTIN_INFO:"DELIVERY_OPTIN_INFO",FULFILLMENT_PROMOTION_INFO:"FULFILLMENT_PROMOTION_INFO",CART_ITEM_PROMOTIONS:"CART_ITEM_PROMOTIONS",DISCLAIMERS:"DISCLAIMERS",SUBTOTAL:"SUBTOTAL",TOTAL:"TOTAL",ORDER_CONFIRMATIONS:"ORDER_CONFIRMATIONS",ADDRESS_NUDGE:"ADDRESS_NUDGE",COMPLEMENTS:"COMPLEMENTS",MEAL_VOUCHERS:"MEAL_VOUCHERS",UBER_CASH_REWARD:"UBER_CASH_REWARD",DINING_MODE:"DINING_MODE",GIFT_INFO:"GIFT_INFO",RENEW_BANNER:"RENEW_BANNER",CHECKOUT_FORM:"CHECKOUT_FORM",TAX_PROFILES:"TAX_PROFILES",LOCATION_INFO:"LOCATION_INFO",MESSAGE_BANNER:"MESSAGE_BANNER",BASKET_SIZE:"BASKET_SIZE",UPFRONT_TIPPING_AUTO_SUBMIT_GROUP_ORDER:"UPFRONT_TIPPING_AUTO_SUBMIT_GROUP_ORDER",FARE_BREAKDOWN_COLLAPSED:"FARE_BREAKDOWN_COLLAPSED",AUTONOMOUS_DELIVERY_MESSAGE:"AUTONOMOUS_DELIVERY_MESSAGE",MERCHANT_MEMBERSHIP:"MERCHANT_MEMBERSHIP",ORDER_SUMMARY:"ORDER_SUMMARY",ALL_DETAILS_HEADER:"ALL_DETAILS_HEADER",ALL_DETAILS_ACTIONS:"ALL_DETAILS_ACTIONS",RESTRICTED_ITEMS:"RESTRICTED_ITEMS",TIME_WINDOW_PICKER:"TIME_WINDOW_PICKER",VENUE_SECTION_PICKER:"VENUE_SECTION_PICKER",DINE_IN_METADATA:"DINE_IN_METADATA",ILLUSTRATION:"ILLUSTRATION",IN_REVIEW_ITEM_DETAILS_PAYLOAD:"IN_REVIEW_ITEM_DETAILS_PAYLOAD",FULFILLED_ITEM_DETAILS_PAYLOAD:"FULFILLED_ITEM_DETAILS_PAYLOAD",UNFULFILLED_ITEM_DETAILS_PAYLOAD:"UNFULFILLED_ITEM_DETAILS_PAYLOAD",UPSELL_CATALOG_SECTIONS:"UPSELL_CATALOG_SECTIONS",CART_BASKET_SIZE_TRACKER:"CART_BASKET_SIZE_TRACKER",CANONICAL_PRODUCT_STORE_PICKER:"CANONICAL_PRODUCT_STORE_PICKER",MEMBERSHIP_RENEWAL_BANNER:"MEMBERSHIP_RENEWAL_BANNER",CART_PAGE_HEADER:"CART_PAGE_HEADER",SPLIT_PAYMENT_MESSAGE_BANNER:"SPLIT_PAYMENT_MESSAGE_BANNER",PAYMENT_ORDER_ELIGIBILITY_BREAKDOWN:"PAYMENT_ORDER_ELIGIBILITY_BREAKDOWN",PAYMENT_PROFILES_ELIGIBILITY_PAYLOAD:"PAYMENT_PROFILES_ELIGIBILITY_PAYLOAD",STORE_SWITCHER_ACTIONABLE_BANNER_PAYLOAD:"STORE_SWITCHER_ACTIONABLE_BANNER_PAYLOAD",PASS_BANNER_ON_CART:"PASS_BANNER_ON_CART",PROMO_MEMBERSHIP_SAVING_BANNER:"PROMO_MEMBERSHIP_SAVING_BANNER",PROMO_MEMBERSHIP_SAVING_BANNER_CHECKOUT:"PROMO_MEMBERSHIP_SAVING_BANNER_CHECKOUT",UNEDITABLE_ITEM_DETAILS_PAYLOAD:"UNEDITABLE_ITEM_DETAILS_PAYLOAD",PAYMENT_BAR_PAYLOAD:"PAYMENT_BAR_PAYLOAD",SUBTOTAL_FARE_BREAKDOWN:"SUBTOTAL_FARE_BREAKDOWN",CONTACT_INFO_PAYLOAD:"CONTACT_INFO_PAYLOAD",NEUTRAL_ZONE_PAYLOAD:"NEUTRAL_ZONE_PAYLOAD"}),Object.freeze({UNKNOWN:"UNKNOWN",CART:"CART",CHECKOUT:"CHECKOUT",GIFT_REDEMPTION:"GIFT_REDEMPTION"}),Object.freeze({UNKNOWN:"UNKNOWN",CART_ITEMS_WARNINGS:"CART_ITEMS_WARNINGS",CART_ITEMS:"CART_ITEMS",CART_ITEMS_PROMOS:"CART_ITEMS_PROMOS",CART_ITEMS_HEADER_SECONDARY:"CART_ITEMS_HEADER_SECONDARY",CART_ITEMS_WARNINGS_SECONDARY:"CART_ITEMS_WARNINGS_SECONDARY",CART_ITEMS_BANNER_SECONDARY:"CART_ITEMS_BANNER_SECONDARY",CART_ITEMS_SECONDARY:"CART_ITEMS_SECONDARY",CART_ITEMS_HEADER:"CART_ITEMS_HEADER",MEMBERSHIP_BASKET_SIZE_TRACKER:"MEMBERSHIP_BASKET_SIZE_TRACKER",MEMBERSHIP_RENEWAL_BANNER:"MEMBERSHIP_RENEWAL_BANNER",MEMBERSHIP_ONE_TAP_UPSELL_BANNER:"MEMBERSHIP_ONE_TAP_UPSELL_BANNER",LOYAL_MEMBERSHIP:"LOYAL_MEMBERSHIP",PASS_BANNER:"PASS_BANNER",AUTO_RENEW_PASS_BANNER:"AUTO_RENEW_PASS_BANNER",EDIT_REPEAT_ORDER_BANNER:"EDIT_REPEAT_ORDER_BANNER",DINING_MODALITY_TOGGLE:"DINING_MODALITY_TOGGLE",ORDER_INSTRUCTIONS:"ORDER_INSTRUCTIONS",ORDER_INSTRUCTIONS_SECONDARY:"ORDER_INSTRUCTIONS_SECONDARY",SUMMARY_SECTION_HEADER:"SUMMARY_SECTION_HEADER",TIME_INFO_HEADER:"TIME_INFO_HEADER",TIME_INFO:"TIME_INFO",TIME_INFO_FOOTER:"TIME_INFO_FOOTER",PAGE_HEADER:"PAGE_HEADER",SUBTOTAL_FARE_BREAKDOWN:"SUBTOTAL_FARE_BREAKDOWN",CHARGES:"CHARGES",CHARGES_COMPACT:"CHARGES_COMPACT",MEAL_VOUCHERS:"MEAL_VOUCHERS",MEAL_VOUCHERS_SUGGESTION:"MEAL_VOUCHERS_SUGGESTION",UPSELL_PROMOTIONS_BUNDLED_ORDER:"UPSELL_PROMOTIONS_BUNDLED_ORDER",UPSELL_PROMOTIONS:"UPSELL_PROMOTIONS",RICH_INLINE_DISCLAIMERS:"RICH_INLINE_DISCLAIMERS",BASIC_INLINE_DISCLAIMERS:"BASIC_INLINE_DISCLAIMERS",DELIVERY_OPT_IN_INFO_DISCLAIMER:"DELIVERY_OPT_IN_INFO_DISCLAIMER",STORE_SWITCHER_ACTIONABLE_BANNER:"STORE_SWITCHER_ACTIONABLE_BANNER",CANONICAL_PRODUCT_STORE_PICKER:"CANONICAL_PRODUCT_STORE_PICKER",TOO_FAR_AWAY_BANNER:"TOO_FAR_AWAY_BANNER",FLEX_CARD_BANNER:"FLEX_CARD_BANNER",MESSAGE_BANNERS:"MESSAGE_BANNERS",GIFT:"GIFT",PROMO_SELECTOR:"PROMO_SELECTOR",ILLUSTRATION:"ILLUSTRATION",LOCATION_INFO:"LOCATION_INFO",AUTONOMOUS_DELIVERY_INLINE_MESSAGE:"AUTONOMOUS_DELIVERY_INLINE_MESSAGE",BASKET_SIZE_TRACKERS:"BASKET_SIZE_TRACKERS",PAYMENT_SELECTOR:"PAYMENT_SELECTOR",REQUEST_INVOICE:"REQUEST_INVOICE",FORM_CHECKBOX:"FORM_CHECKBOX",EATER_CONSENT:"EATER_CONSENT",CONTACT_INFO:"CONTACT_INFO",DIVIDER:"DIVIDER",DIVIDER_SECONDARY:"DIVIDER_SECONDARY",PLANNED_PAYMENTS:"PLANNED_PAYMENTS",UPFRONT_TIPPING:"UPFRONT_TIPPING"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"});const n=Object.freeze({UNKNOWN:"UNKNOWN",UNAVAILABLE:"UNAVAILABLE"}),a=(Object.freeze({UNKNOWN:"UNKNOWN",REPLACE:"REPLACE",REMOVE:"REMOVE",SCHEDULE:"SCHEDULE"}),Object.freeze({UNKNOWN:"UNKNOWN",CUSTOMIZATION:"CUSTOMIZATION",ALLERGY_REQUEST:"ALLERGY_REQUEST",SPECIAL_INSTRUCTION:"SPECIAL_INSTRUCTION",REPLACEMENT_PREFERENCE:"REPLACEMENT_PREFERENCE",QUANTITY_INFO:"QUANTITY_INFO"}),Object.freeze({DEFAULT:"DEFAULT",BASE_COMPONENTS:"BASE_COMPONENTS",GRATITUDE:"GRATITUDE",INLINE:"INLINE"}),Object.freeze({UNKNOWN:"UNKNOWN",NONE_AVAILABLE:"NONE_AVAILABLE",AVAILABLE:"AVAILABLE",SELECTED_NOT_APPLIED:"SELECTED_NOT_APPLIED",SELECTED_AND_APPLIED:"SELECTED_AND_APPLIED",DISABLED:"DISABLED"}),Object.freeze({UNKNOWN:"UNKNOWN",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"}),Object.freeze({UNKNOWN:"UNKNOWN",POSITIVE:"POSITIVE",NEGATIVE:"NEGATIVE",MEMBERSHIP:"MEMBERSHIP"}),Object.freeze({UNKNOWN:"UNKNOWN",ICON:"ICON",LOTTIE:"LOTTIE",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({UNKNOWN:"UNKNOWN",NO_RUSH_DELIVERY:"NO_RUSH_DELIVERY",STANDARD_DELIVERY:"STANDARD_DELIVERY",PREMIUM_DELIVERY:"PREMIUM_DELIVERY",ETD_SURGE_DELIVERY:"ETD_SURGE_DELIVERY",SCHEDULE_DELIVERY:"SCHEDULE_DELIVERY",SAVER_DELIVERY:"SAVER_DELIVERY",BANDWAGON_DELIVERY:"BANDWAGON_DELIVERY",SCHEDULE_AND_SAVE_DELIVERY:"SCHEDULE_AND_SAVE_DELIVERY"}),Object.freeze({UNKNOWN:"UNKNOWN",STACK:"STACK",CAROUSEL_LIST:"CAROUSEL_LIST",CAROUSEL_GRID:"CAROUSEL_GRID"}),Object.freeze({UNKNOWN:"UNKNOWN",PERSONAL:"PERSONAL",BUSINESS:"BUSINESS"}),Object.freeze({UNKNOWN:"UNKNOWN",DISABLED:"DISABLED",GET_CONTEXT:"GET_CONTEXT"}),Object.freeze({UNKNOWN:"UNKNOWN",LIST:"LIST"}),Object.freeze({UNKNOWN:"UNKNOWN",DEEPLINK:"DEEPLINK"}),Object.freeze({UNKNOWN:"UNKNOWN",REGULAR:"REGULAR",VENUE_TO_SEAT_DELIVERY:"VENUE_TO_SEAT_DELIVERY"}),Object.freeze({INVALID:"INVALID",MAX_AMOUNT:"MAX_AMOUNT"})),E=(Object.freeze({UNKNOWN:"UNKNOWN",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_CART_ITEM:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_CART_ITEM",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_DELIVERY_FEE:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_DELIVERY_FEE",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_SERVICE_FEE:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_SERVICE_FEE",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_TIPS:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_TIPS",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_TAX:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_TAX",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_OTHER_FEE:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_OTHER_FEE",ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_PROMOTION:"ELIGIBILITY_BREAKDOWN_LINE_ITEM_TYPE_PROMOTION"}),Object.freeze({UNKNOWN:"UNKNOWN",COVERED:"COVERED",NOT_COVERED:"NOT_COVERED"}),Object.freeze({UNKNOWN:"UNKNOWN",REMOVE_ITEMS:"REMOVE_ITEMS",CANCEL:"CANCEL"}),Object.freeze({INVALID:"INVALID",PROFILE_TOGGLE:"PROFILE_TOGGLE",PAYMENT_BAR:"PAYMENT_BAR"}));Object.freeze({INVALID:"INVALID",PROFILE_CORRECTION_NUDGE:"PROFILE_CORRECTION_NUDGE"}),Object.freeze({INVALID:"INVALID",ML_PREDICTION:"ML_PREDICTION",CORP_CARD_ON_PERSONAL_PROFILE:"CORP_CARD_ON_PERSONAL_PROFILE",UNMANAGED_PROFILE_SELECTED:"UNMANAGED_PROFILE_SELECTED",MANAGED_PROFILE_LINKING:"MANAGED_PROFILE_LINKING",MANAGED_PROFILE_ELIGIBLE_POLICY:"MANAGED_PROFILE_ELIGIBLE_POLICY"}),Object.freeze({INVALID:"INVALID",AUTO_SWITCH:"AUTO_SWITCH"}),Object.freeze({INVALID:"INVALID",PERSONAL:"PERSONAL",BUSINESS:"BUSINESS"}),Object.freeze({SAVING_BANNER_TYPE_UNKNOWN:"SAVING_BANNER_TYPE_UNKNOWN",SAVING_BANNER_TYPE_PROMOS:"SAVING_BANNER_TYPE_PROMOS",SAVING_BANNER_TYPE_UBER_ONE:"SAVING_BANNER_TYPE_UBER_ONE",SAVING_BANNER_TYPE_PROMOS_AND_UBER_ONE:"SAVING_BANNER_TYPE_PROMOS_AND_UBER_ONE",SAVING_BANNER_TYPE_MEAL_STIPENDS:"SAVING_BANNER_TYPE_MEAL_STIPENDS",SAVING_BANNER_TYPE_VOUCHERS:"SAVING_BANNER_TYPE_VOUCHERS"}),Object.freeze({UNKNOWN:"UNKNOWN",UBER_ONE:"UBER_ONE",THIRD_PARTY_ORCHID:"THIRD_PARTY_ORCHID"}),Object.freeze({UNKNOWN:"UNKNOWN",NO_MEMBER:"NO_MEMBER",MEMBER_BELOW_THRESHOLD:"MEMBER_BELOW_THRESHOLD",MEMBER_ABOVE_THRESHOLD:"MEMBER_ABOVE_THRESHOLD"}),Object.freeze({UNKNOWN:"UNKNOWN",NOT_AVAILABLE:"NOT_AVAILABLE",AVAILABLE_BELOW_THRESHOLD:"AVAILABLE_BELOW_THRESHOLD",APPLIED_AND_AVAILABLE_BELOW_THRESHOLD:"APPLIED_AND_AVAILABLE_BELOW_THRESHOLD",APPLIED:"APPLIED"})},17759:(e,s,t)=>{"use strict";t.d(s,{DR:()=>E,JK:()=>a,OU:()=>n,il:()=>i});Object.freeze({Personal:"Personal",Business:"Business",ManagedBusiness:"ManagedBusiness",ManagedFamily:"ManagedFamily",Commuter:"Commuter"}),Object.freeze({UNKNOWN:"UNKNOWN",PERSONAL:"PERSONAL",BUSINESS:"BUSINESS",MANAGED_BUSINESS:"MANAGED_BUSINESS",MANAGED_FAMILY:"MANAGED_FAMILY",COMMUTER:"COMMUTER",TRANSIT:"TRANSIT"}),Object.freeze({Centralized:"Centralized",Decentralized:"Decentralized"}),Object.freeze({Weekly:"Weekly",Monthly:"Monthly"}),Object.freeze({UNKNOWN:"UNKNOWN",DELEGATOR:"DELEGATOR",DELEGATEE:"DELEGATEE"}),Object.freeze({house:"house",basketball:"basketball",flower:"flower",lightBulb:"lightBulb",lightningBolt:"lightningBolt",musicNote:"musicNote",rocketship:"rocketship",star:"star",briefcase:"briefcase"}),Object.freeze({EXPENSIFY:"EXPENSIFY",CONCUR:"CONCUR",CERTIFY:"CERTIFY",CHROME_RIVER:"CHROME_RIVER",SERKO_ZENO:"SERKO_ZENO",RYDOO:"RYDOO",HAPPAY:"HAPPAY",ZOHO_EXPENSE:"ZOHO_EXPENSE",EXPENSYA:"EXPENSYA",FRAEDOM:"FRAEDOM",UNUSED_2:"UNUSED_2",UNUSED_3:"UNUSED_3",UNUSED_4:"UNUSED_4",UNUSED_5:"UNUSED_5",UNUSED_6:"UNUSED_6",UNUSED_7:"UNUSED_7",UNUSED_8:"UNUSED_8",UNUSED_9:"UNUSED_9",UNRECOGNIZED:"UNRECOGNIZED"});const n="pending",a="active",E="unsupported",i="deactivated";Object.freeze({NOT_REQUIRED:"NOT_REQUIRED",REQUIRED:"REQUIRED"}),Object.freeze({NOT_APPLICABLE:"NOT_APPLICABLE",ACCEPTED:"ACCEPTED",NOT_ACCEPTED:"NOT_ACCEPTED"}),Object.freeze({TRAVEL:"TRAVEL",CENTRAL:"CENTRAL",EATS:"EATS",VOUCHERS:"VOUCHERS",PLACEHOLDER_5:"PLACEHOLDER_5",PLACEHOLDER_6:"PLACEHOLDER_6",PLACEHOLDER_7:"PLACEHOLDER_7",PLACEHOLDER_8:"PLACEHOLDER_8",PLACEHOLDER_9:"PLACEHOLDER_9"}),Object.freeze({EXPENSE_PROVIDER:"EXPENSE_PROVIDER",IN_APP_TERMS_ACCEPTED:"IN_APP_TERMS_ACCEPTED"}),Object.freeze({EXPENSE_PROVIDER:"EXPENSE_PROVIDER",IN_APP_TERMS_ACCEPTED:"IN_APP_TERMS_ACCEPTED",UNMANAGED:"UNMANAGED"}),Object.freeze({RIDER:"RIDER",EATS:"EATS",UNUSED_1:"UNUSED_1",UNUSED_2:"UNUSED_2",UNUSED_3:"UNUSED_3",UNUSED_4:"UNUSED_4",UNUSED_5:"UNUSED_5",UNUSED_6:"UNUSED_6",UNUSED_7:"UNUSED_7",UNUSED_8:"UNUSED_8",UNUSED_9:"UNUSED_9",UNUSED_10:"UNUSED_10",UNUSED_11:"UNUSED_11",UNUSED_12:"UNUSED_12",UNUSED_13:"UNUSED_13",UNUSED_14:"UNUSED_14",UNUSED_15:"UNUSED_15",UNUSED_16:"UNUSED_16",UNUSED_17:"UNUSED_17",UNUSED_18:"UNUSED_18",UNUSED_19:"UNUSED_19",UNUSED_20:"UNUSED_20"}),Object.freeze({DELEGATEE_NOT_FOUND:"DELEGATEE_NOT_FOUND"}),Object.freeze({PAYMENT_PROFILE_NOT_FOUND:"PAYMENT_PROFILE_NOT_FOUND"}),Object.freeze({UNSUPPORTED_PAYMENT_PROFILE:"UNSUPPORTED_PAYMENT_PROFILE"})},86979:(e,s,t)=>{"use strict";t.d(s,{rW:()=>m,eY:()=>B,og:()=>f,Eb:()=>C,dR:()=>p,FY:()=>M,oz:()=>L,Nj:()=>A,jm:()=>y,b_:()=>R,Qo:()=>U,b6:()=>T,XC:()=>S,DC:()=>D});var n=t(46933),a=t(88631),E=t(99195),i=t(49201),r=t(47986),l=t(83401),o=t(91931),u=t(14016),d=t(33990);const _=(0,o.zo)("span",(e=>{let{$color:s,$theme:t}=e;return{color:{CONTENT_POSITIVE:t.colors.contentPositive,DISABLED:t.colors.contentStateDisabled,SECONDARY:t.colors.contentSecondary,CONTENT_MEMBERSHIP:t.colors.membership}[s]}})),c=e=>{let{displayValue:s,paymentProfileTitle:t,useCredits:n,hasBusinessProfiles:a}=e;const E=(0,u.T)(),i=s?.financialAccountTexts?.defaultText||"";let r=t?.text;return t?.displayable?(0,d.BX)(d.HY,{children:[a?(0,d.BX)(d.HY,{children:[E("components.payments_cell.personal")," - "]}):null,t?.displayable]}):(n&&(r=i?`${i} + ${r}`:r),a&&(r=`${E("components.payments_cell.personal")} - ${r}`),(0,d.tZ)("span",{children:r}))},N=e=>{const s=e?.financialAccountTexts?.detailTextV2,t=s?.richTextElements?.[0],n=t?.text?.text?.text,a=t?.text?.text?.color;return{color:a,text:n}},P=e=>{let{displayValue:s}=e;const{color:t,text:n}=N(s);return(0,d.tZ)(_,{$color:t,children:n})};function O(e){return!e||e.type===a.Hu.Personal}function I(e){return e.map((e=>e.amountString)).join(", ")}function A(e){if(!e)return null;const s={text:"",displayable:null},t=(e.tokenType||"").toLowerCase();switch(t){case"uber_test":case"derivative":case"paytm":s.text=e.cardType||t||"";break;case"paypal":s.displayable=(0,d.tZ)(n.v,{id:"shared.paypal"});break;case"cash":s.displayable=(0,d.tZ)(n.v,{id:"shared.cash"});break;case"stored_value":s.displayable=(0,d.tZ)(n.v,{id:"shared.uber_cash"});break;case"upi":s.displayable=(0,d.tZ)(n.v,{id:"shared.upi"});break;case"paypay":s.displayable=(0,d.tZ)(n.v,{id:"shared.paypay"});break;case"venmo":s.displayable=(0,d.tZ)(n.v,{id:"shared.venmo"});break;case"braintree":case"zaakpay":case"bancontact":s.text=function(e){const{cardType:s,cardNumber:t,displayable:n}=e;return n?.displayName?n.displayName:`${s?`${s} - `:"•••• "}${t||""}`}(e);break;case"apple_pay_display":s.text="Apple Pay";break;case"ebt_snap":s.text=e.displayable?.displayName||e.accountName||"";break;case"UBER_PAY":s.text=e.tokenDisplayName||e.displayable?.displayName||e.accountName||"";break;default:s.text=e.accountName||""}return s}const p=(e,s,t)=>{if(!e)return null;const a=(0,d.tZ)("div",{children:e?.name});if(!e?.components?.periodicCapComponent&&!e?.components?.perTripCapComponent)return{displayable:t?(0,d.tZ)("div",{children:e.description}):(0,d.tZ)(n.v,{id:"checkout.business_payments_balance.billed_to_company"}),text:""};if(e.components?.periodicCapComponent){const{amount:t,usage:E,currencyCode:r}=e.validationExtra?.periodicCapBalance||{},l="number"==typeof t&&"number"==typeof E?(0,i.xG)(s,r||"",100*(t-E)):null;if(l)return{displayable:{DAILY:(0,d.tZ)(n.v,{id:"checkout.business_payments_balance.daily",data:{balance:l}}),WEEKLY:(0,d.tZ)(n.v,{id:"checkout.business_payments_balance.weekly",data:{balance:l}}),MONTHLY:(0,d.tZ)(n.v,{id:"checkout.business_payments_balance.monthly",data:{balance:l}}),DEFAULT:a}[e.components?.periodicCapComponent?.period||"DEFAULT"],text:""}}else{const{amount:t,currencyCode:a}=e.validationExtra?.perTripCapBalance||{},E="number"!=typeof t?"":(0,i.xG)(s,a||"",100*t);if(E)return{displayable:(0,d.tZ)(n.v,{id:"checkout.business_payments_balance.per_order",data:{balance:E}}),text:""}}return{displayable:a,text:""}};function R(e){return"ManagedBusiness"===e?.type&&e?.managedBusinessProfileAttributes?.theme?.logos?.Large?.url||""}function S(e,s){return e.find((e=>e.type===a.Hu.Personal&&e.defaultPaymentProfileUuid===s))}function T(e,s){const t=e.find((e=>e.uuid===s));return O(t)?null:t}function U(e){return e&&"Personal"!==e.type?"business":"personal"}function C(e){let{profile:s,paymentProfile:t,useCredits:E,paymentProfiles:i,creditBalances:r,selectedBusinessPolicy:o,selectedBusinessExpenseCode:u,selectedBusinessExpenseMemo:_,hasBusinessProfiles:R,errorActions:S,showCheckoutErrors:T,secondaryPaymentSelectionRequired:U,localeCode:C,shouldShowSecondaryPaymentSelection:L,isOrgManagedUser:y,auxiliaryPaymentProfile:D,hideUberCash:f}=e,B={text:"",displayable:null},m=!1;const M={payment:[],mealProgram:null,expenseCode:null},b={message:{text:"",displayable:null},action:null},h=A(t),{title:g,description:x,shouldRenderBalanceBreakdown:Y,hasUberCashTitle:V}=(e=>{let{paymentProfile:s,hasBusinessProfiles:t,creditBalances:n,useCredits:a}=e;const E=n?.find((e=>Boolean(e.balancesV2))),i=E?.balancesV2;if(!i||!s)return{shouldRenderBalanceBreakdown:!1,hasUberCashTitle:!1,description:{displayable:null,text:""},title:{displayable:null,text:""}};const r=A(s),l=s?.uuid?i?.displayOverrides?.[s?.uuid]:{},o=Boolean(l)&&a?l:i?.defaultDisplay,{text:u}=N(o),_=a&&Boolean(i)&&Boolean(u);if(a&&!_){const e=i?.defaultDisplay?.uberBalanceInfo?.defaultText||"";return{shouldRenderBalanceBreakdown:!1,hasUberCashTitle:Boolean(e),description:{displayable:null,text:""},title:{displayable:null,text:e}}}return{title:{displayable:(0,d.tZ)(c,{displayValue:o,paymentProfileTitle:r,useCredits:a,hasBusinessProfiles:t}),text:""},description:{displayable:(0,d.tZ)(P,{displayValue:o}),text:""},shouldRenderBalanceBreakdown:_,hasUberCashTitle:!1}})({paymentProfile:t,creditBalances:r,useCredits:E,hasBusinessProfiles:R}),H=V?g:{text:"",displayable:(0,d.tZ)(n.v,{id:"shared.uber_cash_with_balance",data:{balance:I(r)}})};if(R)if(t&&(0,l.H)(t)){B.displayable=(0,d.tZ)(n.v,{id:"components.payments_cell.personal"});const e=A(D);e&&(M.payment.push(e),h&&M.payment.push({displayable:(0,d.tZ)(n.v,{id:"shared.add_secondary_payment_method"}),text:""}))}else if(!y&&O(s)){if(B.displayable=(0,d.tZ)(n.v,{id:"components.payments_cell.personal"}),D){const e=A(D);e&&(M.payment.push(e),h&&M.payment.push(h))}else Y?(B=g,M.payment.push(x),m=!0):(E&&M.payment.push(H),h&&M.payment.push(h));t||(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.addPaymentMethod"}),b.action=S.getPaymentSelectAction())}else{if(B.text=s?.name||"",B.displayable=(0,d.tZ)(n.v,{id:"components.payments_cell.business"}),s?.isMealProgramRequired){if(o?.isExpenseMemoRequired&&T&&(_||(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.add_expense_memo"}),b.action=S.getAddExpenseMemoAction(s?.uuid||"",o?.uuid||""))),o?.isExpenseCodeRequired&&T&&(u?.expenseCode||(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.add_expense_code"}),b.action=S.getAddExpenseCodeAction(s?.uuid||"",o?.uuid||""))),L){const e=A(i.find((e=>e.uuid===s?.secondaryPaymentProfileUuid)));e?M.payment.push(e):T&&U&&(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.add_secondary_payment_method"}),b.action=S.getAddSecondaryPaymentMethodAction(s?.uuid||"",o?.uuid||""))}if(o){if(s.managedBusinessProfileAttributes?.billingMode!==a.vO.Decentralized||o.components?.periodicCapComponent||o.components?.perTripCapComponent){const e=p(o,C,!1);e&&(M.mealProgram=e)}}else b.message.displayable=(0,d.tZ)(n.v,{id:"shared.select_meal_program"}),b.action=S.getSelectMealProgramAction(s?.uuid||"")}(function(e,s){return s&&(0,l.H)(s)||e?.type===a.Hu.Personal||e?.type===a.Hu.Business||e?.type===a.Hu.ManagedBusiness&&e?.managedBusinessProfileAttributes?.billingMode===a.vO.Decentralized})(s,t)&&(h?M.payment.push(h):(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.addPaymentMethod"}),b.action=S.getAddPaymentMethodAction(s?.uuid||"")))}else D?(B={text:D?.displayable?.displayName||D?.tokenDisplayName||"",displayable:null},L?(b.message.displayable=(0,d.tZ)(n.v,{id:"shared.add_secondary_payment_method"}),b.action=S.getPaymentSelectAction()):h&&M.payment.push(h)):E&&Y?(B=g,M.payment.push(x),m=!0):E&&!f?(B=H,h&&M.payment.push(h)):B=h||B;return{primary:B,secondary:M,error:b,hidePlusSign:m}}function L(e){const s=(e?.tokenType||"unknown").toLowerCase();switch(s){case"google":case"google_pay":return E.Z.google;case"paypal":case"uber_test":case"derivative":case"paytm":case"braintree":case"zaakpay":return function(e){const s=(e||"unknown").toLowerCase();switch(s){case"american_express":case"amex":return E.Z["american express"];default:return E.Z[s]||E.Z.unknown}}(e?.cardType||s);case"stored_value":return E.Z.uber;case"apple_pay_display":return E.Z.applepay;default:return E.Z[s]||E.Z.unknown}}function y(e){const s=e.find((e=>"Personal"===e.type));return{profileUuid:s?.uuid||"",paymentProfileUuid:s?.defaultPaymentProfileUuid||""}}function D(e,s){const t=s.find((s=>s.uuid===e&&s.type!==a.Hu.ManagedFamily));return Boolean(t)}function f(e){const s=e.find((e=>"Personal"!==e.type&&e.type!==a.Hu.ManagedFamily));return{profileUuid:s?.uuid||"",paymentProfileUuid:s?.defaultPaymentProfileUuid||""}}function B(e,s,t){return{getPaymentSelectAction:function(){return()=>e.push((0,r.vN_)(s,"paymentsSelectProfile"))},getAddPaymentMethodAction:function(t){return()=>e.push((0,r.vN_)(s,"paymentsEdit"))},getSelectMealProgramAction:function(s){return()=>e.push(t(s))},getAddExpenseCodeAction:function(t,n){const a=(0,r.vN_)(s,"businessSelectExpenseCode",`${t}|${n}`);return()=>e.push(a)},getAddExpenseMemoAction:function(t,n){const a=(0,r.vN_)(s,"businessEnterExpenseMemo",`${t}|${n}`);return()=>e.push(a)},getAddSecondaryPaymentMethodAction:function(t,n){const a=(0,r.vN_)(s,"paymentsSelectSecondaryPaymentProfile",`${t}|${n}`);return()=>e.push(a)}}}const m=Object.freeze({mealPlan:"meal_plan",personalBusiness:"personal_business",personalOnly:"personal_only",businessOnly:"business_only",unknown:"unknown"}),M=(e,s,t)=>t?m.businessOnly:e&&s===m.mealPlan?m.mealPlan:e?m.personalBusiness:e?m.unknown:m.personalOnly},99195:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var n=t(71110);const a={alipay:(0,n.pZ)(t(84648)),"american express":(0,n.pZ)(t(31153)),applepay:(0,n.pZ)(t(44001)),cash:(0,n.pZ)(t(4354)),cc:(0,n.pZ)(t(70925)),diners:(0,n.pZ)(t(18646)),discover:(0,n.pZ)(t(90465)),google:(0,n.pZ)(t(84174)),india:(0,n.pZ)(t(4354)),jcb:(0,n.pZ)(t(42643)),mastercard:(0,n.pZ)(t(36391)),paypal:(0,n.pZ)(t(34506)),paytm:(0,n.pZ)(t(8797)),uber:(0,n.pZ)(t(90187)),unionpay:(0,n.pZ)(t(20072)),unknown:(0,n.pZ)(t(22181)),ubertest:(0,n.pZ)(t(90187)),venmo:(0,n.pZ)(t(8521)),visa:(0,n.pZ)(t(66987)),upi:(0,n.pZ)(t(65760)),paypay:(0,n.pZ)(t(85931)),derivative:(0,n.pZ)(t(60413)),vouchers:(0,n.pZ)(t(40050)),bancontact:(0,n.pZ)(t(89373))}},21117:(e,s,t)=>{"use strict";t.d(s,{Z:()=>U});var n=t(36151),a=t(74622),E=t(91631),i=t(86979),r=t(20568),l=t(71076);function o(e){const[s,t]=(0,n.useState)(null),{searchBusinessExpenseCodes:a,businessExpenseCodes:E,setBusinessExpenseCodes:i}=function(e){const[s,t]=(0,n.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),a=(0,r.Z)("searchBusinessExpenseCodesForUserV1"),E=e=>e?e.trim().toLowerCase():"";return{searchBusinessExpenseCodes:(0,n.useCallback)((n=>{let{query:i,resetPageToken:r}=n;t({...s,isLoading:!0});const o=E(i),u=Boolean(s.data&&E(s.data.query)===o);if(u&&r)return void t({...s,isLoading:!1});const d=r?"1":s.data?.paging?.nextPageToken;a({profileUuid:e,pagingInfo:{pageToken:d||"1",limit:25},keyword:o}).then((e=>{const n=Number(e.paging?.currentPage)>1&&u;t({data:{...e,...n?{expenseCodes:[...s.data?.expenseCodes||[],...e.expenseCodes||[]]}:null},error:null,hasLoaded:!0,isLoading:!1})})).catch((e=>{e instanceof l.F||t({data:null,error:e,hasLoaded:!0,isLoading:!1})}))}),[s,e,a]),businessExpenseCodes:s,setBusinessExpenseCodes:t}}(e.profileUuid);return(0,n.useEffect)((()=>{e.profileUuid&&e.policyUuid&&!E?.hasLoaded&&!E.isLoading&&a({query:"",resetPageToken:!0})}),[e.policyUuid,e.profileUuid,E,a]),{businessExpenseCodes:E,searchBusinessExpenseCodes:a,setBusinessExpenseCodes:i,selectedBusinessExpenseCode:s,setSelectedBusinessExpenseCode:t}}var u=t(62149),d=t(47986);var _=t(88631),c=t(2237),N=t(62459);var P=t(98976);function O(e){const[s,t]=(0,n.useState)(null),[E,i]=(0,n.useState)(null),r=function(e,s){const t=(0,N.Z)("getBusinessPoliciesForUserV2"),n=(0,c.H)("getBusinessPoliciesForUserV2",e);return(0,a.useQuery)({queryKey:n,queryFn:e=>{let{queryKey:s}=e;return t.request("getBusinessPoliciesForUserV2",s[1])},...s?.queryObserverOptions})}(e,{queryObserverOptions:{enabled:Boolean(s?.uuid&&s.type===_.Hu.ManagedBusiness&&e.profileUuid||e.checkoutProfileType===_.Hu.ManagedFamily)}}),l=(0,P.hn)(r);return{businessPolicies:{hasLoaded:l?.hasLoaded,data:l?.data?.businessPolicies,isLoading:l?.isLoading,error:l?.error},policies:l?.data?.policies,selectedBusinessProfile:s,selectedBusinessPolicy:E,setSelectedBusinessPolicy:i,setSelectedBusinessProfile:t}}var I=t(33535),A=t(34626),p=t(15070),R=t(17759);function S(e){let{hasBusinessProfile:s,businessProfilesData:t}=e;return s&&Boolean((t||[]).find((e=>e.status===R.DR&&"Personal"===e.type)))}var T=t(63824);function U(){const{user:e}=(0,A.Z)(),s=(0,u.TH)(),t=(0,E.k6)(),r=(0,I.ZP)(),l=(0,p.v)((e=>e.checkout)),c=l?.selectedBusinessPayment||null,[P,R]=(0,n.useState)(!1),U=e.data?.isLoggedIn,C=(0,N.Z)("getBusinessProfilesV1"),L=(0,a.useQuery)("getBusinessProfilesV1",(()=>C.request("getBusinessProfilesV1",null)),{enabled:U}),{params:y,isOnPolicyRoute:D,isOnSecondaryPaymentRoute:f,isOnExpenseCodeRoute:B,isOnExpenseMemoRoute:m,isOnStartGroupOrder:M}=function(){const e=(0,u.TH)(),{modalContext:s}=(0,d.RAN)(e,["modalContext"]),{modalName:t}=(0,d.RAN)(e,["modalName"]),[n,a]=s.split("|"),i="businessSelectPolicy"===t,r="paymentsSelectSecondaryPaymentProfile"===t,l="businessSelectExpenseCode"===t,o="businessEnterExpenseMemo"===t,_=n&&a?{params:{profileUuid:n,policyUuid:a}}:null,c=i&&n?{params:{profileUuid:n}}:null,N=r?_:null,P=l?_:null,O=o?_:null,I=(0,E.LX)(e.pathname,d.YEU),A=(0,E.LX)(e.pathname,d.gqw),p=Boolean(I)||Boolean(A);return{params:c?.params||N?.params||P?.params||O?.params||I?.params||A?.params||{},isOnPolicyRoute:i,isOnSecondaryPaymentRoute:r,isOnExpenseCodeRoute:l,isOnExpenseMemoRoute:o,isOnStartGroupOrder:p}}(),b=D||f||B||m,h=y.profileUuid||c?.profileUuid||"";let g=!1;(L.data||[]).forEach((e=>{[_.Hu.Business,_.Hu.ManagedBusiness].includes(e.type)&&(g=!0)}));const x=L?.data?.find((e=>e?.defaultPaymentProfileUuid===l?.selectedPersonalPayment?.uuid)),Y=x?.type,{businessPolicies:V,policies:H,selectedBusinessProfile:F,selectedBusinessPolicy:G,setSelectedBusinessPolicy:K,setSelectedBusinessProfile:v}=O({profileUuid:h,checkoutProfileType:Y,timezone:(0,T.Z)()}),{businessExpenseCodes:Z,searchBusinessExpenseCodes:W,setBusinessExpenseCodes:k,selectedBusinessExpenseCode:z,setSelectedBusinessExpenseCode:j}=o({profileUuid:h,policyUuid:y.policyUuid||""}),[w,q]=function(e){const[s,t]=(0,n.useState)(null);return[s,t]}(y.policyUuid),{currentStep:X}=function(e){const[s,t]=(0,n.useState)("PROFILE"),{selectedBusinessPayment:a,selectedBusinessProfile:E,selectedBusinessPolicy:i,selectedBusinessExpenseCode:r,selectedBusinessExpenseMemo:l}=e;return(0,n.useEffect)((()=>{E||t("PROFILE"),E&&!i&&t("POLICY"),E&&i&&E?.isMealProgramRequired&&(i.isExpenseCodeRequired||t("COMPLETE"),i?.isExpenseCodeRequired&&!r&&t("EXPENSE_CODE"),i?.isExpenseCodeRequired&&!i.isExpenseMemoRequired&&r&&t("COMPLETE"),i?.isExpenseCodeRequired&&r&&i?.isExpenseMemoRequired&&t(l?"COMPLETE":"EXPENSE_MEMO")),a?.paymentProfileUuid&&E?.type===_.Hu.Business&&t("COMPLETE")}),[a,E,i,r,l]),{currentStep:s}}({selectedBusinessPayment:c,selectedBusinessProfile:F,selectedBusinessPolicy:G,selectedBusinessExpenseCode:z,selectedBusinessExpenseMemo:w}),$=(0,n.useCallback)((()=>{if(D)return(0,d.vN_)(s,"paymentsSelectProfile");if(f||B)return V&&V.data&&V.data&&V.data.length>1&&F&&F.uuid?(0,d.vN_)(s,"businessSelectPolicy",F.uuid):(0,d.vN_)(s,"paymentsSelectProfile");if(m){if(G&&F&&F.uuid){const e=G.uuid,t=F.uuid;return(0,d.vN_)(s,"businessSelectExpenseCode",`${t}|${e}`)}return(0,d.vN_)(s,"paymentsSelectProfile")}return(0,d.C45)(s)}),[V,B,m,f,D,s,G,F]),Q=(0,n.useCallback)((e=>"group_order"===e?(0,d.Ljk)(s,(0,d.WxO)(y)):(0,d.C45)(s)),[s,y]),J=(0,n.useCallback)((()=>{v(null),q(null),j(null),K(null),k({isLoading:!1,hasLoaded:!1,data:null,error:null})}),[k,j,q,K,v]),ee=(0,n.useCallback)(((e,n)=>{J(),r("eats:business_switch_profile_type",{businessDetails:{parentFlow:n||"checkout"}});const a=(L.data||[]).find((s=>s.uuid===e));if(!L.data||!a)return t.replace(Q(n));if(v(a),!a.isManagedBusiness)return t.replace(Q(n));const E="group_order"===n?(0,d.$m7)(s,(0,d.WxO)(y),e):(0,d.vN_)(s,"businessSelectPolicy",e);return t.replace(E)}),[Q,L.data,t,s,J,v,y,r]),se=(0,n.useCallback)((()=>F?{profileUUID:F?.uuid,profileType:F?.type,policyUUID:G?.uuid,policyVersion:G?.version,expenseCode:z?.expenseCode,expenseMemo:w}:{policyUUID:null,profileUUID:null,policyVersion:null,profileType:_.Hu.Personal,expenseCode:null,expenseMemo:null}),[F,G,z,w]);return(0,n.useEffect)((()=>{y.profileUuid&&y.profileUuid!==F?.uuid&&ee(y.profileUuid),(D||M)&&V?.hasLoaded&&F?.uuid===y.profileUuid&&1===V?.data?.length&&K((V?.data||[])[0])}),[V,H,L,t,D,s,ee,y,F,K,M]),(0,n.useEffect)((()=>{if(!b&&!F&&L.data&&c&&c.profileUuid&&c.profileUuid!==F?.uuid){const e=(0,i.b6)(L.data,c.profileUuid);v(e)}if(!b&&V.data&&c&&c.policyUuid&&c.policyUuid!==G?.uuid){const e=(V?.data||[]).find((e=>e.uuid===c.policyUuid));K(e)}}),[b,c,L.data,v,F,H,V,K,G]),{businessPolicies:V,policies:H,businessProfiles:L,getBusinessProfiles:L.refetch,onSelectBusinessProfile:ee,setSelectedBusinessProfile:v,hasBusinessProfile:g,isOrgManagedUser:S({hasBusinessProfile:g,businessProfilesData:L.data}),selectedBusinessProfile:F,selectedBusinessPolicy:G,setSelectedBusinessPolicy:K,businessExpenseCodes:Z,searchBusinessExpenseCodes:W,selectedBusinessExpenseCode:z,setSelectedBusinessExpenseCode:j,selectedBusinessExpenseMemo:w,setSelectedBusinessExpenseMemo:q,requiresProfileFlow:e=>{if(!L.data||!e)return!1;const s=L.data.find((s=>s.uuid===e));return s?.type===_.Hu.ManagedBusiness||s?.type===_.Hu.Business},getBackUrl:$,handleBusinessBackButton:()=>{q(null),j(null),W({query:"",resetPageToken:!0}),(B||D||f)&&K(null),t.replace($())},currentStep:X,confirmedProfileSelected:P,setConfirmedProfileSelected:R,getInitialUrl:Q,getBusinessDetails:se}}},93967:(e,s,t)=>{"use strict";t.d(s,{A:()=>u,S:()=>o});var n=t(12945),a=t(27871),E=t(70247),i=t(83401),r=t(44756),l=t(14210);const o=e=>(0,i.H)(e)||e?.tokenType?.toLowerCase()===r.at,u=()=>{const{paymentProfiles:e}=(0,n.IM)(),{checkoutPayloads:s}=(0,a.ZP)(["paymentProfilesEligibility"]),{draftOrder:t}=(0,E.Dz)();return e.filter(o).map((e=>{const n=(s.paymentProfilesEligibility?.eligibilityPayloadList??[]).find((s=>s.paymentProfileUUID===e?.uuid)),a=n?.inEligibilityReason??"",E=n?.paymentRestrictions?.find((e=>e.restrictionType===l.Xd.MAX_AMOUNT)),i=(t?.extraPaymentProfiles??[]).find((s=>s.paymentProfileUUID===e.uuid)),r=Boolean(i);return{uuid:e.uuid,value:{toggle:r,selectedBalanceAmount:i?.paymentPreferences?.limitAmount??E?.restrictionValue},ineligibilityReason:n?a:"Unavailable",paymentProfile:e,paymentRestrictions:n?.paymentRestrictions}}))}},46113:(e,s,t)=>{"use strict";t.d(s,{r:()=>a});var n=t(83401);function a(e){return{healthcareBenefitsPaymentProfile:e.find((e=>(0,n.H)(e))),nonHealthcareBenefitsPaymentProfiles:e.filter((e=>!(0,n.H)(e)))}}},84939:(e,s,t)=>{"use strict";t.d(s,{Z:()=>D});var n=t(36151),a=t(58984),E=t(15070),i=t(34626),r=t(33535),l=t(9545),o=t(64388),u=t(49188),d=t(74622),_=t(2237),c=t(62459);function N(e,s){const t=(0,c.Z)("getUberBalancesV1"),n=(0,_.H)("getUberBalancesV1",e);return(0,d.useQuery)({queryKey:n,queryFn:e=>{let{queryKey:s}=e;return t.request("getUberBalancesV1",s[1])},...s?.queryObserverOptions})}var P=t(60849),O=t(79620),I=t(86990);function A(e){let{cartCurrencyCode:s,storeCurrencyCode:t}=e;return Boolean(s&&t&&s!==t)}var p=t(70605),R=t(88631),S=t(20924),T=t(68262),U=t(76892),C=t(46113),L=t(26487),y=t(93967);function D(e){let{businessProfiles:s,draftOrder:t}=e;const d=(0,a.I0)();let _=!1;const c=(0,r.ZP)(),{user:D}=(0,i.Z)(),{creditBalances:f,getCreditBalances:B}=function(){const{serverCart:e}=(0,l.Z)(),{store:s}=(0,o.ZP)(e.data?.storeUuid),t=(0,r.ZP)(),{user:a}=(0,i.Z)(),E=a.data?.isLoggedIn,d=e.data?.cartUuid,_=s.data?.uuid,c=(0,I.Z)({storeId:_??"",originalCurrencyCode:e.data?.currencyCode||""}),p=s.data?.currencyCode||"",R=(0,P.ip)({...O.S.ubercash_balance_breakdown_enabled,defaultValue:!1});(0,n.useEffect)((()=>{A({cartCurrencyCode:c,storeCurrencyCode:p})?t("eats:cart__currency_code__mismatch",{cartCurrencyCodeMismatch:{detectionSource:"useGetCreditBalancesHook",cartInfo:{cartUuid:d,currencyCode:c},storeInfo:{storeUuid:_,currencyCode:p}}}):c&&p&&t("eats:cart__currency_code__match",{cartCurrencyCodeMismatch:{detectionSource:"useGetCreditBalancesHook",cartInfo:{cartUuid:d,currencyCode:c},storeInfo:{storeUuid:_,currencyCode:p}}})}),[d,_,c,p,t]),(0,n.useEffect)((()=>{t("eats:load_uber_cash_balance",{source:R?"ubercash":"passport"})}),[R,t]);let S=c;A({cartCurrencyCode:c,storeCurrencyCode:p})&&(S=p);const T=(R?N:u.b)({currencyCode:S},{queryObserverOptions:{enabled:Boolean(S)&&E}});return{isLoading:T.isLoading,isError:T.isError,getCreditBalances:T.refetch,creditBalances:T.data?.creditBalances||[]}}(),m=(0,E.v)((e=>e.checkout)),M=(0,E.v)((e=>e.selectedPaymentsMeta)),{useCredits:b,extraPaymentData:h,selectedPersonalPayment:g}=m||{},{selectedMembershipPayment:x}=M,[Y,V]=(0,n.useState)(null),[H,F]=(0,n.useState)(null),{shouldUsePaymentsHub:G,paymentsHubProfiles:K,publishableKey:v,integrationName:Z,preferredProfileUUID:W}=(0,T.Z)(),{lastSelectedProfile:k,paymentProfiles:z}=D.data?.paymentProfiles||{lastSelectedProfile:"",paymentProfiles:[]},j=G&&K?K:z,w=(0,n.useCallback)((e=>{const t=(0,U.mR)(s.data,e);return t||(j&&e?j.find((s=>s.uuid===e)):null)}),[j,s]),{healthcareBenefitsPaymentProfile:q}=(0,C.r)(j);q&&t&&Array.isArray(t.extraPaymentProfiles)&&(_=Boolean(t.extraPaymentProfiles.find((e=>e.paymentProfileUUID===q.uuid))));const X=(0,S.Z)(),$=w(g?.uuid),Q=(s.data||[]).find((e=>e.defaultPaymentProfileUuid===g?.uuid)),J=w(W),ee=w(k),se=$?.uuid||J?.uuid||ee?.uuid,te=(s.data||[]).find((e=>e.type===R.Hu.Personal)),ne=w(te?.defaultPaymentProfileUuid),ae=(0,n.useCallback)((e=>{const s=w(e);s&&d((0,p.yG)({uuid:s.uuid}))}),[d,w]),Ee=(0,n.useCallback)((e=>{const s=w(e);s&&d((0,L.lt)({uuid:s.uuid}))}),[d,w]);return(0,n.useEffect)((()=>{k.length>0&&!j.includes(k)&&c("eats:payment_hub_last_profile_uuid_miss",{lastProfileUuid:k,webPayments:{key:v,integrationName:Z}})}),[c,Z,k,j,v]),(0,n.useEffect)((()=>{k&&k.length>0&&c("eats:payments_last_selected_profile_defined")}),[c,k]),(0,n.useEffect)((()=>{W&&W.length>0&&c("eats:payments_preferred_profile_defined")}),[c,W]),(0,n.useEffect)((()=>{const e=j.filter((e=>!(0,y.S)(e)));if(X){const e=j.find((e=>"paypay"===e?.tokenType));e?.uuid&&g?.uuid!==e?.uuid&&d((0,p.yG)({uuid:e?.uuid}))}else $||Q||!g?!g?.uuid&&(se||ne?.uuid||e.length>0)&&d((0,p.yG)({uuid:$?.uuid||J?.uuid||ee?.uuid||ne?.uuid||e[0].uuid})):d((0,p.yG)(null))}),[d,ee,J,g,$,se,X,w,ne,j,Q,q]),{selectedPersonalPayment:$||J||ee,selectedMembershipPayment:w(x?.uuid),updateSelectedPersonalPayment:ae,updateSelectedMembershipPayment:Ee,guestPaymentProfile:Y,setGuestPaymentProfile:V,guestPaymentProfileV2:H,setGuestPaymentProfileV2:F,extraPaymentData:h,paymentProfiles:j,creditBalances:f,useCredits:b,useHealthcareBenefits:_,healthcareBenefitsPaymentProfile:q,getCreditBalances:B}}},49188:(e,s,t)=>{"use strict";t.d(s,{b:()=>i});var n=t(74622),a=t(2237),E=t(62459);function i(e,s){const t=(0,E.Z)("getCreditBalancesV1"),i=(0,a.H)("getCreditBalancesV1",e);return(0,n.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:s}=e;return t.request("getCreditBalancesV1",s[1])},...s?.queryObserverOptions})}},92005:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var n=t(58984),a=t(15070),E=t(58730),i=t(59400),r=t(70605);function l(){const e=(0,n.I0)(),{selectedVoucherUUID:s}=(0,a.v)((e=>{let{checkout:s}=e;return s}))||{},{data:t}=(0,E.t)(),{vouchers:l}=t||{};return function(e,s){const t=(0,i.ab)(e);if(e&&t)return{voucherData:e,voucherUUID:e?.uuid};e&&!t&&s();return{voucherData:null,voucherUUID:null}}(s&&l?l[s]:null,(()=>e((0,r.rj)())))}},12945:(e,s,t)=>{"use strict";t.d(s,{Pk:()=>f,ZP:()=>m,IM:()=>B});var n=t(36151),a=t(69744),E=t(58984),i=t(15070),r=t(88631),l=t(95761),o=t(70605),u=t(34626),d=t(21117);var _=t(84939),c=t(67023),N=t(91631),P=t(83960),O=t(66316),I=t(62149),A=t(47986),p=t(92005),R=t(93008),S=t(81436),T=t(70247),U=t(35446);const C=(e,s)=>({profileUUID:e?.uuid,profileType:e?.type,policyUUID:s?.uuid,policyVersion:s?.version});const L=e=>{const{user:s}=(0,u.Z)(),t=(0,E.I0)(),{vouchersData:a}=(0,c.Z)(),{businessPolicies:L,policies:y,businessProfiles:D,getBusinessProfiles:f,onSelectBusinessProfile:B,selectedBusinessProfile:m,selectedBusinessPolicy:M,businessExpenseCodes:b,searchBusinessExpenseCodes:h,selectedBusinessExpenseCode:g,setSelectedBusinessExpenseCode:x,getBackUrl:Y,handleBusinessBackButton:V,selectedBusinessExpenseMemo:H,setSelectedBusinessExpenseMemo:F,setSelectedBusinessPolicy:G,requiresProfileFlow:K,currentStep:v,getInitialUrl:Z,confirmedProfileSelected:W,setConfirmedProfileSelected:k,getBusinessDetails:z,hasBusinessProfile:j,isOrgManagedUser:w}=(0,d.Z)(),{draftOrder:q}=(0,T.Dz)(),{selectedPersonalPayment:X,selectedMembershipPayment:$,extraPaymentData:Q,paymentProfiles:J,creditBalances:ee,useCredits:se,updateSelectedPersonalPayment:te,guestPaymentProfile:ne,setGuestPaymentProfile:ae,guestPaymentProfileV2:Ee,setGuestPaymentProfileV2:ie,useHealthcareBenefits:re,updateSelectedMembershipPayment:le,getCreditBalances:oe}=(0,_.Z)({businessProfiles:D,draftOrder:q}),ue=(0,i.v)((e=>e.checkout))||{},{selectedVoucherUUID:de,selectedBusinessPayment:_e}=ue,[ce,Ne]=function(e){let{initialPaymentIntent:s}=e;const[t,a]=(0,n.useState)(s);return[t,a]}({initialPaymentIntent:"personal"}),[Pe,Oe]=n.useState(null),[Ie,Ae]=n.useState(null);function pe(e){if(Ne(e),"business"===e||q?.billSplitOption===U.xp.SPLIT_BY_SUBTOTAL)return;const s=de&&(a?.data?.vouchers||{})[de];s&&t((0,o.wL)(s))}const{setSelectedBusinessExpenseCode:Re,setSelectedBusinessExpenseMemo:Se,isValidPaymentSwitch:Te,updateDraftOrderPaymentProfile:Ue,updateDraftOrderError:Ce,setUseCreditsForManagedBusiness:Le}=function(e){const s=(0,N.k6)(),t=(0,I.TH)(),a=(0,E.I0)(),i=(0,p.Z)(),{draftOrderUUID:o,draftOrder:u}=(0,T.Dz)(),{hasGroupOrder:d}=(0,P.Z)(),{updateDraftOrderV2:_,updateDraftOrderMaybe:c}=(0,O.Z)(),[L,y]=(0,n.useState)(!1),[D,f]=(0,n.useState)(!1),B=Boolean(o),{groupOrder:m,getGroupOrder:M,shouldGetGroupOrder:b}=(0,R.Z)(o||"");(0,S.Z)((()=>b&&e.paymentIntent?M():null),[M,b,e],"use-business-draft-order");const h=(0,n.useCallback)((s=>{if(B&&!c.isLoading){const t=C(e.selectedBusinessProfile,e.selectedBusinessPolicy);_({draftOrderUUID:o||"",businessDetails:{...t,expenseCode:s?.expenseCode}})}e.setSelectedBusinessExpenseCodeFn(s)}),[e,B,o,_,c]),g=(0,n.useCallback)((s=>{if(B&&!c.isLoading){const t=C(e.selectedBusinessProfile,e.selectedBusinessPolicy);_({draftOrderUUID:o||"",businessDetails:{...t,expenseCode:e.selectedBusinessExpenseCode?.expenseCode,expenseMemo:s}})}e.setSelectedBusinessExpenseMemoFn(s)}),[e,B,o,_,c]),x=(0,n.useCallback)((s=>{if(!B||!m.data)return null;y(!1),!s||s.profileType!==r.Hu.Business&&s.profileType!==r.Hu.ManagedFamily||(delete s.voucherPolicyVersion,delete s.voucherUUID),s&&s.profileType===r.Hu.Personal&&u?.billSplitOption!==U.xp.SPLIT_BY_SUBTOTAL&&i?.voucherUUID&&(s.voucherPolicyVersion=i?.voucherData?.policy?.version,s.voucherUUID=i?.voucherUUID),a((0,l.GA)(s)),s?.profileType===r.Hu.Personal&&e.selectedBusinessPolicy?.isExpenseCodeRequired&&(e.setSelectedBusinessExpenseCodeFn(null),e.setSelectedBusinessExpenseMemoFn(null))}),[B,m.data,i,o,a,_,e.selectedBusinessProfile,e.selectedBusinessPolicy,e.selectedPersonalPayment]);return(0,n.useEffect)((()=>{if(m.data&&("business"===e.paymentIntent&&e.selectedBusinessPolicy||e.selectedPersonalPayment?.type===r.Hu.ManagedFamily)&&B){const s={profileUUID:e.selectedBusinessProfile?.uuid,profileType:e.selectedBusinessProfile?.type,policyUUID:e.selectedBusinessPolicy?.uuid,policyVersion:e.selectedBusinessPolicy?.version};if(y(!1),e.selectedPersonalPayment?.type===r.Hu.ManagedFamily&&"personal"===e.paymentIntent){const t=e?.policies?.find((s=>s.employeeUUID===e?.selectedPersonalPayment?.entityUuid)),n=t?.policies?.[0];s.profileUUID=e.selectedPersonalPayment.uuid,s.profileType=r.Hu.ManagedFamily,s.policyUUID=n?.uuid,s.policyVersion=null,a((0,l.Nc)(e.selectedPersonalPayment?.defaultPaymentProfileUuid))}a((0,l.GA)(s)),a((0,l.eL)(D)),s?.profileType!==r.Hu.Personal&&s?.profileType!==r.Hu.ManagedFamily&&(a((0,l.Nc)(e.selectedBusinessProfile?.defaultPaymentProfileUuid)),a((0,l.ZF)([])))}}),[m,o,_,e.paymentIntent,e.selectedBusinessPolicy,e.selectedBusinessProfile,e.selectedPersonalPayment,e.policies,B,y,d,a,D]),(0,n.useEffect)((()=>{const e=(0,A.vN_)(t,"updateDraftOrderError");!L&&c.hasLoaded&&c.error&&(y(!0),s.replace(e))}),[c,y,L,s,t]),(0,n.useEffect)((()=>{!L&&t?.search!==(0,A.vN_)(t,"updateDraftOrderError")?.search||!c.hasLoaded||c.error||(y(!1),s.replace((0,A.Zs0)(t)))}),[c,y,L,s,t]),{setSelectedBusinessExpenseCode:h,setSelectedBusinessExpenseMemo:g,isValidPaymentSwitch:e=>e===r.Hu.Personal||e===r.Hu.Business,updateDraftOrderPaymentProfile:x,setUseCreditsForManagedBusiness:f,updateDraftOrderError:c.error}}({selectedBusinessPayment:_e,policies:y,selectedBusinessProfile:m,selectedBusinessPolicy:M,selectedBusinessExpenseCode:g,selectedBusinessExpenseMemo:H,setSelectedBusinessExpenseCodeFn:x,setSelectedBusinessExpenseMemoFn:F,setPaymentIntent:pe,paymentIntent:ce,businessProfiles:D,selectedPersonalPayment:X});return e.children({businessPolicies:L,businessProfiles:D,getBusinessProfiles:f,onSelectBusinessProfile:B,selectedBusinessProfile:m,selectedBusinessPolicy:M,setSelectedBusinessPolicy:G,businessExpenseCodes:b,searchBusinessExpenseCodes:h,selectedBusinessExpenseCode:g,setSelectedBusinessExpenseCode:Re,getBackUrl:Y,handleBusinessBackButton:V,selectedBusinessExpenseMemo:H,setSelectedBusinessExpenseMemo:Se,requiresProfileFlow:K,selectedBusinessPayment:_e,currentStep:v,hasBusinessProfile:j,isOrgManagedUser:w,selectedPersonalPayment:X,selectedMembershipPayment:$,extraPaymentData:Q,paymentProfiles:J,creditBalances:ee,paymentIntent:ce,setPaymentIntent:pe,getInitialUrl:Z,confirmedProfileSelected:W,setConfirmedProfileSelected:k,useCredits:se??(ee.length>0&&!q?.extraPaymentProfiles?.length),user:s,updateSelectedPersonalPayment:te,updateSelectedMembershipPayment:le,updateSelectedBusinessPayment:e=>{G(null),t((0,o.Kz)(e)),e?.profileType===r.Hu.Business&&t((0,l.Nc)(e?.paymentProfileUuid))},updateExtraPaymentData:e=>{t((0,o.n2)(e))},updateUseCredits:(e,s)=>{s!==r.Hu.Personal&&s?s===r.Hu.Business?t((0,o.sg)(e)):Le(e):t((0,o.Pe)(e))},updateCreditBalances:()=>{oe&&oe()},isValidPaymentSwitch:Te,getBusinessDetails:z,updateDraftOrderPaymentProfile:Ue,updateDraftOrderError:Ce,guestPaymentProfile:ne,setGuestPaymentProfile:ae,guestPaymentProfileV2:Ee,setGuestPaymentProfileV2:ie,paymentProfileInfoForCheckoutActions:Pe,setPaymentProfileInfoForCheckoutActions:Oe,estimatedPaymentPlanForCheckoutActions:Ie,setEstimatedPaymentPlanForCheckoutActions:Ae,useHealthcareBenefits:re,updateUseHealthcareBenefits:(e,s)=>{s===r.Hu.Personal?t((0,o.R$)(e)):(r.Hu.Business,t((0,o.R$)(!1)))}})};var y=t(51048),D=t(33990);const f=n.createContext({businessPolicies:r.TW,businessProfiles:null,getBusinessProfiles:a.Z,selectedBusinessProfile:null,selectedBusinessPolicy:null,setSelectedBusinessPolicy:a.Z,onSelectBusinessProfile:a.Z,businessExpenseCodes:r.$C,searchBusinessExpenseCodes:()=>{},selectedBusinessExpenseCode:null,setSelectedBusinessExpenseCode:a.Z,selectedBusinessExpenseMemo:null,setSelectedBusinessExpenseMemo:a.Z,getBackUrl:()=>({}),handleBusinessBackButton:a.Z,requiresProfileFlow:()=>!1,creditBalances:[],extraPaymentData:null,paymentProfiles:[],updateExtraPaymentData:a.Z,updateSelectedBusinessPayment:a.Z,updateUseCredits:a.Z,useCredits:!1,user:y.V,paymentIntent:"personal",setPaymentIntent:a.Z,updateSelectedPersonalPayment:a.Z,updateSelectedMembershipPayment:a.Z,selectedPersonalPayment:null,selectedBusinessPayment:null,selectedMembershipPayment:null,currentStep:"PROFILE",getInitialUrl:()=>({}),confirmedProfileSelected:!1,setConfirmedProfileSelected:a.Z,isValidPaymentSwitch:()=>!1,isOrgManagedUser:void 0,getBusinessDetails:()=>({profileUUID:null,profileType:null,policyUUID:null,policyVersion:null}),updateDraftOrderPaymentProfile:()=>null,updateDraftOrderError:null,hasBusinessProfile:!1,guestPaymentProfile:null,setGuestPaymentProfile:a.Z,guestPaymentProfileV2:null,setGuestPaymentProfileV2:a.Z,paymentProfileInfoForCheckoutActions:null,setPaymentProfileInfoForCheckoutActions:a.Z,estimatedPaymentPlanForCheckoutActions:null,setEstimatedPaymentPlanForCheckoutActions:a.Z,useHealthcareBenefits:!1,updateUseHealthcareBenefits:a.Z,updateCreditBalances:()=>null}),B=()=>{const e=n.useContext(f);if(null!==e)return e;throw Error("You should use useEditPaymentProfilesContext only in a descendant of EditPaymentProfilesProvider")};function m(e){return(0,D.tZ)(L,{children:s=>(0,D.tZ)(f.Provider,{value:s,children:e.children})})}},88631:(e,s,t)=>{"use strict";t.d(s,{$C:()=>l,Hu:()=>i,TW:()=>E,vO:()=>r});var n=t(46668),a=t(17759);const E={...n.E,data:[]},i=(a.DR,a.OU,a.JK,a.il,{Personal:"Personal",Business:"Business",ManagedBusiness:"ManagedBusiness",ManagedFamily:"ManagedFamily",Commuter:"Commuter"}),r={Centralized:"Centralized",Decentralized:"Decentralized"},l=(n.E,{...n.E,data:{expenseCodes:[],hasMore:!1,query:""}})},35446:(e,s,t)=>{"use strict";t.d(s,{xp:()=>n});const n={UNKNOWN_BILL_SPLIT_OPTION:"UNKNOWN_BILL_SPLIT_OPTION",CREATOR_PAYS_ALL:"CREATOR_PAYS_ALL",SPLIT_BY_SUBTOTAL:"SPLIT_BY_SUBTOTAL"}},76892:(e,s,t)=>{"use strict";t.d(s,{SE:()=>a,X$:()=>E,mR:()=>i});var n=t(88631);const a=Object.freeze({personal:"personal",business:"business"}),E=Object.freeze({membership_personal:"membership_personal"}),i=(e,s)=>(e||[]).find((e=>(e.defaultPaymentProfileUuid===s||e.uuid===s)&&e.type===n.Hu.ManagedFamily))},63824:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});const n=()=>{try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e}catch(e){return"Etc/Unknown"}return"Etc/Unknown"}},89373:(e,s,t)=>{e.exports=t.p+"f93f7c0e3996c021.svg"},4354:(e,s,t)=>{e.exports=t.p+"37053d4d3972ae6d.svg"},31153:(e,s,t)=>{e.exports=t.p+"472475c485d211d4.svg"},18646:(e,s,t)=>{e.exports=t.p+"4dbcffc65086d2a1.svg"},90465:(e,s,t)=>{e.exports=t.p+"298c5d3f9e2f0415.svg"},42643:(e,s,t)=>{e.exports=t.p+"4a8c2b5a0ef3d828.svg"},36391:(e,s,t)=>{e.exports=t.p+"85573f825c72de21.svg"},90187:(e,s,t)=>{e.exports=t.p+"16de2f01b2abfcd4.svg"},66987:(e,s,t)=>{e.exports=t.p+"c57afa92c9773650.svg"},70925:(e,s,t)=>{e.exports=t.p+"a90ee32180aec8e4.svg"},60413:(e,s,t)=>{e.exports=t.p+"0b243493e38d216d.svg"},84648:(e,s,t)=>{e.exports=t.p+"7d599df78947c601.svg"},44001:(e,s,t)=>{e.exports=t.p+"a01e1bb4a6328427.svg"},84174:(e,s,t)=>{e.exports=t.p+"6b22c989b1553e5e.svg"},34506:(e,s,t)=>{e.exports=t.p+"29c3a6a2d4cd40fa.svg"},85931:(e,s,t)=>{e.exports=t.p+"ace8b254555025fb.svg"},8797:(e,s,t)=>{e.exports=t.p+"807d3e39daf4977c.svg"},20072:(e,s,t)=>{e.exports=t.p+"82144546657e40d2.svg"},22181:(e,s,t)=>{e.exports=t.p+"155e5c4d6a0dd96b.svg"},65760:(e,s,t)=>{e.exports=t.p+"bd8dd7999964321d.svg"},8521:(e,s,t)=>{e.exports=t.p+"7bcefd4dbe11d684.svg"},40050:(e,s,t)=>{e.exports=t.p+"899713dd6dea5932.svg"}}]);