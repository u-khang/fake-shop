"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[37505],{90985:(t,e,i)=>{i.d(e,{Z:()=>d});var a=i(92300),o=i(95958),r=i(48700),n=i(42209),s=i(33990);const d=t=>{let{children:e,content:i,color:d,shape:u=r.X3.rectangle,placement:c=r.r4.topRight,hierarchy:l,horizontalOffset:m,verticalOffset:p,hidden:y,overrides:I={}}=t;const[h,g]=(0,a.jb)(I.Badge,o.j8),[f,b]=(0,a.jb)(I.Root,o.Fp),[A,U]=(0,a.jb)(I.Positioner,o.x5),k=(0,n.u)(e);r.r4.topLeft,r.r4.topRight,r.r4.bottomRight,r.r4.bottomLeft;return k?(0,s.BX)(f,{...b,children:[k,(0,s.tZ)(A,{$horizontalOffset:m,$verticalOffset:p,$placement:c,$role:r.HB.badge,...U,children:(0,s.tZ)(h,{$hierarchy:l,$shape:u,$color:d,$hidden:y,...g,children:i})})]}):(0,s.tZ)(h,{$hierarchy:l,$shape:u,$color:d,$hidden:y,...g,children:i})}},10400:(t,e,i)=>{i.d(e,{F8:()=>a,Yj:()=>r,oN:()=>o});const a=Object.freeze({UNKNOWN:"UNKNOWN",AVAILABLE:"AVAILABLE",LIKELY_UNAVAILABLE:"LIKELY_UNAVAILABLE",UNAVAILABLE:"UNAVAILABLE",PLACEHOLDER_1:"PLACEHOLDER_1",PLACEHOLDER_2:"PLACEHOLDER_2"}),o=(Object.freeze({GRID:"GRID",LIST:"LIST"}),Object.freeze({TOP_LEADING:"TOP_LEADING",TOP_TRAILING:"TOP_TRAILING",BOTTOM_LEADING:"BOTTOM_LEADING",BOTTOM_TRAILING:"BOTTOM_TRAILING"})),r=Object.freeze({UNKNOWN:"UNKNOWN",TOP_LEADING:"TOP_LEADING",TOP_TRAILING:"TOP_TRAILING",BOTTOM_LEADING:"BOTTOM_LEADING",BOTTOM_TRAILING:"BOTTOM_TRAILING"});Object.freeze({UNKNOWN:"UNKNOWN",IN_STORE_SEARCH:"IN_STORE_SEARCH",QUICK_ADD_ITEM_FEED_CAROUSEL:"QUICK_ADD_ITEM_FEED_CAROUSEL"}),Object.freeze({FIT:"FIT",CENTER_CROP:"CENTER_CROP"})},11849:(t,e,i)=>{i.d(e,{Z:()=>h});var a=i(12517),o=i(31913),r=i(48700),n=i(74334),s=i(8639);const d={[n.Ou.PILL]:r.X3.pill,[n.Ou.RECTANGLE]:r.X3.rectangle};const u={[n.fi.PRIMARY]:r.T5.primary,[n.fi.SECONDARY]:r.T5.secondary};const c={[n.vZ.POSITIVE]:r.r$.positive,[n.vZ.ACCENT]:r.r$.accent,[n.vZ.NEGATIVE]:r.r$.negative,[n.vZ.WARNING]:r.r$.warning};var l=i(89217),m=i(36278),p=i(91931),y=i(91483),I=i(33990);function h(t){let{viewModel:e}=t;const{content:i,hierarchy:n,color:h,shape:g,accessibilityText:f}=e,[b,A]=(0,p.hQ)(),U=function(t){return t&&d[t]||r.X3.rectangle}(g),k=function(t){return t&&u[t]||r.T5.primary}(n);let C=null;"standard"===h?.type&&(C=h.standard);const T=function(t){return t&&c[t]||r.r$.accent}(C),D={Badge:{style:{...function(t,e){let i={};if("custom"===t?.type){const a=t&&"custom"in t?t.custom:null,o=(0,s.Lq)(a?.contentColor),r=(0,s.Lq)(a?.backgroundColor);i={color:e?.colors[`${o}`],backgroundColor:e?.colors[`${r}`]}}return i}(h,A),maxWidth:"100%",width:"fit-content"}}};let v=null;switch(i.type){case"richText":{const t=(0,y._M)(i.richText),e=(0,s.Lq)(t);v=(0,I.tZ)("span",{className:b({maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",...e?{color:A.colors[e]}:null}),children:(0,I.tZ)(o.ZP,{text:i.richText,whiteSpace:"nowrap"})});break}case"standard":{const t=i.standard.iconContent?.icon?{richIllustration:{illustration:{type:"icon",icon:{icon:i.standard.iconContent.icon,dimensions:{width:{type:"pointValue",pointValue:12},height:{type:"pointValue",pointValue:12}}}},accessibilityText:i.standard.iconContent?.accessibilityText||""}}:{richIllustration:null};v=(0,I.BX)(I.HY,{children:["LEADING"===i.standard.iconContent?.iconLayout?(0,I.BX)(I.HY,{children:[(0,I.tZ)(l.SZ,{...t}),(0,I.tZ)(m.Q3,{})]}):null,i.standard.title,"TRAILING"===i.standard.iconContent?.iconLayout?(0,I.BX)(I.HY,{children:[(0,I.tZ)(m.Q3,{}),(0,I.tZ)(l.SZ,{...t})]}):null]});break}default:return null}return(0,I.tZ)(a.Ct,{color:T,shape:U,hierarchy:k,content:v,overrides:D,...f?{"aria-label":f}:{}})}},12517:(t,e,i)=>{i.d(e,{Ct:()=>r});var a=i(90985),o=i(33990);function r(t){return(0,o.tZ)(a.Z,{...t})}},62938:(t,e,i)=>{i.d(e,{Z:()=>n});var a=i(69694),o=i(84272),r=i(47885);const n=()=>{const{isStorePrecheckoutBundlingEnabled:t}=(0,r.Z)(),{primaryBundledStoreUuid:e}=(0,o.Z)(),{draftOrder:i,cart:n}=(0,a.Z)(e);return{shouldShowBundleItemAddedFirstDialog:t&&e&&!(i&&n?.data?.items?.length)}}},29495:(t,e,i)=>{i.d(e,{Z:()=>Tt});var a=i(36151),o=i(43193),r=i(91931),n=i(6703),s=i(58984),d=i(15070),u=(i(37566),i(47986)),c=i(88671),l=i(64388),m=i(91631),p=i(33535),y=i(67476),I=(i(87444),i(66958)),h=i(79517),g=i(57597),f=(i(95768),i(69630)),b=i(62149),A=i(33990);(0,r.zo)("div",(t=>{let{$theme:e}=t;return{borderRadius:e.borders.pillButtonBorderRadius,border:`1px solid ${e.colors.buttonPrimaryText}`,boxShadow:e.shadows.floatingButton}}));var U=i(14016),k=i(78422),C=i(68093),T=i(34567),D=i(52909);const v=(0,r.zo)("div",(t=>{let{$theme:e,$closeAnimation:i,$isDark:a}=t;return{cursor:"auto",display:"flex",alignItems:"center",background:a?e.colors.backgroundInversePrimary:e.colors.backgroundPrimary,border:`2px solid ${a?e.colors.backgroundInversePrimary:e.colors.backgroundPrimary}`,boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:e.borders.pillButtonBorderRadius,position:"relative",top:"2px",animationDuration:"200ms",animationFillMode:"forwards",...i?{animationName:{from:{maxWidth:"200px"},to:{maxWidth:"40px"}}}:{animationName:{from:{maxWidth:"40px"},to:{maxWidth:"200px"}}},overflow:"hidden"}})),S=(0,r.zo)("div",(t=>{let{$theme:e,$size:i,$isDark:a}=t;return{..."small"===i?e.typography.LabelSmall:e.typography.LabelLarge,width:"max-content",paddingLeft:"small"===i?"2px":"16px",paddingRight:"small"===i?"2px":"16px",whiteSpace:"nowrap",textAlign:"center",color:a?e.colors.contentInversePrimary:e.colors.contentPrimary}})),B=(0,r.zo)("button",(t=>{let{$theme:e,$size:i,disabled:a,$isDark:o}=t;return{borderRadius:e.borders.pillButtonBorderRadius,color:o?e.colors.contentInversePrimary:e.colors.contentPrimary,background:o?e.colors.backgroundInversePrimary:e.colors.backgroundPrimary,alignItems:"center",boxSizing:"border-box",cursor:"pointer",display:"flex",justifyContent:"center",width:"small"===i?"34px":"36px",height:"small"===i?"34px":"36px",minHeight:""+("small"===i?"34px":"36px"),padding:0,margin:0,"@media (hover: hover)":{":hover":{background:o?e.colors.backgroundInverseSecondary:e.colors.backgroundSecondary}},":active":{background:o?e.colors.backgroundInverseSecondary:e.colors.backgroundSecondary},...a&&{color:e.colors.contentStateDisabled,cursor:"not-allowed",":disabled":{fill:e.colors.disabled,background:"transparent"},"@media (hover: hover)":{":hover":{background:o?e.colors.backgroundInverseSecondary:e.colors.backgroundSecondary}},":active":{background:o?e.colors.backgroundInverseSecondary:e.colors.backgroundSecondary}}}})),L=t=>{const e=(0,g.Z)({item:t.item,storeUuid:t.storeUuid,cartQuantity:t.quantity}),{themeId:i}=(0,D.aG)(),a=(0,I.jx)(t.item),o=(0,I.L5)(t.item),r=o.increment??1,n=null!=o.minimumQuantity?o.minimumQuantity:1;return(0,A.BX)(v,{$closeAnimation:t.closeAnimation,$isDark:"dark"===i,children:[(0,A.tZ)(B,{"data-test":"quick-add-minus",disabled:Boolean(t.isDisabled),onClick:()=>{t.updateQuantity(h.Tf.from(r).multiply(-1).toBaseDecimal())},$size:t.size,$isDark:"dark"===i,children:t.quantity<=n?(0,A.tZ)(k.Z,{name:"TrashCanFilled",size:"small"===t.size?16:20}):(0,A.tZ)(k.Z,{name:"MinusSmallFilled",size:"small"===t.size?16:20})}),a?(0,A.BX)(S,{$size:t.size,"data-test":"quick-add-quantity",$isDark:"dark"===i,children:[t.quantity," ",(0,I.YP)(t.item)]}):(0,A.tZ)(S,{$size:t.size,"data-test":"quick-add-quantity",$isDark:"dark"===i,children:t.quantity}),(0,A.tZ)(B,{$size:t.size,"data-test":"quick-add-plus",disabled:Boolean(t.isDisabled)||e()!==g.y.BELOW_LIMIT,onClick:()=>{t.updateQuantity(h.Tf.from(r).toBaseDecimal())},$isDark:"dark"===i,children:(0,A.tZ)(k.Z,{name:"PlusSmallFilled",size:"small"===t.size?16:20})})]})};var x=i(16797),O=i(13427);const q=t=>{let{storeUUID:e,sectionUUID:i,subsectionUUID:o,item:r,quantity:d,decimalQuantity:c,updateQuantity:l,cartItemCount:y,closeAnimation:U,closeStepper:k,isDifferentStoreFromCart:C,isPerformingCartUpdate:T,addToCart:D,increment:v,decrement:S,quickAddCount:B,updateDecimalQuantity:q,debouncedQuickAddCount:R,quickAddSource:Z,isLowAvailabilityItem:E,sourceType:N,analytics:_,searchTerm:z,size:Q}=t;const P=(0,m.k6)(),$=(0,m.UO)(),w=(0,b.TH)(),M=(0,s.I0)(),F=(0,f.Z)(),G=(0,p.ZP)(),W=(0,u.li$)(w,{...(0,u.x9r)($),sectionUuid:i,itemUuid:r.uuid||""}),V=(0,O.Z)(),H=r?.catalogItemAnalyticsData?.catalogSectionItemPosition??-1,K=(0,a.useRef)((t=>{M((0,n.px)({storeUUID:e,item:r,quantity:t,sectionUUID:i,subsectionUUID:o})),P.push(W)})),X=(0,a.useRef)({addToCart:D,increment:v,decrement:S,updateDecimalQuantity:q,isPerformingCartUpdate:T,debouncedQuantity:R.integer});X.current={addToCart:D,increment:v,decrement:S,updateDecimalQuantity:q,isPerformingCartUpdate:T,debouncedQuantity:R.integer};const j=(0,g.Z)({item:r,storeUuid:e,cartQuantity:d}),Y=(0,a.useCallback)(((t,e)=>{"number"==typeof t?t>e?X.current.increment(t-e):t<e&&X.current.decrement(e-t):X.current.updateDecimalQuantity(t)}),[X]),J=(0,a.useRef)({quantity:d,decimalQuantity:c,cartItemCount:y});J.current={quantity:d,decimalQuantity:c,cartItemCount:y},(0,a.useEffect)((()=>{const t=K;return()=>{V&&!U&&J.current.quantity>0&&0===J.current.cartItemCount&&0===X.current.debouncedQuantity||J.current.quantity!==J.current.cartItemCount&&X.current.debouncedQuantity!==J.current.quantity&&(F&&C?(X.current.addToCart({isStartingNewOrder:!1,eventSource:"quick_add",surfaceType:N,actionMeta:{isQuickAdd:!0,quickAddSource:Z},itemPosition:H}),M((0,n.OA)())):C?C&&t.current(J.current.quantity):Y(J.current.decimalQuantity,J.current.cartItemCount))}}),[Y,C,F,K,M,Z,V,U,N,H]),(0,a.useEffect)((()=>{if(y!==R.integer&&(!X.current.isPerformingCartUpdate||0!==y))return 0!==y?Y(R.decimal,y):void(U||(X.current.addToCart({isStartingNewOrder:!1,eventSource:"quick_add",surfaceType:N,actionMeta:{isQuickAdd:!0,quickAddSource:Z},itemPosition:H}),M((0,n.OA)())))}),[C,y,Y,r,F,U,R,M,Z,N,H]);const tt=(0,I.L5)(r),et=(0,a.useCallback)((t=>{const a=h.Tf.from(t).toFloat();let n="number"==typeof t?B.integer+t:h.Tf.from(B.decimal).add(t).toBaseDecimal();if("number"!=typeof n&&tt.minPermitted&&h.Tf.from(n).isLt(tt.minPermitted)&&(n=h.Tf.from(0).toBaseDecimal()),a>0&&j({increment:a,showSnackbarWarning:!0})===g.y.ABOVE_LIMIT)return;l(r.uuid||"",n);const s=a>0?"increment":"decrement";if(G("eats:quick_add_button_tap",{quickAddOperation:{storeUuid:e,itemUuid:r.uuid||"",previousQuantity:d,updatedQuantity:d+a,operationType:s,searchTerm:z||"",lowAvailabilityItemUuid:E&&r?.uuid||"",catalogSectionUuid:i,sectionUuid:i,subsectionUuid:o,...N?{sourceType:N}:{},..._?.catalogSection?{catalogSectionAnalyticsData:_.catalogSection}:{}},analyticsLabel:"analyticsLabel"in r&&r.analyticsLabel?r.analyticsLabel:void 0}),a>0&&"itemAd"in r){const t=r;G("ads:storefront_store_click",{adsAnalyticsEvent:{adEventType:x.J.CLICK,adImpressionUUID:t.itemAd?.impressionId||"",adData:t.itemAd?.adData||"",bidderUUID:e}})}("number"==typeof n?n<=0:n?.base<=0)&&k()}),[B.integer,B.decimal,tt.minPermitted,j,l,r,G,e,d,z,E,i,o,N,_?.catalogSection,k]);return(0,A.tZ)(L,{item:r,storeUuid:e,quantity:d,closeAnimation:U,updateQuantity:et,size:Q})};var R=i(53213),Z=i(10400),E=i(70247),N=i(53176),_=i(33967),z=i(32830),Q=i(49723);var P=i(62938),$=i(11189),w=i(54669);const M=(0,r.zo)("div",(t=>{let{$theme:e,$isOpen:i}=t;return{border:i?"none":`1px solid ${e.colors.quickAddButtonBorderColor}`,boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:e.borders.pillButtonBorderRadius}})),F=(0,r.zo)("div",(t=>{let{$theme:e,$size:i}=t;return{..."small"===i?e.typography.LabelSmall:e.typography.LabelLarge,color:e.colors.quickAddButtonColor}})),G=(0,r.w1)(T.Z,(t=>{let{$theme:e,$size:i}=t;return{height:"small"===i?"32px":"36px",minWidth:"small"===i?"32px":"36px",minHeight:0,padding:"2px 4px",background:e.colors.quickAddButtonBackground,color:e.colors.quickAddButtonColor,":hover":{background:e.colors.quickAddButtonBackgroundHover},":active":{background:e.colors.quickAddButtonBackgroundActive}}})),W=t=>{let{item:e,subsectionUUID:i,storeUUID:r,sectionUUID:g,cartItemCount:T,cartItemDecimalCount:D,syncItemQuantity:v,quickAddCount:S,disabled:B,quickAddSource:L,isInteractionEnabled:x=!0,itemAvailabilityState:W,sourceType:V,storeSlug:H="",analytics:K,onClickEvent:X,searchTerm:j,size:Y,resultIndex:J}=t;const tt=(0,s.I0)(),et=S.integer,[it,at]=(0,a.useState)(!1),ot=(0,U.T)(),[rt,nt]=o.useState(!1),st=o.useRef(null),{store:dt}=(0,l.ZP)(r,{cacheOnly:!0}),ut=(0,b.TH)(),ct=(0,b.UO)(),lt=(0,c.k)(),mt=(0,m.k6)(),pt=(0,p.ZP)(),{canEditGroupOrderCart:yt}=(0,y.Z)(r),It=(0,I.ne)(e),{itemQueue:ht}=(0,d.v)((t=>t.quickAdd)),{draftOrder:gt}=(0,E.Dz)(),ft=gt?.storeUuid,bt=(0,f.Z)(),{storeSlug:At}=(0,u.WxO)(ct),{shouldShowBundleItemAddedFirstDialog:Ut}=(0,P.Z)(),kt=(0,O.Z)(),Ct=(0,w.Z)(),Tt=(0,u.yz4)({location:ut,args:{sectionUuid:g,subsectionUuid:i,itemUuid:e.uuid||"",storeUuid:r||"",storeSlug:H||At||""}}),Dt=(0,a.useCallback)((()=>{at(!0),setTimeout((()=>{nt(!1),at(!1)}),200)}),[]);(0,R.Z)(st,(()=>{rt&&Dt()}),!0);const vt=(0,a.useCallback)(((t,e,i)=>{const a=e?.meta?.type||e?.meta?.body?.code;if(e&&pt("eats:store_quick_add_error",{storeUuid:r,error:e}),"DRAFT_ORDER_VALIDATION_ERROR"===a||"CREATE_DRAFT_ORDER_VALIDATION_ERROR"===a||"ORDER_ALERT_ERROR"===a)return lt(!1,e,!1,dt)}),[lt,pt,dt,r]),{increment:St,decrement:Bt,updateDecimalQuantity:Lt,addToCart:xt,isDifferentStoreFromCart:Ot,serverCart:qt}=(t=>{let{storeUuid:e,item:i,quantity:o,sectionUuid:r,subsectionUuid:d,onAddedToCart:u,decimalQuantity:c,quickAddSource:m,analytics:p,resultIndex:y,sourceType:I}=t;const{store:h}=(0,l.ZP)(e,{cacheOnly:!0}),g=(0,_.Z)(!0),{serverCart:f}=(0,E.iQ)(),b=(0,s.I0)(),A=f.data?.groupedItems,{outOfItemAction:U}=(0,Q.Z)(),k=(0,a.useMemo)((()=>(((A||[]).find((t=>t.isCurrentUser))||{}).items||[]).filter((t=>t.uuid===i.uuid))),[A,i.uuid]),C=(0,a.useMemo)((()=>(0,z.Z)(k.map((t=>{let{quantity:e}=t;return e})))),[k]),T=i.isLegacy?i.description:i.itemDescription,D={error:null,hasLoaded:!0,isLoading:!1,data:{price:Number(i.price),title:String(i.title),uuid:i.uuid||"",hasCustomizations:!1,customizationsList:[],imageUrl:String(i.imageUrl),imageWatermarkContent:null,images:null,nutritionalInfo:null,suspendReason:null,suspendUntil:0,itemPromotion:null,itemPromotionV2:{promoText:null,availablePromotion:null,appliedPromotion:null,promotionData:null},rules:null,sectionUuid:r,subsectionUuid:d,itemDescription:T??"",purchaseInfo:i.purchaseInfo}},v="itemAd"in i?i.itemAd:null,{addToCart:S}=(0,N.Z)({store:h,menuItem:D,selectedCustomizations:{},quantity:o,specialInstructions:"",outOfItemAction:U,onAddedToCart:u,decimalQuantity:c,itemAd:v,analytics:{catalogSection:p?.catalogSection},resultIndex:y,sourceType:I}),B=Boolean(f?.hasLoaded&&h.hasLoaded&&f.data?.items?.length&&f?.data?.storeUuid!==h?.data?.uuid),L=(t,e)=>{e?g(e,t,{isQuickAdd:!0},I):S({isStartingNewOrder:B,eventSource:"quick_add",actionMeta:{isQuickAdd:!0,quickAddSource:m}}),b((0,n.OA)())},x=(0,a.useMemo)((()=>k.sort(((t,e)=>new Date(e.createdTimestamp??0)-new Date(t.createdTimestamp??0)))),[k]);return{addToCart:S,increment:t=>{const e=x[0];L(t+(e?.quantity||0),e?.shoppingCartItemUuid)},decrement:t=>{let e=t;for(let t=0;t<x.length;t++){const i=x[t];if(i){if(0===e)return;if(i.quantity>=e){L(i.quantity-e,i.shoppingCartItemUuid);break}e-=i.quantity,L(0,i.shoppingCartItemUuid)}}},updateDecimalQuantity:t=>{const e=x[0];t.base<=0?L(0,e?.shoppingCartItemUuid):L(t,e?.shoppingCartItemUuid)},cartItemMatch:k,cartItemQuantity:C,serverCart:f,isDifferentStoreFromCart:B}})({storeUuid:r,item:e,quantity:et,sectionUuid:g,subsectionUuid:i,onAddedToCart:vt,decimalQuantity:S.decimal,quickAddSource:L,analytics:K,resultIndex:J,sourceType:V});(0,a.useEffect)((()=>{const t=h.Tf.maybeFrom(D)?.toFloat();(kt?It?v&&t!==et:v&&T!==et:v&&T!==et&&(!It||D))&&tt((0,n.$R)(r,e.uuid||"",D||T))}),[e,It,D,v,T,e.uuid,tt,et,r,kt]);const Rt=(0,u.li$)(ut,{sectionUuid:g,subsectionUuid:i,itemUuid:e.uuid||"",storeUuid:r||"",storeSlug:H||At||""}),Zt=(0,C.Z)(S,1e3),Et=W===Z.F8?.LIKELY_UNAVAILABLE;if(!yt)return null;return(0,A.tZ)(M,{onClick:t=>{if((!Ct||e.hasCustomizations)&&0===et)return;if(!x)return;if(t.preventDefault(),t.stopPropagation(),B)return;const a=(0,I.L5)(e),o=a.defaultDecimal||h.Tf.from(1).updateExponent(a.increment?.exponent||0).toBaseDecimal();return Ut?mt.push((0,$.p9)(ut)):Ot&&!bt?(tt((0,n.px)({storeUUID:r,item:e,quantity:o,sectionUUID:g,subsectionUUID:i})),mt.push(Rt)):ft!==r&&Boolean(ht.length)&&ht[0]!==e.uuid?mt.push(Tt):ft===r||ht.length||!qt.isLoading||rt?(nt(!0),void(0===et&&(tt((0,n.$R)(r,e.uuid||"",o)),tt((0,n.O7)(e.uuid))))):mt.push(Tt)},ref:st,$isOpen:rt,children:rt?(0,A.tZ)(q,{storeUUID:r,sectionUUID:g,subsectionUUID:i,item:e,quantity:et,updateQuantity:(t,e)=>{tt((0,n.$R)(r,t,e))},cartItemCount:T,closeAnimation:it,closeStepper:Dt,isDifferentStoreFromCart:Ot,isPerformingCartUpdate:qt.isLoading,addToCart:xt,increment:St,decrement:Bt,quickAddCount:S,decimalQuantity:S.decimal,updateDecimalQuantity:Lt,debouncedQuickAddCount:Zt,quickAddSource:L,isLowAvailabilityItem:Et,sourceType:V,analytics:K,searchTerm:j,size:Y}):(0,A.tZ)(G,{"data-testid":"quick-add-button",disabled:B,"aria-label":ot("quick_add"),radius:"pillButtonBorderRadius",onClick:()=>{X&&X()},$size:Y,children:et>0?It?(0,A.BX)(F,{$size:Y,children:[et," ",(0,I.YP)(e)]}):(0,A.tZ)(F,{$size:Y,children:et}):(0,A.tZ)(k.Z,{name:"PlusSmallFilled",size:"small"===Y?16:20})})})},V=o.memo(W);var H=i(39463),K=i(49946);const X=(0,r.zo)("div",(t=>{let{$theme:e,$closeAnimation:i}=t;return{cursor:"auto",display:"flex",alignItems:"center",background:e.colors.quickAddButtonBackground,border:`2px solid ${e.colors.quickAddButtonBorderColor}`,boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:e.borders.pillButtonBorderRadius,position:"relative",top:"2px",animationDuration:"200ms",animationFillMode:"forwards",...i?{animationName:{from:{maxWidth:"200px"},to:{maxWidth:"40px"}}}:{animationName:{from:{maxWidth:"40px"},to:{maxWidth:"200px"}}},overflow:"hidden"}})),j=(0,r.zo)("div",(t=>{let{$theme:e,$size:i}=t;return{..."small"===i?e.typography.LabelSmall:e.typography.LabelLarge,width:"max-content",paddingLeft:"small"===i?"2px":"16px",paddingRight:"small"===i?"2px":"16px",whiteSpace:"nowrap",textAlign:"center",color:e.colors.quickAddButtonColor}})),Y=(0,r.zo)("button",(t=>{let{$theme:e,$size:i,disabled:a}=t;return{borderRadius:e.borders.pillButtonBorderRadius,color:e.colors.quickAddButtonColor,background:e.colors.quickAddButtonBackground,alignItems:"center",boxSizing:"border-box",cursor:"pointer",display:"flex",justifyContent:"center",width:"small"===i?"34px":"36px",height:"small"===i?"34px":"36px",minHeight:""+("small"===i?"34px":"36px"),padding:0,margin:0,"@media (hover: hover)":{":hover":{background:e.colors.quickAddButtonBackgroundHover}},":active":{background:e.colors.quickAddButtonBackgroundActive},...a&&{color:e.colors.contentStateDisabled,cursor:"not-allowed",":disabled":{fill:e.colors.disabled,background:"transparent"},"@media (hover: hover)":{":hover":{background:e.colors.quickAddButtonBackgroundHover}},":active":{background:e.colors.quickAddButtonBackgroundActive}}}})),J=t=>{const{onQuantityUpdated:e}=t,i=t.quantity.minQuantity,o=t.quantity.step,r=t.quantity.maxQuantity,n=t.quantity.currentQuantity,s=h.Tf.from(n).toE5(),d=(0,a.useCallback)((t=>{t.stopPropagation(),t.preventDefault();const i=s.add(o).toFloat(),a=h.Tf.from(i).toBaseDecimal();e(a)}),[s,o,e]),u=(0,a.useCallback)((t=>{t.stopPropagation(),t.preventDefault();const a=s.subtract(o);if(a.isLt(i))e({base:0,exponent:0});else{const t=a.toFloat(),i=h.Tf.from(t).toBaseDecimal();e(i)}}),[s,o,i,e]);return(0,A.BX)(X,{$closeAnimation:t.closeAnimation,children:[(0,A.tZ)(Y,{"data-test":"quick-add-minus",disabled:Boolean(t.isDisabled)||s.isLt(i),onClick:u,$size:t.size,children:s.isLte(i)?(0,A.tZ)(k.Z,{name:"TrashCanFilled",size:"small"===t.size?16:20}):(0,A.tZ)(k.Z,{name:"MinusSmallFilled",size:"small"===t.size?16:20})}),(0,A.BX)(j,{$size:t.size,"data-test":"quick-add-quantity",children:[s.toFloat()," ",t.quantity.suffix??""]}),(0,A.tZ)(Y,{$size:t.size,"data-test":"quick-add-plus",disabled:Boolean(t.isDisabled)||s.isGte(r),onClick:d,children:(0,A.tZ)(k.Z,{name:"PlusSmallFilled",size:"small"===t.size?16:20})})]})},tt=(0,a.memo)(J);var et=i(38777),it=i(74057),at=i(24316),ot=i(92005),rt=i(87954),nt=i(17615),st=i(24934),dt=i(85427),ut=i(55089),ct=i(50818),lt=i(97375),mt=i(92431),pt=i(87696),yt=i(40964),It=i(79640),ht=i(57101),gt=i(17941);const ft=(0,r.zo)("div",(t=>{let{$theme:e,$isOpen:i}=t;return{border:i?"none":`1px solid ${e.colors.quickAddButtonBorderColor}`,boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:e.borders.pillButtonBorderRadius}})),bt=(0,r.zo)("div",(t=>{let{$theme:e,$size:i}=t;return{..."small"===i?e.typography.LabelSmall:e.typography.LabelLarge,color:e.colors.quickAddButtonColor}})),At=(0,r.w1)(T.Z,(t=>{let{$theme:e,$size:i}=t;return{height:"small"===i?"32px":"36px",minWidth:"small"===i?"32px":"36px",minHeight:0,padding:"2px 4px",background:e.colors.quickAddButtonBackground,color:e.colors.quickAddButtonColor,":hover":{background:e.colors.quickAddButtonBackgroundHover},":active":{background:e.colors.quickAddButtonBackgroundActive}}}));function Ut(t){let{storeId:e,isDisabled:i,size:r,storeItem:n,sectionUUID:s,subsectionUUID:d,onQuickAddClicked:c,sourceType:y,resultIndex:g,searchTerm:f,analytics:C,itemQuantityInCart:T,onProductQuantityUpdated:D,actionUrl:v}=t;const S=(0,p.ZP)(),[B,L]=(0,a.useState)(!1),O=(0,U.T)(),[q,E]=o.useState(!1),N=o.useRef(null),_=(0,b.TH)(),z=(0,b.UO)(),{storeSlug:P}=(0,u.WxO)(z),$=(0,m.k6)(),M=(0,a.useCallback)((()=>{L(!0),setTimeout((()=>{E(!1),L(!1)}),200)}),[]);(0,R.Z)(N,(()=>{q&&M()}),!0);const F=(0,w.Z)(),G=!(0,It.l2)(F),W=n.uuid??"",V=n.purchaseInfo?.purchaseOptions?.[0],H=(0,a.useMemo)((()=>{switch(T?.type){case"WEIGHT":case"UNIT":return T;case"UNKNOWN":default:{const t="MEASUREMENT_TYPE_WEIGHT"===V?.soldByUnit?.measurementType?"WEIGHT":"UNIT",e="UNIT"===t?h.Tf.from(I.wI.minimumQuantity).toBaseDecimal():h.Tf.from(V?.quantityConstraintsV2?.minPermitted??I.wI.minimumQuantity).toBaseDecimal(),i=h.Tf.from(V?.quantityConstraintsV2?.maxPermitted??I.wI.maximumQuantity).toBaseDecimal(),a=V?.itemQuantityAbbreviation??"",o=h.Tf.from(V?.quantityConstraintsV2?.increment??I.wI.incrementQuantity).toBaseDecimal(),r=T?.totalQuantityWithCustomizations;return{type:t,suffix:a,step:o,currentQuantity:T?.currentQuantity??h.Tf.from(0).toBaseDecimal(),totalQuantityWithCustomizations:r,maxQuantity:i,minQuantity:e}}}}),[T,V]),{...K}=(0,et.W)(),{deliveryTime:X,hasActiveDraftOrderMetadata:j}=(0,it.Z)(e),{isInMulticart:Y}=(0,at.Z)(),J=(0,ot.Z)(),{handledHighCapacityOrderIntent:ut}=(0,rt.Z)(),{store:gt}=(0,l.ZP)(e,{cacheOnly:!0}),Ut=(0,a.useMemo)((()=>(0,ct.TG)(gt.data||void 0)),[gt.data]),kt=ut?.hhcOrderSize||(0,nt.vD)(gt.data?.groupOrderSizes||void 0)?.hhcOrderSize,{deliveryInstructions:Ct}=(0,st.pK)(),Tt=Ct.data?.selectedInstruction?.interactionType||Ct.data?.preferredInteractionType||dt.$$.interactionType,{outOfItemAction:Dt}=(0,Q.Z)(),vt=Y&&!j,St=n.hasCustomizations,Bt=v?(0,ht.HX)(_,v):(0,u.yz4)({location:_,args:{sectionUuid:s,subsectionUuid:d,itemUuid:W,storeUuid:e||"",storeSlug:gt.data?.slug||P||""}}),Lt=(0,mt.Z)(),xt=(0,pt.PJ)(Lt),{storeCatalogSections:Ot,entryPoint:qt,originalCatalogSectionUuid:Rt,primaryDraftOrderUUID:Zt}=(0,u.RAN)(_,["storeCatalogSections","entryPoint","originalCatalogSectionUuid","primaryDraftOrderUUID"]),Et=()=>{if(gt.data?.fulfillmentIssueOptions&&Dt)return{type:Dt,itemSubstitutes:[]};if(gt.data?.fulfillmentIssueOptions){const t=gt.data.fulfillmentIssueOptions?.resolutionActions,e=t?.find((t=>t.isDefault));if(e&&null!==e.action)return e?.action}},Nt=(0,a.useCallback)((t=>{const i=h.Tf.from(H.currentQuantity),a=h.Tf.from(t).subtract(i).isGt(0)?"increment":"decrement",o="itemAvailabilityState"in n&&n.itemAvailabilityState===Z.F8.LIKELY_UNAVAILABLE;S("eats:quick_add_button_tap",{isNewCartAbstraction:!0,quickAddOperation:{storeUuid:e,itemUuid:W,previousQuantity:i.toFloat(),updatedQuantity:h.Tf.from(t).toFloat(),operationType:a,searchTerm:f||"",lowAvailabilityItemUuid:o?W:"",catalogSectionUuid:s,sectionUuid:s,subsectionUuid:d,...y?{sourceType:y}:{},...C?.catalogSection?{catalogSectionAnalyticsData:C.catalogSection}:{}},analyticsLabel:"analyticsLabel"in n&&n.analyticsLabel?n.analyticsLabel:void 0}),"increment"===a&&"itemAd"in n&&S("ads:storefront_store_click",{adsAnalyticsEvent:{adEventType:x.J.CLICK,adImpressionUUID:n.itemAd?.impressionId||"",adData:n.itemAd?.adData||"",bidderUUID:e}})}),[C,S,H.currentQuantity,f,s,y,e,n,W,d]),_t=(0,a.useCallback)((async t=>{0===t.base&&M();const e={price:Number(n.price),customizationsList:[],images:null,nutritionalInfo:null,itemPromotionV2:{promoText:null,availablePromotion:null,appliedPromotion:null,promotionData:null},itemDescription:n.itemDescription??""},i=Ot?"l2":"l1",a="catalogItemAnalyticsData"in n&&n.catalogItemAnalyticsData?.catalogSectionItemPosition?n.catalogItemAnalyticsData?.catalogSectionItemPosition:-1,o={storeAnalytics:Ut,isDelegatedBooking:K.isDelegatedBooking,deliveryTime:"object"==typeof X&&"scheduled"in X?lt.s.scheduled:lt.s.asap,menuItem:e,diningMode:xt,catalogItemLevel:i,surfaceType:y,itemPosition:a,resultIndex:g,storeAvailabilityState:gt.data?.storeInfoMetadata?.storeAvailablityStatus?.state??"UNKNOWN",entryPoint:qt,storeVerticalType:gt.data?(0,yt.E)(gt.data):void 0,storeCatalogSectionAnalytics:C?.catalogSection,originalCatalogSectionUuid:Rt};Nt(t),D({newQuantity:{...H,currentQuantity:t},analyticsRelevantData:o,delegatedBooking:K,deliveryTime:X,isInMulticart:Y,storeCurrencyCode:gt.data?.currencyCode??"USD",selectedVoucher:J,hhcOrderSize:kt,interactionType:Tt,fulfillmentIssueAction:Et(),shouldUpdateDraftOrderMetadata:vt})}),[Nt]),zt=(0,a.useCallback)((t=>{c&&c(),G||(t.stopPropagation(),t.preventDefault(),St||Boolean(Zt)?$.push(Bt):(E(!0),T||_t(H.minQuantity)))}),[T,G,_t,H,E,$,Bt,St,c,Zt]),Qt=h.Tf.from(St?H.totalQuantityWithCustomizations??H.currentQuantity:H.currentQuantity);return(0,A.tZ)(ft,{onClick:zt,ref:N,$isOpen:q,children:q?(0,A.tZ)(tt,{onQuantityUpdated:_t,size:r,quantity:H,closeAnimation:B,isDisabled:i}):(0,A.tZ)(At,{"data-testid":"quick-add-button",disabled:i,"aria-label":O("quick_add"),radius:"pillButtonBorderRadius",$size:r,children:Qt.isGt(0)?(0,A.tZ)(bt,{$size:r,children:`${Qt.toFloat()}${H.suffix}`}):(0,A.tZ)(k.Z,{name:"PlusSmallFilled",size:"small"===r?16:20})})})}const kt=o.memo(Ut,((t,e)=>t.itemQuantityInCart===e.itemQuantityInCart)),Ct=t=>{const e=(0,K.j)({getCartFrom:"storeId",storeId:t.storeId}),i=(0,a.useRef)(e);i.current=e;const o=(0,gt.W)({getCartFrom:"storeId",storeId:t.storeId,selector:e=>e.rawCartData?.cartQuantities?.[t.storeItem.uuid??""]}),r=(0,d.v)((t=>{let{checkout:e}=t;return e})),n=(0,p.ZP)(),s=(0,a.useCallback)((async e=>{let{newQuantity:a,analyticsRelevantData:o,delegatedBooking:s,deliveryTime:d,isInMulticart:u,storeCurrencyCode:c,selectedVoucher:l,hhcOrderSize:m,interactionType:p,fulfillmentIssueAction:y,shouldUpdateDraftOrderMetadata:I}=e;try{switch(i.current.status){case"MISSING":case"DELETING":await i.current.actions.editQuantityInCart({cartItem:{uuid:t.storeItem.uuid||"",shoppingCartItemUuid:(0,ut.Z)(),storeUuid:t.storeId,sectionUuid:t.sectionUUID,subsectionUuid:t.subsectionUUID,price:Number(t.storeItem.price),title:String(t.storeItem.title),quantity:h.Tf.from(a.currentQuantity).toFloat(),customizations:{},imageURL:String(t.storeItem.imageUrl),specialInstructions:"",fulfillmentIssueAction:y,pricedByUnit:t.storeItem.purchaseInfo?.pricingInfo?.pricedByUnit,soldByUnit:t.storeItem.purchaseInfo?.purchaseOptions?.[0]?.soldByUnit},startingQuantity:a,analyticsRelevantData:o,checkoutReducer:r,delegatedBooking:s,deliveryTime:d,hasDelegatedBookingDraftOrder:!1,isMulticart:u,selectedVoucher:l,sourceFeature:"add-to-cart",storeCurrencyCode:c,actionMeta:{isQuickAdd:!0},hhcOrderSize:m,eventSource:"quick_add",interactionType:p});break;case"CREATING":case"AVAILABLE":case"SYNCING":await i.current.actions.editQuantityInCart({item:{type:"store",storeItemId:t.storeItem.uuid??"",storeId:t.storeId,shouldUpdateDraftOrderMetadata:I,cartItem:{uuid:t.storeItem.uuid||"",shoppingCartItemUuid:(0,ut.Z)(),storeUuid:t.storeId,sectionUuid:t.sectionUUID,subsectionUuid:t.subsectionUUID,price:Number(t.storeItem.price),title:String(t.storeItem.title),quantity:h.Tf.from(a.currentQuantity).toFloat(),customizations:{},imageURL:String(t.storeItem.imageUrl),specialInstructions:"",fulfillmentIssueAction:y,pricedByUnit:t.storeItem.purchaseInfo?.pricingInfo?.pricedByUnit,soldByUnit:t.storeItem.purchaseInfo?.purchaseOptions?.[0]?.soldByUnit},newQuantity:a},actionMeta:{isQuickAdd:!0,quickAddSource:t.quickAddSource},analyticsRelevantData:o,eventSource:"quick_add"})}}catch(e){n("eats:store_quick_add_error",{storeUuid:t.storeId,error:e})}}),[]);return"LOADING"===e.status||"OUTDATED"===e.status?null:(0,A.tZ)(kt,{...t,itemQuantityInCart:o,onProductQuantityUpdated:s})},Tt=t=>{const e=(0,H.l)(),{isGroupOrder:i,isEditOrder:a}=(0,E.Dz)(),{isDelegatedBooking:o}=(0,et.W)();return!e||i||a||o?(0,A.tZ)(V,{...t}):(0,A.tZ)(Ct,{actionUrl:t.actionUrl,storeId:t.storeUUID,size:t.size??"large",storeItem:t.item,sectionUUID:t.sectionUUID,subsectionUUID:t.subsectionUUID,onQuickAddClicked:t.onClickEvent,sourceType:t.sourceType,searchTerm:t.searchTerm,quickAddSource:t.quickAddSource,resultIndex:t.resultIndex,analytics:t.analytics})}},37566:(t,e,i)=>{i.d(e,{$:()=>l});var a=i(36151),o=i(70247),r=i(53176),n=i(64388),s=i(33967),d=i(32830),u=i(6703),c=i(58984);const l=t=>{let{storeUuid:e,item:i,quantity:l,sectionUuid:m,subsectionUuid:p,onAddedToCart:y,decimalQuantity:I,quickAddSource:h}=t;const g=(0,c.I0)(),{store:f}=(0,n.ZP)(e),b=(0,s.Z)(!0),{serverCart:A}=(0,o.iQ)(),U=A.data?.groupedItems,k=(0,a.useMemo)((()=>(((U||[]).find((t=>t.isCurrentUser))||{}).items||[]).filter((t=>t.uuid===i.uuid))),[U,i.uuid]),C=(0,a.useMemo)((()=>(0,d.Z)(k.map((t=>{let{quantity:e}=t;return e})))),[k]),T=(0,a.useMemo)((()=>k.sort(((t,e)=>new Date(e.createdTimestamp??0)-new Date(t.createdTimestamp??0)))),[k]),D=i.isLegacy?i.description:i.itemDescription,v={error:null,hasLoaded:!0,isLoading:!1,data:{price:Number(i.price),title:String(i.title),uuid:i.uuid||"",hasCustomizations:!1,customizationsList:[],imageUrl:String(i.imageUrl),imageWatermarkContent:null,images:null,nutritionalInfo:null,suspendReason:null,suspendUntil:0,itemPromotion:null,itemPromotionV2:{promoText:null,availablePromotion:null,appliedPromotion:null,promotionData:null},rules:null,sectionUuid:m,subsectionUuid:p,itemDescription:D??"",purchaseInfo:i.purchaseInfo}},S="itemAd"in i?i.itemAd:null,{addToCart:B}=(0,r.Z)({store:f,menuItem:v,selectedCustomizations:{},quantity:l,specialInstructions:"",onAddedToCart:y,decimalQuantity:I,itemAd:S}),L=Boolean(A.hasLoaded&&f.hasLoaded&&A?.data?.items?.length&&A?.data?.storeUuid!==f?.data?.uuid),x=(0,a.useCallback)(((t,e)=>{const i=(t,e)=>{e?b(e,t,{isQuickAdd:!0}):B({isStartingNewOrder:L,eventSource:"quick_add",actionMeta:{isQuickAdd:!0,quickAddSource:h}})};if("number"==typeof t){if(t>C){i(t,T[0]?.shoppingCartItemUuid)}else if(t<C){let e=C-t;for(const t of T){if(t.quantity>=e){i(t.quantity-e,t.shoppingCartItemUuid);break}i(0,t.shoppingCartItemUuid),e-=t.quantity}}}else{const e=T[0];t.base<=0?i(0,e?.shoppingCartItemUuid):i(t,e?.shoppingCartItemUuid)}g((0,u.OA)())}),[B,C,g,L,h,T,b]);return{addToCart:B,onUpdateQuantity:x,isNewSingleCart:L,cartItemMatch:k,cartItemQuantity:C,serverCart:A}}},78979:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(60849),o=i(41063);function r(){return(0,a.ip)({...o.v.store_quick_add,defaultValue:!0})}},32762:(t,e,i)=>{i.d(e,{Z:()=>d});var a=i(60849),o=i(41063),r=i(99990),n=i(54669),s=i(34626);const d=()=>{const t=(0,a.ip)({...o.v.store_ofd_redesign,defaultValue:!1}),e=(0,a.ip)({...o.v.store_ofd_redesign_phase_2,defaultValue:!1}),i=(0,a.ip)({...o.v.store_ofd_redesign_phase_3,defaultValue:!1}),d=(0,a.ip)({...o.v.store_rating_redesign,defaultValue:!1}),u=(0,a.ip)({...o.v.store_ofd_redesign_search_results,defaultValue:!1}),{isGrStore:c,store:l}=(0,r.QT)(),{user:m}=(0,s.Z)(),p=m.data?.isLoggedIn,y=(0,n.Z)(),I=Boolean(!c&&e&&!y&&!p),h=Boolean(!c&&i&&!p),g=Boolean(!c&&i&&p),f=I||h,b=I||h||g,A=b,U=b,k=I||h,C=I||h,T=d&&b,D=I||h,v=g,S=Boolean(l?.data)&&u&&(I||h||g),B=I||h||g,L=g,x=I||h||g,O=g,q=g,R=!c&&"NEW_VERTICALS"===l?.data?.headerBrandingInfo?.headerType&&A,Z=Boolean((l?.data?.featuredReviews?.length||0)>=2&&l?.data?.rating);return{isStoreOfdRedesignXpEnabled:t,isStoreOfdRedesignPhase2XpEnabled:e,isStoreOfdRedesignPhase3XpEnabled:i,isStoreRatingRedesignEnabled:d,isStoreOfdRedesignSearchResultsEnabled:u,desktopFeatures:{hasStickyHorizontalMenuNav:D,hasStickyVerticalMenuNav:v,hasStoreInfoSection:f,hasNewHeader:A,hasNewPageWrapper:b,hasDisclaimerAtBottom:U,hasNewBreadcrumbs:k,hasNewFaqSection:C,hasNewReviewsLayout:T,hasNewInStoreSearch:S,overwriteHorizontalGridColumns:B,moveTopExploreMoreStoresToCatalog:L,horizontalGridColumns:I||h?5:4,hasNewLoader:x,isLegacyHeaderWithBrandingInfo:R,storeInfoConfig:{infoCardOrientation:Z?"portrait":"landscape",showBrandingInfoAndControls:Boolean(!Z&&y&&!R),showDescription:Boolean(l?.data?.seoMeta?.content&&!l?.data?.optoutRestaurantExperiments?.optoutMenuExperiments?.optoutAllExperiments),showReviews:Z},hasDeliveryRowControls:O,hasStoreBannersInCatalogColumn:q}}}},13427:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(60849),o=i(41063);const r=()=>(0,a.ip)({...o.v.store_quick_add_enhancement,defaultValue:!1})},68093:(t,e,i)=>{i.d(e,{Z:()=>o});var a=i(36151);function o(t,e){const[i,o]=(0,a.useState)(t);return(0,a.useEffect)((()=>{const i=setTimeout((()=>{o(t)}),e);return()=>{clearTimeout(i)}}),[e,t]),i}},45631:(t,e,i)=>{i.d(e,{Z:()=>a});const a=function(t,e){const i=null==t?0:t.length;if(!i||e<1)return[];let a=0,o=0;const r=new Array(Math.ceil(i/e));for(;a<i;)r[o++]=t.slice(a,a+=e);return r}},47091:(t,e,i)=>{i.d(e,{k:()=>a});const a="@media all and (-ms-high-contrast: none), (-ms-high-contrast: active)"}}]);