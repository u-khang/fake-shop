"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[48005],{21213:(e,t,i)=>{i.d(t,{Z:()=>s});var d=i(70589),n=i(47073),o=i(52298),a=i(33990);const s=e=>{const{actions:t,selectedDate:i,selectedTimeRange:s,onClose:r,onSchedule:l,onTimeFinalized:m,onAsap:c,onTimeAsap:u}=e;return(0,a.tZ)(d.m,{children:t.map(((e,d)=>"buttonViewModel"===e.viewModel?.type?(0,a.BX)("div",{"data-testid":"schedule-modal-button",children:[(0,a.tZ)(n.Z,{isDisabled:!("TIME_WINDOW_SELECTED"!==e.availability||i&&s),onClick:()=>(e=>{if(e)switch(e.type){case"SCHEDULE":l(),m();break;case"ASAP":c(),u();break;case"CANCEL":r()}})(e.action),viewModel:{...e.viewModel.buttonViewModel,isEnabled:void 0}}),d===t.length-1?null:(0,a.tZ)(o.ZP,{$height:8})]},e.action?.type):null))})}},44917:(e,t,i)=>{i.d(t,{Z:()=>u});var d=i(36151),n=i(91931),o=i(68561),a=i(61089),s=i(31913),r=i(33990);const l=(0,n.zo)("div",{display:"flex",justifyContent:"space-between"}),m=(0,n.zo)("div",{display:"flex",flexDirection:"column",justifyContent:"center"}),c=(0,n.zo)("div",{padding:"24px 16px 8px"}),u=e=>{const{listItems:t,selectedDate:i,selectedTimeRange:n,onTimeRangeChange:u}=e,w=(0,d.useRef)(null);return(0,d.useEffect)((()=>{w&&w.current&&w.current.scrollIntoView({behavior:"auto",block:"center"})}),[w]),(0,r.tZ)(o.Z,{value:JSON.stringify(n),onChange:e=>u(e),name:"time-picker-options",labelPlacement:"left",children:t.filter((e=>"timeWindowViewModel"!==e.type||e.timeWindowViewModel.timeWindow?.date===i)).map((e=>{switch(e.type){case"timeWindowViewModel":{const t=e.timeWindowViewModel.text,d=e.timeWindowViewModel.secondaryText,o=e.timeWindowViewModel.tertiaryText,c=e.timeWindowViewModel.timeWindow?.startTime,u=e.timeWindowViewModel.timeWindow?.startTimeSeconds,T=e.timeWindowViewModel.timeWindow?.endTime,p=JSON.stringify({startTime:c,startTimeMs:"number"==typeof u?1e3*u:void 0,endTime:T});return(0,r.tZ)(a.Y8,{disabled:"DISABLED"===e.timeWindowViewModel.viewState,overrides:{Root:{style:e=>{let{$theme:t}=e;return{marginTop:0,marginBottom:0,padding:"24px 16px",width:"100%",boxSizing:"border-box",display:"flex",justifyContent:"space-between",borderBottom:`1px solid ${t.colors.borderOpaque}`}}},Label:{style:()=>({flexGrow:1})}},value:p,children:(0,r.BX)(l,{"data-testid":"delivery-time-radio",ref:n?.startTime===c&&n?.endTime===T?w:null,children:[(0,r.BX)(m,{children:[t?(0,r.tZ)(s.ZP,{text:t}):null,d?(0,r.tZ)(s.ZP,{text:d}):null]}),(0,r.tZ)(m,{children:o?(0,r.tZ)(s.ZP,{text:o}):null})]})},`${i}-${c}-${T}`)}case"labelViewModel":{const t=e.labelViewModel.text;return t?(0,r.tZ)(c,{children:(0,r.tZ)(s.ZP,{text:t})}):null}}return""}))})}},66880:(e,t,i)=>{i.d(t,{Z:()=>r});var d=i(36151),n=i(41639),o=i(58984),a=i(8057),s=i(50862);function r(e){let{entryPoint:t,initialSelectedTimeOption:i,onTimeOptionSelected:r}=e;const l=(0,o.I0)(),[m,c]=(0,d.useState)(),[u,w]=(0,d.useState)(),T=(0,d.useCallback)((e=>{const t=function(e,t){const i="date"in e?e.date:null,d=t.dates?.find((e=>e.date===i));if(i&&d?.listItems)return i;const n=t.dates?.find((e=>"PRIMARY"===e.viewState));return n?n.date:null}(i,e);c(t),w(function(e,t,i,d){if("date"in t&&e===t.date&&d){const e=d.find((e=>{if("timeWindowViewModel"===e.type){const i=e.timeWindowViewModel.timeWindow;return i?.startTime===t.startTime&&i?.endTime===t.endTime}}));if("timeWindowViewModel"===e?.type){const t=e.timeWindowViewModel?.timeWindow;return{startTime:t?.startTime||0,startTimeMs:"number"==typeof t?.startTimeSeconds?1e3*t.startTimeSeconds:void 0,endTime:t?.endTime||0}}}else if(i&&d){const e=d.find((e=>{if("timeWindowViewModel"===e.type)return e.timeWindowViewModel.timeWindow?.timeWindowID===i}));if("timeWindowViewModel"===e?.type){const t=e.timeWindowViewModel?.timeWindow;return{startTime:t?.startTime||0,startTimeMs:"number"==typeof t?.startTimeSeconds?1e3*t.startTimeSeconds:void 0,endTime:t?.endTime||0}}}return null}(t,i,e.selectedTimeWindowID,e.dates?.find((e=>e.date===t))?.listItems))}),[c,w,i]),{timeWindowPicker:p}=(0,s.Z)({entryPoint:t,initializeTimeWindowPicker:T});return{timeWindowPicker:p,selectedDate:m,selectedTimeRange:u,onDateChange:e=>{if(c(e.date),u){const t=e.listItems?.find((e=>{if("timeWindowViewModel"===e.type){const t=e.timeWindowViewModel.timeWindow;return t?.startTime===u.startTime&&t?.endTime===u.endTime}}));if(t&&"timeWindowViewModel"===t.type){const e=t.timeWindowViewModel.timeWindow?.startTime??0,i=t.timeWindowViewModel.timeWindow?.startTimeSeconds??0,d=t.timeWindowViewModel.timeWindow?.endTime??0;w({startTime:e,startTimeMs:1e3*i,endTime:d})}else w(null)}},onTimeRangeChange:e=>{try{const{startTime:t,startTimeMs:i,endTime:d}=JSON.parse(e.target.value);w({startTime:t,startTimeMs:i,endTime:d})}catch(e){}},onTimeFinalized:()=>{if(m&&u){const e={scheduled:!0,date:m,startTime:u.startTime,startTimeMs:u.startTimeMs,endTime:u.endTime};(0,n.O)(i,e)||l((0,a.hW)()),r(e)}},onTimeAsap:()=>{"asap"in i||l((0,a.hW)()),r({asap:!0})}}}},50862:(e,t,i)=>{i.d(t,{Z:()=>s});var d=i(36151),n=i(64388),o=i(54176),a=i(27871);function s(e){let{entryPoint:t,initializeTimeWindowPicker:i,forceLoadCheckoutPresentation:s}=e;const r=(0,d.useRef)(s??!1),[l,m]=(0,d.useState)({data:null,error:null,hasLoaded:!1,isLoading:!1}),c="CHECKOUT"===t.type,u="STORE"===t.type,w="FEED"===t.type,{feed:T,shouldGetFeed:p,getFeed:f}=(0,o.Z)(),h=T.data?.timeWindowPicker,{store:W,shouldGetStore:y,getStore:M}=(0,n.ZP)("FEED"!==t.type?t.storeUuid:void 0),g=W.data?.timeWindowPicker,S=(0,a.CF)(),Z=S.data?.checkoutPayloads?.timeWindowPicker?.timeWindowPickerViewModel,b=(0,d.useCallback)((e=>{m({data:e,hasLoaded:!0,isLoading:!1,error:null}),i&&i(e)}),[m,i]),v=(0,d.useCallback)((()=>{m({data:null,hasLoaded:!0,isLoading:!1,error:null})}),[m]),V=(0,d.useCallback)((()=>{m({data:null,hasLoaded:!1,isLoading:!0,error:null})}),[m]);return(0,d.useEffect)((()=>{w&&p&&f()}),[w,p,f]),(0,d.useEffect)((()=>{u&&y&&M()}),[u,y,M]),(0,d.useEffect)((()=>{c&&r.current&&r.current&&(r.current=!1)}),[c,r]),(0,d.useEffect)((()=>{S.hasLoaded&&c?Z?b(Z):W.hasLoaded&&g?b(g):v():W.hasLoaded&&u?g?b(g):v():T.hasLoaded&&w?h?b(h):v():(S.isLoading||W.isLoading||T.isLoading)&&V()}),[b,v,V,S.hasLoaded,S.isLoading,W.hasLoaded,W.isLoading,T.hasLoaded,T.isLoading,c,u,w,Z,g,h]),{timeWindowPicker:l}}},88464:(e,t,i)=>{i.d(t,{Z:()=>f});var d=i(36151),n=i(91631),o=i(62149),a=i(58984),s=i(47986),r=i(74057),l=i(92431),m=i(87696),c=i(33535),u=i(7876),w=i(86255),T=i(83960),p=i(69630);function f(e){let{encodedStoreUuid:t,entryPoint:i}=e;const f=(0,l.Z)(),h=(0,o.TH)(),W=(0,a.I0)(),y=(0,n.k6)(),M=(0,c.ZP)(),g=(0,w.Z)({encodedStoreUuid:t}),{storeUuid:S,isEditOrder:Z}=(0,T.Z)(),{deliveryTime:b,hasActiveDraftOrderMetadata:v}=(0,r.Z)(g),V=(0,p.Z)();return(0,d.useEffect)((()=>{M("eats:scheduled_order_modal",{entryPoint:i,isRedesign:!0})}),[M,i]),{storeUuid:g,deliveryTime:b,onTimeOptionSelected:e=>{V&&v?W((0,u.A0)(S,{storeScheduledTime:e})):g?W((0,u.A0)(g,{storeScheduledTime:e})):(0,m.mE)(f,e),y.replace((0,s.C45)((0,s.UPU)(h,e)))},onClose:()=>{M("eats:dismiss_scheduled_order_modal"),y.replace((0,s.C45)(h))},onSchedule:()=>{M("eats:scheduled_order_selection",{entryPoint:i,option:"scheduled",isEditScheduledOrder:Z,pathname:h.pathname,isRedesign:!0})},onAsap:()=>{M("eats:scheduled_order_selection",{entryPoint:i,option:"asap",isEditScheduledOrder:Z,pathname:h.pathname,isRedesign:!0})}}}},74537:(e,t,i)=>{i.d(t,{Z:()=>o});const d=["checkout","checkout-auto-surface","multicart"],n=["menu-item-dialog","old-store-top-card","store-auto-surface","store-hero-overflow","store-info-summary"],o=(e,t)=>d.includes(e)?{type:"CHECKOUT",storeUuid:t}:n.includes(e)?{type:"STORE",storeUuid:t}:{type:"FEED"}}}]);