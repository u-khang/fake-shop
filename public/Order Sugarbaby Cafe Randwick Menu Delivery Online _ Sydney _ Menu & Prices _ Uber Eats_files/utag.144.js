//tealium universal tag - utag.144 ut4.0.202406102048, Copyright 2024 Tealium.com Inc. All Rights Reserved.
window.yjDataLayer=window.yjDataLayer||[];function ytag(){yjDataLayer.push(arguments)}
try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.queue=[];u.map={};u.extend=[];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:144");utag.DB(data_layer);var a,b,c,d;a=utag_event;b=data_layer;u.data={"base_url":"https://s.yimg.jp/images/listing/tool/cv/ytag.js","auto_tagging":"true","type":"","yahoo_ydn_conv_io":"","yahoo_ydn_conv_label":"","yahoo_ydn_conv_transaction_id":"","yahoo_ydn_conv_value":"","yahoo_retargeting_id":"","yahoo_retargeting_label":"","yahoo_retargeting_page_type":"","yahoo_retargeting_items":[],"item_id":"","category_id":"","price":"","quantity":"","yahoo_conversion_id":"","yahoo_conversion_label":"","yahoo_conversion_value":"","yahoo_ss_retargeting_id":"","yahoo_sstag_custom_params":{},"order_id":"","order_subtotal":"","product_id":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"event_queue":[]};utag.DB("send:144:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(var i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:144:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_subtotal=u.data.order_subtotal||data_layer._csubtotal||"";if(u.data.product_id.length===0&&data_layer._cprod!==undefined){u.data.product_id=data_layer._cprod.slice(0);}
if(u.data.product_category.length===0&&data_layer._ccat!==undefined){u.data.product_category=data_layer._ccat.slice(0);}
if(u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&data_layer._cprice!==undefined){u.data.product_unit_price=data_layer._cprice.slice(0);}
if(isTrue(u.data.auto_tagging)){ytag({type:"ycl_cookie"});}
u.data.item_id=u.data.item_id||u.data.product_id;u.data.category_id=u.data.category_id||u.data.product_category;u.data.price=u.data.price||u.data.product_unit_price;u.data.quantity=u.data.quantity||u.data.product_quantity;u.data.event_queue.forEach(function(type){var i,j,id,label,yj_data,id_list=[],label_list=[];if(/yjad_conversion|yjad_retargeting|yss_conversion/.test(type)){if(type==="yjad_conversion"){id_list=u.data.yahoo_ydn_conv_io.split(",");label_list=u.data.yahoo_ydn_conv_label.split(",");}else if(type==="yjad_retargeting"){id_list=u.data.yahoo_retargeting_id.split(",");label_list=u.data.yahoo_retargeting_label.split(",");}else if(type==="yss_conversion"){id_list=u.data.yahoo_conversion_id.split(",");label_list=u.data.yahoo_conversion_label.split(",");}
if(id_list.length===0){utag.DB(u.id+": No conversion or retargeting ID was provided for this tag type. No tracking will occur.");return;}
for(i=0;i<id_list.length;i++){id=id_list[i];if(id_list.length===label_list.length){yj_data={};yj_data.type=type;label=label_list[i];yj_data.config=createConfigObject(type,id,label);ytag(yj_data);}else if(label_list.length===1){yj_data={};yj_data.type=type;label=label_list[0];yj_data.config=createConfigObject(type,id,label);ytag(yj_data);}else if(id_list.length===1&&label_list.length>1){for(j=0;j<label_list.length;j++){yj_data={};yj_data.type=type;label=label_list[j];yj_data.config=createConfigObject(type,id,label);ytag(yj_data);}
}else{utag.DB(u.id+": The provided label(s) do not properly match against the conversion or retargeting ID(s). No tracking will occur.");continue;}}
}else{if(type==="yss_retargeting"){id_list=u.data.yahoo_ss_retargeting_id.split(",");for(i=0;i<id_list.length;i++){yj_data={};yj_data.type=type;id=id_list[i];yj_data.config=createConfigObject(type,id);ytag(yj_data);}
}else{yj_data={};yj_data.type=type;yj_data.config=createConfigObject(type);ytag(yj_data);}}});if(!u.scriptrequested){u.scriptrequested=true;utag.ut.loader({type:"script",src:u.data.base_url,cb:null,loc:"script",id:"utag_144",attrs:{}});}
utag.DB("send:144:COMPLETE");}};function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
function clearEmptyKeys(object){for(var key in object){if(object[key]===""||object[key]===undefined){delete object[key];}}
return object;}
function createItemCollection(){var i,collection=[],item_props={};u.data.product_id.forEach(function(){item_props.item_id=u.data.item_id;item_props.category_id=u.data.category_id;item_props.price=u.data.price;item_props.quantity=u.data.quantity;});collection.push(item_props);return collection;}
function isTrue(input){if(typeof input==="boolean"){return input;}else if(typeof input==="string"){if(input.toLowerCase()==="true"){return true;}else{return false;}}else{return false;}}
function createConfigObject(type,id,label){var config_object;if(type==="yjad_conversion"){config_object={yahoo_ydn_conv_io:id,yahoo_ydn_conv_label:label,yahoo_ydn_conv_transaction_id:u.data.yahoo_ydn_conv_transaction_id,yahoo_ydn_conv_value:u.data.yahoo_ydn_conv_value};}else if(type==="yjad_retargeting"){config_object={yahoo_retargeting_id:id,yahoo_retargeting_label:label,yahoo_retargeting_page_type:u.data.yahoo_retargeting_page_type,yahoo_retargeting_items:(u.data.yahoo_retargeting_items.length>0)?u.data.yahoo_retargeting_items:createItemCollection()};}else if(type==="yss_conversion"){config_object={yahoo_conversion_id:id,yahoo_conversion_label:label,yahoo_conversion_value:u.data.yahoo_conversion_value};}else if(type==="yss_retargeting"){config_object={yahoo_ss_retargeting_id:id,yahoo_sstag_custom_params:u.data.yahoo_sstag_custom_params};}else{config_object={};}
if(typeof u.data[type]==="object"){Object.keys(u.data[type]).forEach(function(key){config_object[key]=u.data[type][key];});}
config_object=clearEmptyKeys(config_object);return config_object;}
utag.o[loader].loader.LOAD(id);}("144","uber.eatsv2"));}catch(error){utag.DB(error);}
