"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[38570],{51628:(e,t,r)=>{r.d(t,{Z:()=>N});var o=r(36151),i=r(62149),n=r(14016),l=r(91931),s=r(41878),d=r(43193),c=r(79908),a=r(13865);var h=r(94024),u=r.n(h),p=r(31913),g=r(33990);const Z=(0,l.zo)("div",{display:"flex",flexDirection:"column",minWidth:0}),y=(0,l.zo)("div",(e=>({borderRadius:"50%",width:"36px",height:"36px",backgroundImage:`url(${u()(e.$src)})`,backgroundSize:"cover",flexShrink:0}))),x=(0,l.zo)("div",{maxWidth:"100%",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),b=(0,l.w1)(x,(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),f=(0,l.w1)(x,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary}})),m=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary,display:"inline"}})),B=(0,l.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{...t.typography.LabelMedium,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,height:"100%",overflow:"hidden",boxSizing:"border-box",...r?{borderBottom:`1px solid ${t.colors.borderOpaque}`}:{}}})),w=(0,l.zo)("div",(e=>{let{$isGrayedOut:t}=e;return{display:"flex",width:"100%",height:"100%",alignItems:"center",opacity:t?.6:void 0}})),S=(0,l.zo)("div",{width:"64px",height:"72px",display:"flex",flexGrow:0,flexShrink:0,boxSizing:"border-box",justifyContent:"center",alignItems:"center"});function $(e){const t=function(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}(e.query),r=new RegExp(t,"gi");let o=r.exec(e.text),i=0;const n=[];for(;e.query.length>0&&null!==o;)o.index>i&&n.push(e.text.substring(i,o.index)),n.push((0,g.tZ)(m,{children:o[0]},i)),i=o.index+o[0].length,o=r.exec(e.text);return i<=e.text.length-1&&n.push(e.text.substring(i)),(0,g.tZ)(f,{children:n})}function v(e){return(0,g.BX)(w,{children:[(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Search"})}),(0,g.BX)(B,{$hasBorder:e.hasBorder,children:[(0,g.tZ)($,{text:e.title,query:e.query}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}function k(e){return(0,g.BX)(w,{children:[(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Time"})}),(0,g.BX)(B,{$hasBorder:e.hasBorder,children:[(0,g.tZ)(x,{children:e.title}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}function C(e){return(0,g.BX)(w,{children:[(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Search"})}),(0,g.BX)(B,{$hasBorder:e.hasBorder,children:[(0,g.tZ)(x,{children:e.title}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}function I(e){let{store:t,query:r,hasBorder:o}=e;const i=Boolean(t?.isOrderable),n=t?.heroImageUrl,l=t?.title||"",s=t?.meta1,d=t?.categories||[];return(0,g.BX)(w,{$isGrayedOut:!1===i,children:[(0,g.tZ)(S,{children:n?(0,g.tZ)(y,{$src:n}):null}),(0,g.BX)(B,{$hasBorder:o,children:[(0,g.BX)(Z,{children:[(0,g.tZ)($,{text:l,query:r}),s?(0,g.tZ)(p.ZP,{text:s}):(0,g.tZ)(b,{children:d.join(" â€¢ ")})]}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}function P(e){let{store:t,hasBorder:r}=e;const o=t?.heroImageUrl,i=t?.title;return(0,g.BX)(w,{children:[(0,g.tZ)(S,{children:o?(0,g.tZ)(y,{$src:o}):null}),(0,g.BX)(B,{$hasBorder:r,children:[(0,g.tZ)(Z,{children:(0,g.tZ)(m,{children:i})}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}function H(e){const t=(0,n.T)();return(0,g.BX)(w,{children:[(0,g.tZ)(S,{children:(0,g.tZ)(a.Z,{})}),(0,g.BX)(B,{$hasBorder:e.hasBorder,children:[(0,g.tZ)(f,{children:(0,g.tZ)(m,{children:t("search.your_past_orders_link")})}),(0,g.tZ)(S,{children:(0,g.tZ)(c.Z,{type:"Chevron",rotate:90,color:"contentStateDisabled"})})]})]})}var z=r(94579),q=r(33535);const X=function(e){const{suggestions:t,query:r}=e,i=(0,q.ZP)();o.useEffect((()=>{const e=t.filter((e=>"croStore"===e.type));!r&&e.length>0&&i("eats:search_bar_past_order_impression",{pastOrderStoreUuids:e.map((e=>e?.store?.uuid||"")).filter(Boolean)})}),[i,t,r])},O=(0,l.zo)("ul",(e=>{let{$theme:t,$isHidden:r}=e;return{background:t.colors.menuFill,position:"absolute",top:"100%",left:0,right:0,zIndex:z.I_.banner,borderColor:t.colors.borderOpaque,borderStyle:"solid",borderWidth:"0 1px 1px 1px",boxShadow:t.shadows.box,...r?{display:"none"}:{}}})),F=(0,l.zo)("li",(e=>({backgroundColor:e.$isHighlighted?e.$theme.colors.menuFillHover:"transparent",height:"72px",boxSizing:"border-box",cursor:"pointer",display:"flex",alignItems:"center",transition:z.pB.itemBackground,outline:"none",":hover":{background:e.$theme.colors.menuFillHover}}))),D=["pastOrdersLink","croStore","text","searchHistory","popularCategory","store"];const _=function(e){(e=>{const t=(0,q.ZP)(),r=(0,o.useRef)([]);(0,o.useEffect)((()=>{e.suggestions.length&&r.current!==e.suggestions&&(r.current=e.suggestions,t("eats:search_dropdown_impression",{userQuery:e.query,result:e.suggestions.map((e=>e.title||e?.store?.title||"")).join(",")}))}),[t,e.query,e.suggestions])})({query:e.query,suggestions:e.suggestions}),X({query:e.query,suggestions:e.suggestions});const t=e.suggestions.filter((e=>D.includes(e.type)));return e.suggestions.length?(0,g.tZ)(O,{...e.getMenuProps(),children:t.map(((r,o)=>{const i=o<t.length-1;return(0,g.BX)(F,{$isHighlighted:e.highlightedIndex===o,...e.getItemProps({index:o}),children:["pastOrdersLink"===r.type?(0,g.tZ)(H,{hasBorder:i}):null,"croStore"===r.type?(0,g.tZ)(P,{hasBorder:i,store:r.store}):null,"text"===r.type?(0,g.tZ)(v,{title:r.title,query:e.query,hasBorder:i}):null,"searchHistory"===r.type?(0,g.tZ)(k,{hasBorder:i,title:r.title}):null,"popularCategory"===r.type?(0,g.tZ)(C,{hasBorder:i,title:r.title}):null,"store"===r.type?(0,g.tZ)(I,{query:e.query,hasBorder:i,store:r.store}):null]},o)}))}):(0,g.tZ)(O,{...e.getMenuProps(),$isHidden:!0})};var M=r(48402),T=r(69404),L=r(53213);const R=(0,l.w1)(T.Z,(e=>({...e.$width?{width:`${e.$width}px`}:{}}))),U=(0,l.zo)("label",z.E2),Q=e=>{const t=d.useRef(null);(0,L.Z)(t,(()=>{e.onClickOutside&&e.onClickOutside()}),e.isOpen);const{query:r,results:o,isOpen:i,getInputProps:n,getMenuProps:l,openMenu:s,getItemProps:c,reset:a,highlightedIndex:h,placeholder:u,onFocus:p,onClose:Z,height:y,width:x,backgroundColor:b,getLabelProps:f}=e,m=i&&o?.data||[];return(0,g.BX)(R,{$width:x,ref:t,children:[(0,g.tZ)(U,{...f(),children:u}),(0,g.tZ)(M.Z,{onFocus:()=>{p&&p(),s()},query:r,getInputProps:n,reset:a,onClose:Z,placeholder:u,isLoading:!1,iconType:"Search",backgroundColor:b||"inputFill",height:y,borderStyle:"rounded"}),(0,g.tZ)(_,{query:r,suggestions:m,getMenuProps:l,getItemProps:c,highlightedIndex:h})]})},Y=e=>{const t=(0,n.T)(),r=(0,s.ZP)({initialQuery:e.initialQuery,onSuggestionSelected:e.onSelect,initialIsClosed:e.initialIsClosed,searchTypeaheadPlaceholder:t("shared.searchBarHintText")});return(0,g.tZ)(Q,{onClose:e.onClose,onFocus:e.onFocus,onClickOutside:e.onClickOutside,height:48,...r})};var E=r(47986),G=r(40606),j=r(54176);const W=(0,l.zo)("div",{flexGrow:1}),N=e=>{const{onFocus:t}=e,r=(0,i.TH)(),{userQuery:l}=(0,E.RAN)(r,["userQuery"]),s=(0,n.T)(),d=(0,q.ZP)(),c=o.useCallback((()=>{d("eats:search_bar_click"),t()}),[d,t]),{feed:a}=(0,j.Z)(),h=(0,g.tZ)(W,{role:"search","aria-label":s("shared.searchBarHintText"),"data-testid":"header-desktop-search-input",children:(0,g.tZ)(Y,{initialIsClosed:!0,onFocus:c,onClickOutside:e.clickOutside,initialQuery:l})});return(0,g.tZ)(G.Z,{source:a,error:()=>null,loaded:e=>!1===e.isInServiceArea?(0,g.tZ)(W,{}):h,loading:()=>h})}},38570:(e,t,r)=>{r.d(t,{ZP:()=>M});var o=r(91931),i=r(36278),n=r(15208),l=r(80165),s=r(93866),d=r(83563),c=r(96965),a=r(28222),h=r(92839),u=r(639),p=r(51628),g=r(4525),Z=r(9071),y=r(54669),x=r(52419),b=r(34626),f=r(54403),m=r(49757),B=r(69630),w=r(54176),S=r(60582),$=r(55758),v=r(46280),k=r(46857),C=r(27769),I=r(33535),P=r(20464),H=r(929),z=r(33990);const q=(0,o.w1)(n.Z,(e=>{let{$theme:t,$headerHeight:r}=e;return{color:t.colors.onHeader,position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:`${r}px`}})),X=((0,o.zo)("div",{position:"relative"}),(0,o.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:"100%",background:t.colors.backgroundPrimary}}))),O=(0,o.zo)("div",{width:"100%",maxWidth:"722px"}),F=(0,o.zo)("div",{flex:1}),D=(0,o.zo)("div",{justifyContent:"flex-end",display:"flex",flexGrow:0,alignItems:"center"}),_=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:o,isSearchFeed:n,isSchedulable:_,storeUuid:M}=e;const{user:T}=(0,b.Z)(),L=(0,a.Z)(),R=(0,P.Z)(),U=(0,y.Z)(),Q=(0,I.ZP)(),Y=(0,l.WI)("header-location-typeahead"),{openMenu:E,closeMenu:G,closeAndUpdate:j}=(0,g.Z)(),W=(0,B.Z)(),N=(0,$.d)(),A=Boolean(M),{showSigninSignup:V,campaign:J,logSignInSignUpClick:K}=(0,C.M)(A||!1),{headerHeight:ee}=(0,H.Z)();let te;te=W?(0,z.tZ)(m.Z,{startShoppingRedirect:!n&&!A}):(0,z.tZ)(f.Z,{});const{feed:re}=(0,w.Z)(),oe=U?.address?.address1||"";return R?(0,z.tZ)(X,{children:(0,z.tZ)(q,{$headerHeight:ee,children:(0,z.tZ)(d.Z,{})})}):"DELIVERY"===N?(0,z.tZ)(v.ZP,{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:o,isSearchFeed:n,showSigninSignup:V,campaign:J,logSignInSignUpClick:K,storeUuid:M,isSchedulable:_}):(0,z.tZ)(X,{children:(0,z.BX)(q,{$headerHeight:ee,children:[L?null:(0,z.BX)(z.HY,{children:[(0,z.tZ)(x.Z,{}),(0,z.tZ)(i.ZP,{$width:"32px"}),(0,z.tZ)(d.Z,{}),(0,z.tZ)(i.ZP,{$width:"40px"})]}),U?(0,z.BX)(z.HY,{children:[r?(0,z.BX)(z.HY,{children:[(0,z.tZ)(Z.Z,{isDisabled:re.isLoading}),(0,z.tZ)(i.ZP,{$width:"16px"})]}):null,(0,z.tZ)(c.Z,{size:"large",storeUuid:M,isSchedulable:_}),(0,z.tZ)(i.ZP,{$width:"64px"}),L?null:(0,z.tZ)(p.Z,{onFocus:()=>{Q("eats:search_bar_clicked"),E("search")},clickOutside:()=>{G()}})]}):(0,z.BX)(z.HY,{children:[(0,z.tZ)(i.ZP,{$width:"64px"}),(0,z.tZ)(O,{children:(0,z.tZ)(u.Z,{registerRef:Y,onLocationSelected:e=>{j(e,void 0,t)},initialQuery:oe,id:"header"})}),(0,z.tZ)(F,{})]}),(0,z.BX)(D,{children:[U||o?(0,z.tZ)(h.Z,{}):null,(0,z.tZ)(z.HY,{children:te}),(0,z.tZ)(s.Z,{}),T.data?.isLoggedIn?null:(0,z.BX)(z.HY,{children:[(0,z.tZ)(i.ZP,{$width:"24px"}),V?(0,z.tZ)(S.m,{campaign:J}):(0,z.tZ)(k.Z,{campaign:J,beforeClick:()=>K("signin","header")})]})]})]})})};_.displayName="HeaderDesktop";const M=_}}]);